(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6261],{6400:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return x},Fragment:function(){return I},cloneElement:function(){return K},createContext:function(){return $},createElement:function(){return k},createRef:function(){return E},h:function(){return k},hydrate:function(){return F},isValidElement:function(){return a},options:function(){return i},render:function(){return Z},toChildArray:function(){return R}});var s,i,r,a,o,c,l,d,u,h,p,f,m,g={},_=[],w=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,y=Array.isArray;function b(e,t){for(var n in t)e[n]=t[n];return e}function v(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function k(e,t,n){var i,r,a,o={};for(a in t)"key"==a?i=t[a]:"ref"==a?r=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?s.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return C(e,o,i,r,null)}function C(e,t,n,s,a){var o={type:e,props:t,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==a?++r:a,__i:-1,__u:0};return null==a&&null!=i.vnode&&i.vnode(o),o}function E(){return{current:null}}function I(e){return e.children}function x(e,t){this.props=e,this.context=t}function S(e,t){if(null==t)return e.__?S(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?S(e):null}function M(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return M(e)}}function A(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!L.__r++||c!==i.debounceRendering)&&((c=i.debounceRendering)||l)(L)}function L(){var e,t,n,s,r,a,c,l;for(o.sort(d);e=o.shift();)e.__d&&(t=o.length,s=void 0,a=(r=(n=e).__v).__e,c=[],l=[],n.__P&&((s=b({},r)).__v=r.__v+1,i.vnode&&i.vnode(s),W(n.__P,s,r,n.__n,n.__P.namespaceURI,32&r.__u?[a]:null,c,null==a?S(r):a,!!(32&r.__u),l),s.__v=r.__v,s.__.__k[s.__i]=s,q(c,s,l),s.__e!=a&&M(s)),o.length>t&&o.sort(d));L.__r=0}function P(e,t,n,s,i,r,a,o,c,l,d){var u,h,p,f,m,w,y=s&&s.__k||_,b=t.length;for(c=D(n,t,y,c),u=0;u<b;u++)null!=(p=n.__k[u])&&(h=-1===p.__i?g:y[p.__i]||g,p.__i=u,w=W(e,p,h,i,r,a,o,c,l,d),f=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&V(h.ref,null,p),d.push(p.ref,p.__c||f,p)),null==m&&null!=f&&(m=f),4&p.__u||h.__k===p.__k?c=N(p,c,e):"function"==typeof p.type&&void 0!==w?c=w:f&&(c=f.nextSibling),p.__u&=-7);return n.__e=m,c}function D(e,t,n,s){var i,r,a,o,c,l=t.length,d=n.length,u=d,h=0;for(e.__k=[],i=0;i<l;i++)null!=(r=t[i])&&"boolean"!=typeof r&&"function"!=typeof r?(o=i+h,(r=e.__k[i]="string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?C(null,r,null,null,null):y(r)?C(I,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?C(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=e,r.__b=e.__b+1,a=null,-1!==(c=r.__i=T(r,n,o,u))&&(u--,(a=n[c])&&(a.__u|=2)),null==a||null===a.__v?(-1==c&&h--,"function"!=typeof r.type&&(r.__u|=4)):c!==o&&(c==o-1?h--:c==o+1?h++:(c>o?h--:h++,r.__u|=4))):r=e.__k[i]=null;if(u)for(i=0;i<d;i++)null!=(a=n[i])&&0==(2&a.__u)&&(a.__e==s&&(s=S(a)),B(a,a));return s}function N(e,t,n){var s,i;if("function"==typeof e.type){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,t=N(s[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=S(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function R(e,t){return t=t||[],null==e||"boolean"==typeof e||(y(e)?e.some((function(e){R(e,t)})):t.push(e)),t}function T(e,t,n,s){var i=e.key,r=e.type,a=n-1,o=n+1,c=t[n];if(null===c||c&&i==c.key&&r===c.type&&0==(2&c.__u))return n;if(("function"!=typeof r||r===I||i)&&s>(null!=c&&0==(2&c.__u)?1:0))for(;a>=0||o<t.length;){if(a>=0){if((c=t[a])&&0==(2&c.__u)&&i==c.key&&r===c.type)return a;a--}if(o<t.length){if((c=t[o])&&0==(2&c.__u)&&i==c.key&&r===c.type)return o;o++}}return-1}function U(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||w.test(t)?n:n+"px"}function j(e,t,n,s,i){var r;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof s&&(e.style.cssText=s=""),s)for(t in s)n&&t in n||U(e.style,t,"");if(n)for(t in n)s&&n[t]===s[t]||U(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])r=t!==(t=t.replace(u,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?s?n.u=s.u:(n.u=h,e.addEventListener(t,r?f:p,r)):e.removeEventListener(t,r?f:p,r);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function O(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=h++;else if(t.t<n.u)return;return n(i.event?i.event(t):t)}}}function W(e,t,n,s,r,a,o,c,l,d){var u,h,p,f,m,g,_,w,k,C,E,S,M,A,L,D,N,R=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[c=t.__e=n.__e]),(u=i.__b)&&u(t);e:if("function"==typeof R)try{if(w=t.props,k="prototype"in R&&R.prototype.render,C=(u=R.contextType)&&s[u.__c],E=u?C?C.props.value:u.__:s,n.__c?_=(h=t.__c=n.__c).__=h.__E:(k?t.__c=h=new R(w,E):(t.__c=h=new x(w,E),h.constructor=R,h.render=z),C&&C.sub(h),h.props=w,h.state||(h.state={}),h.context=E,h.__n=s,p=h.__d=!0,h.__h=[],h._sb=[]),k&&null==h.__s&&(h.__s=h.state),k&&null!=R.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=b({},h.__s)),b(h.__s,R.getDerivedStateFromProps(w,h.__s))),f=h.props,m=h.state,h.__v=t,p)k&&null==R.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),k&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(k&&null==R.getDerivedStateFromProps&&w!==f&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(w,E),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(w,h.__s,E)||t.__v===n.__v)){for(t.__v!==n.__v&&(h.props=w,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),S=0;S<h._sb.length;S++)h.__h.push(h._sb[S]);h._sb=[],h.__h.length&&o.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(w,h.__s,E),k&&null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(f,m,g)}))}if(h.context=E,h.props=w,h.__P=e,h.__e=!1,M=i.__r,A=0,k){for(h.state=h.__s,h.__d=!1,M&&M(t),u=h.render(h.props,h.state,h.context),L=0;L<h._sb.length;L++)h.__h.push(h._sb[L]);h._sb=[]}else do{h.__d=!1,M&&M(t),u=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(s=b(b({},s),h.getChildContext())),k&&!p&&null!=h.getSnapshotBeforeUpdate&&(g=h.getSnapshotBeforeUpdate(f,m)),c=P(e,y(D=null!=u&&u.type===I&&null==u.key?u.props.children:u)?D:[D],t,n,s,r,a,o,c,l,d),h.base=t.__e,t.__u&=-161,h.__h.length&&o.push(h),_&&(h.__E=h.__=null)}catch(e){if(t.__v=null,l||null!=a)if(e.then){for(t.__u|=l?160:128;c&&8===c.nodeType&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else for(N=a.length;N--;)v(a[N]);else t.__e=n.__e,t.__k=n.__k;i.__e(e,t,n)}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=H(n.__e,t,n,s,r,a,o,l,d);return(u=i.diffed)&&u(t),128&t.__u?void 0:c}function q(e,t,n){for(var s=0;s<n.length;s++)V(n[s],n[++s],n[++s]);i.__c&&i.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){i.__e(e,t.__v)}}))}function H(e,t,n,r,a,o,c,l,d){var u,h,p,f,m,_,w,b=n.props,k=t.props,C=t.type;if("svg"===C?a="http://www.w3.org/2000/svg":"math"===C?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=o)for(u=0;u<o.length;u++)if((m=o[u])&&"setAttribute"in m==!!C&&(C?m.localName===C:3===m.nodeType)){e=m,o[u]=null;break}if(null==e){if(null===C)return document.createTextNode(k);e=document.createElementNS(a,C,k.is&&k),l&&(i.__m&&i.__m(t,o),l=!1),o=null}if(null===C)b===k||l&&e.data===k||(e.data=k);else{if(o=o&&s.call(e.childNodes),b=n.props||g,!l&&null!=o)for(b={},u=0;u<e.attributes.length;u++)b[(m=e.attributes[u]).name]=m.value;for(u in b)if(m=b[u],"children"==u);else if("dangerouslySetInnerHTML"==u)p=m;else if(!(u in k)){if("value"==u&&"defaultValue"in k||"checked"==u&&"defaultChecked"in k)continue;j(e,u,null,m,a)}for(u in k)m=k[u],"children"==u?f=m:"dangerouslySetInnerHTML"==u?h=m:"value"==u?_=m:"checked"==u?w=m:l&&"function"!=typeof m||b[u]===m||j(e,u,m,b[u],a);if(h)l||p&&(h.__html===p.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(p&&(e.innerHTML=""),P(e,y(f)?f:[f],t,n,r,"foreignObject"===C?"http://www.w3.org/1999/xhtml":a,o,c,o?o[0]:n.__k&&S(n,0),l,d),null!=o)for(u=o.length;u--;)v(o[u]);l||(u="value","progress"===C&&null==_?e.removeAttribute("value"):void 0!==_&&(_!==e[u]||"progress"===C&&!_||"option"===C&&_!==b[u])&&j(e,u,_,b[u],a),u="checked",void 0!==w&&w!==e[u]&&j(e,u,w,b[u],a))}return e}function V(e,t,n){try{if("function"==typeof e){var s="function"==typeof e.__u;s&&e.__u(),s&&null==t||(e.__u=e(t))}else e.current=t}catch(e){i.__e(e,n)}}function B(e,t,n){var s,r;if(i.unmount&&i.unmount(e),(s=e.ref)&&(s.current&&s.current!==e.__e||V(s,null,t)),null!=(s=e.__c)){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(e){i.__e(e,t)}s.base=s.__P=null}if(s=e.__k)for(r=0;r<s.length;r++)s[r]&&B(s[r],t,n||"function"!=typeof e.type);n||v(e.__e),e.__c=e.__=e.__e=void 0}function z(e,t,n){return this.constructor(e,n)}function Z(e,t,n){var r,a,o,c;t===document&&(t=document.documentElement),i.__&&i.__(e,t),a=(r="function"==typeof n)?null:n&&n.__k||t.__k,o=[],c=[],W(t,e=(!r&&n||t).__k=k(I,null,[e]),a||g,g,t.namespaceURI,!r&&n?[n]:a?null:t.firstChild?s.call(t.childNodes):null,o,!r&&n?n:a?a.__e:t.firstChild,r,c),q(o,e,c)}function F(e,t){Z(e,t,F)}function K(e,t,n){var i,r,a,o,c=b({},e.props);for(a in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),t)"key"==a?i=t[a]:"ref"==a?r=t[a]:c[a]=void 0===t[a]&&void 0!==o?o[a]:t[a];return arguments.length>2&&(c.children=arguments.length>3?s.call(arguments,2):n),C(e.type,c,i||e.key,r||e.ref,null)}function $(e,t){var n={__c:t="__cC"+m++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,s;return this.getChildContext||(n=new Set,(s={})[t]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.forEach((function(e){e.__e=!0,A(e)}))},this.sub=function(e){n.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.delete(e),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}s=_.slice,i={__e:function(e,t,n,s){for(var i,r,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(e)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,s||{}),a=i.__d),a)return i.__E=i}catch(t){e=t}throw e}},r=0,a=function(e){return null!=e&&null==e.constructor},x.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=b({},this.state),"function"==typeof e&&(e=e(b({},n),this.props)),e&&b(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),A(this))},x.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),A(this))},x.prototype.render=I,o=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,d=function(e,t){return e.__v.__b-t.__v.__b},L.__r=0,u=/(PointerCapture)$|Capture$/i,h=0,p=O(!1),f=O(!0),m=0},30396:function(e,t,n){"use strict";n.r(t),n.d(t,{useCallback:function(){return I},useContext:function(){return x},useDebugValue:function(){return S},useEffect:function(){return b},useErrorBoundary:function(){return M},useId:function(){return A},useImperativeHandle:function(){return C},useLayoutEffect:function(){return v},useMemo:function(){return E},useReducer:function(){return y},useRef:function(){return k},useState:function(){return w}});var s,i,r,a,o=n(6400),c=0,l=[],d=o.options,u=d.__b,h=d.__r,p=d.diffed,f=d.__c,m=d.unmount,g=d.__;function _(e,t){d.__h&&d.__h(i,e,c||t),c=0;var n=i.__H||(i.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function w(e){return c=1,y(U,e)}function y(e,t,n){var r=_(s++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):U(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=i,!i.u)){var a=function(e,t,n){if(!r.__c.__H)return!0;var s=r.__c.__H.__.filter((function(e){return!!e.__c}));if(s.every((function(e){return!e.__N})))return!o||o.call(this,e,t,n);var i=r.__c.props!==e;return s.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}})),o&&o.call(this,e,t,n)||i};i.u=!0;var o=i.shouldComponentUpdate,c=i.componentWillUpdate;i.componentWillUpdate=function(e,t,n){if(this.__e){var s=o;o=void 0,a(e,t,n),o=s}c&&c.call(this,e,t,n)},i.shouldComponentUpdate=a}return r.__N||r.__}function b(e,t){var n=_(s++,3);!d.__s&&T(n.__H,t)&&(n.__=e,n.i=t,i.__H.__h.push(n))}function v(e,t){var n=_(s++,4);!d.__s&&T(n.__H,t)&&(n.__=e,n.i=t,i.__h.push(n))}function k(e){return c=5,E((function(){return{current:e}}),[])}function C(e,t,n){c=6,v((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))}function E(e,t){var n=_(s++,7);return T(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function I(e,t){return c=8,E((function(){return e}),t)}function x(e){var t=i.context[e.__c],n=_(s++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(i)),t.props.value):e.__}function S(e,t){d.useDebugValue&&d.useDebugValue(t?t(e):e)}function M(e){var t=_(s++,10),n=w();return t.__=e,i.componentDidCatch||(i.componentDidCatch=function(e,s){t.__&&t.__(e,s),n[1](e)}),[n[0],function(){n[1](void 0)}]}function A(){var e=_(s++,11);if(!e.__){for(var t=i.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function L(){for(var e;e=l.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(N),e.__H.__h.forEach(R),e.__H.__h=[]}catch(s){e.__H.__h=[],d.__e(s,e.__v)}}d.__b=function(e){i=null,u&&u(e)},d.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),g&&g(e,t)},d.__r=function(e){h&&h(e),s=0;var t=(i=e.__c).__H;t&&(r===i?(t.__h=[],i.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0}))):(t.__h.forEach(N),t.__h.forEach(R),t.__h=[],s=0)),r=i},d.diffed=function(e){p&&p(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==l.push(t)&&a===d.requestAnimationFrame||((a=d.requestAnimationFrame)||D)(L)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.i=void 0}))),r=i=null},d.__c=function(e,t){t.some((function(e){try{e.__h.forEach(N),e.__h=e.__h.filter((function(e){return!e.__||R(e)}))}catch(i){t.some((function(e){e.__h&&(e.__h=[])})),t=[],d.__e(i,e.__v)}})),f&&f(e,t)},d.unmount=function(e){m&&m(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{N(e)}catch(e){t=e}})),n.__H=void 0,t&&d.__e(t,n.__v))};var P="function"==typeof requestAnimationFrame;function D(e){var t,n=function(){clearTimeout(s),P&&cancelAnimationFrame(t),setTimeout(e)},s=setTimeout(n,100);P&&(t=requestAnimationFrame(n))}function N(e){var t=i,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),i=t}function R(e){var t=i;e.__c=e.__(),i=t}function T(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function U(e,t){return"function"==typeof t?t(e):t}},42817:function(e,t,n){var s=n(48764).Buffer;const i=n(91488);function r(e){return e.startsWith("int[")?"int256"+e.slice(3):"int"===e?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):"uint"===e?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):"fixed"===e?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):"ufixed"===e?"ufixed128x128":e}function a(e){return Number.parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function o(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[Number.parseInt(t[1],10),Number.parseInt(t[2],10)]}function c(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?""===t[2]?"dynamic":Number.parseInt(t[2],10):null}function l(e){var t=typeof e;if("string"===t||"number"===t)return BigInt(e);if("bigint"===t)return e;throw new Error("Argument is not a number")}function d(e,t){var n,r,u,h;if("address"===e)return d("uint160",l(t));if("bool"===e)return d("uint8",t?1:0);if("string"===e)return d("bytes",new s(t,"utf8"));if(function(e){return e.lastIndexOf("]")===e.length-1}(e)){if("undefined"===typeof t.length)throw new Error("Not an array?");if("dynamic"!==(n=c(e))&&0!==n&&t.length>n)throw new Error("Elements exceed array size: "+n);for(h in u=[],e=e.slice(0,e.lastIndexOf("[")),"string"===typeof t&&(t=JSON.parse(t)),t)u.push(d(e,t[h]));if("dynamic"===n){var p=d("uint256",t.length);u.unshift(p)}return s.concat(u)}if("bytes"===e)return t=new s(t),u=s.concat([d("uint256",t.length),t]),t.length%32!==0&&(u=s.concat([u,i.zeros(32-t.length%32)])),u;if(e.startsWith("bytes")){if((n=a(e))<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return i.setLengthRight(t,32)}if(e.startsWith("uint")){if((n=a(e))%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);r=l(t);const s=i.bitLengthFromBigInt(r);if(s>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+s);if(r<0)throw new Error("Supplied uint is negative");return i.bufferBEFromBigInt(r,32)}if(e.startsWith("int")){if((n=a(e))%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);r=l(t);const s=i.bitLengthFromBigInt(r);if(s>n)throw new Error("Supplied int exceeds width: "+n+" vs "+s);const o=i.twosFromBigInt(r,256);return i.bufferBEFromBigInt(o,32)}if(e.startsWith("ufixed")){if(n=o(e),(r=l(t))<0)throw new Error("Supplied ufixed is negative");return d("uint256",r*BigInt(2)**BigInt(n[1]))}if(e.startsWith("fixed"))return n=o(e),d("int256",l(t)*BigInt(2)**BigInt(n[1]));throw new Error("Unsupported or invalid type: "+e)}function u(e){return"string"===e||"bytes"===e||"dynamic"===c(e)}function h(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var n,o,c=[],d=0;d<e.length;d++){var u=r(e[d]),h=t[d];if("bytes"===u)c.push(h);else if("string"===u)c.push(new s(h,"utf8"));else if("bool"===u)c.push(new s(h?"01":"00","hex"));else if("address"===u)c.push(i.setLength(h,20));else if(u.startsWith("bytes")){if((n=a(u))<1||n>32)throw new Error("Invalid bytes<N> width: "+n);c.push(i.setLengthRight(h,n))}else if(u.startsWith("uint")){if((n=a(u))%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);o=l(h);const e=i.bitLengthFromBigInt(o);if(e>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+e);c.push(i.bufferBEFromBigInt(o,n/8))}else{if(!u.startsWith("int"))throw new Error("Unsupported or invalid type: "+u);{if((n=a(u))%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);o=l(h);const e=i.bitLengthFromBigInt(o);if(e>n)throw new Error("Supplied int exceeds width: "+n+" vs "+e);const t=i.twosFromBigInt(o,n);c.push(i.bufferBEFromBigInt(t,n/8))}}}return s.concat(c)}e.exports={rawEncode:function(e,t){var n=[],i=[],a=32*e.length;for(var o in e){var c=r(e[o]),l=d(c,t[o]);u(c)?(n.push(d("uint256",a)),i.push(l),a+=l.length):n.push(l)}return s.concat(n.concat(i))},solidityPack:h,soliditySHA3:function(e,t){return i.keccak(h(e,t))}}},87009:function(e,t,n){var s=n(48764).Buffer;const i=n(91488),r=n(42817),a={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},o={encodeData(e,t,n,a=!0){const o=["bytes32"],c=[this.hashType(e,n)];if(a){const l=(e,t,o)=>{if(void 0!==n[t])return["bytes32",null==o?"0x0000000000000000000000000000000000000000000000000000000000000000":i.keccak(this.encodeData(t,o,n,a))];if(void 0===o)throw new Error(`missing value for field ${e} of type ${t}`);if("bytes"===t)return["bytes32",i.keccak(o)];if("string"===t)return"string"===typeof o&&(o=s.from(o,"utf8")),["bytes32",i.keccak(o)];if(t.lastIndexOf("]")===t.length-1){const n=t.slice(0,t.lastIndexOf("[")),s=o.map((t=>l(e,n,t)));return["bytes32",i.keccak(r.rawEncode(s.map((([e])=>e)),s.map((([,e])=>e))))]}return[t,o]};for(const s of n[e]){const[e,n]=l(s.name,s.type,t[s.name]);o.push(e),c.push(n)}}else for(const r of n[e]){let e=t[r.name];if(void 0!==e)if("bytes"===r.type)o.push("bytes32"),e=i.keccak(e),c.push(e);else if("string"===r.type)o.push("bytes32"),"string"===typeof e&&(e=s.from(e,"utf8")),e=i.keccak(e),c.push(e);else if(void 0!==n[r.type])o.push("bytes32"),e=i.keccak(this.encodeData(r.type,e,n,a)),c.push(e);else{if(r.type.lastIndexOf("]")===r.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");o.push(r.type),c.push(e)}}return r.rawEncode(o,c)},encodeType(e,t){let n="",s=this.findTypeDependencies(e,t).filter((t=>t!==e));s=[e].concat(s.sort());for(const i of s){if(!t[i])throw new Error("No type definition specified: "+i);n+=i+"("+t[i].map((({name:e,type:t})=>t+" "+e)).join(",")+")"}return n},findTypeDependencies(e,t,n=[]){if(e=e.match(/^\w*/)[0],n.includes(e)||void 0===t[e])return n;n.push(e);for(const s of t[e])for(const e of this.findTypeDependencies(s.type,t,n))!n.includes(e)&&n.push(e);return n},hashStruct(e,t,n,s=!0){return i.keccak(this.encodeData(e,t,n,s))},hashType(e,t){return i.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const n in a.properties)e[n]&&(t[n]=e[n]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){const n=this.sanitizeData(e),r=[s.from("1901","hex")];return r.push(this.hashStruct("EIP712Domain",n.domain,n.types,t)),"EIP712Domain"!==n.primaryType&&r.push(this.hashStruct(n.primaryType,n.message,n.types,t)),i.keccak(s.concat(r))}};e.exports={TYPED_MESSAGE_SCHEMA:a,TypedDataUtils:o,hashForSignTypedDataLegacy:function(e){return function(e){const t=new Error("Expect argument to be non-empty array");if("object"!==typeof e||!e.length)throw t;const n=e.map((function(e){return"bytes"===e.type?i.toBuffer(e.value):e.value})),s=e.map((function(e){return e.type})),a=e.map((function(e){if(!e.name)throw t;return e.type+" "+e.name}));return r.soliditySHA3(["bytes32","bytes32"],[r.soliditySHA3(new Array(e.length).fill("string"),a),r.soliditySHA3(s,n)])}(e.data)},hashForSignTypedData_v3:function(e){return o.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return o.hash(e.data)}}},91488:function(e,t,n){var s=n(48764).Buffer;const{keccak_256:i}=n(85426);function r(e){return s.allocUnsafe(e).fill(0)}function a(e,t){let n=e.toString(16);n.length%2!==0&&(n="0"+n);const i=n.match(/.{1,2}/g).map((e=>parseInt(e,16)));for(;i.length<t;)i.unshift(0);return s.from(i)}function o(e,t,n){const s=r(t);return e=c(e),n?e.length<t?(e.copy(s),s):e.slice(0,t):e.length<t?(e.copy(s,t-e.length),s):e.slice(-t)}function c(e){if(!s.isBuffer(e))if(Array.isArray(e))e=s.from(e);else if("string"===typeof e)e=l(e)?s.from((t=d(e)).length%2?"0"+t:t,"hex"):s.from(e);else if("number"===typeof e)e=intToBuffer(e);else if(null===e||void 0===e)e=s.allocUnsafe(0);else if("bigint"===typeof e)e=a(e);else{if(!e.toArray)throw new Error("invalid type");e=s.from(e.toArray())}var t;return e}function l(e){return"string"===typeof e&&e.match(/^0x[0-9A-Fa-f]*$/)}function d(e){return"string"===typeof e&&e.startsWith("0x")?e.slice(2):e}e.exports={zeros:r,setLength:o,setLengthRight:function(e,t){return o(e,t,!0)},isHexString:l,stripHexPrefix:d,toBuffer:c,bufferToHex:function(e){return"0x"+(e=c(e)).toString("hex")},keccak:function(e,t){if(e=c(e),t||(t=256),256!==t)throw new Error("unsupported");return s.from(i(new Uint8Array(e)))},bitLengthFromBigInt:function(e){return e.toString(2).length},bufferBEFromBigInt:a,twosFromBigInt:function(e,t){let n;if(e<0n){n=(~e&(1n<<BigInt(t))-1n)+1n}else n=e;return n&=(1n<<BigInt(t))-1n,n}}},86261:function(e,t,n){"use strict";n.r(t),n.d(t,{CoinbaseWalletSDK:function(){return mt},createCoinbaseWalletSDK:function(){return _t},default:function(){return wt}});class s{constructor(e,t){this.scope=e,this.module=t}storeObject(e,t){this.setItem(e,JSON.stringify(t))}loadObject(e){const t=this.getItem(e);return t?JSON.parse(t):void 0}setItem(e,t){localStorage.setItem(this.scopedKey(e),t)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),t=[];for(let n=0;n<localStorage.length;n++){const s=localStorage.key(n);"string"===typeof s&&s.startsWith(e)&&t.push(s)}t.forEach((e=>localStorage.removeItem(e)))}scopedKey(e){return`-${this.scope}${this.module?`:${this.module}`:""}:${e}`}static clearAll(){new s("CBWSDK").clear(),new s("walletlink").clear()}}const i={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},r={userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902},a={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},o="Unspecified error message.";function c(e,t=o){if(e&&Number.isInteger(e)){const t=e.toString();if(h(a,t))return a[t].message;if(d(e))return"Unspecified server error."}return t}function l(e,{shouldIncludeStack:t=!1}={}){const n={};if(e&&"object"===typeof e&&!Array.isArray(e)&&h(e,"code")&&function(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!a[t]||!!d(e)}(e.code)){const t=e;n.code=t.code,t.message&&"string"===typeof t.message?(n.message=t.message,h(t,"data")&&(n.data=t.data)):(n.message=c(n.code),n.data={originalError:u(e)})}else n.code=i.internal,n.message=p(e,"message")?e.message:o,n.data={originalError:u(e)};return t&&(n.stack=p(e,"stack")?e.stack:void 0),n}function d(e){return e>=-32099&&e<=-32e3}function u(e){return e&&"object"===typeof e&&!Array.isArray(e)?Object.assign({},e):e}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p(e,t){return"object"===typeof e&&null!==e&&t in e&&"string"===typeof e[t]}const f={parse:e=>g(i.parse,e),invalidRequest:e=>g(i.invalidRequest,e),invalidParams:e=>g(i.invalidParams,e),methodNotFound:e=>g(i.methodNotFound,e),internal:e=>g(i.internal,e),server:e=>{if(!e||"object"!==typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return g(t,e)},invalidInput:e=>g(i.invalidInput,e),resourceNotFound:e=>g(i.resourceNotFound,e),resourceUnavailable:e=>g(i.resourceUnavailable,e),transactionRejected:e=>g(i.transactionRejected,e),methodNotSupported:e=>g(i.methodNotSupported,e),limitExceeded:e=>g(i.limitExceeded,e)},m={userRejectedRequest:e=>_(r.userRejectedRequest,e),unauthorized:e=>_(r.unauthorized,e),unsupportedMethod:e=>_(r.unsupportedMethod,e),disconnected:e=>_(r.disconnected,e),chainDisconnected:e=>_(r.chainDisconnected,e),unsupportedChain:e=>_(r.unsupportedChain,e),custom:e=>{if(!e||"object"!==typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:s}=e;if(!n||"string"!==typeof n)throw new Error('"message" must be a nonempty string');return new b(t,n,s)}};function g(e,t){const[n,s]=w(t);return new y(e,n||c(e),s)}function _(e,t){const[n,s]=w(t);return new b(e,n||c(e),s)}function w(e){if(e){if("string"===typeof e)return[e];if("object"===typeof e&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&"string"!==typeof t)throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}class y extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!==typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==n&&(this.data=n)}}class b extends y{constructor(e,t,n){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,n)}}const v=e=>e,k=e=>e,C=e=>e;function E(e){return Math.floor(e)}var I=n(48764).Buffer;const x=/^[0-9]*$/,S=/^[a-f0-9]*$/;function M(e){return A(crypto.getRandomValues(new Uint8Array(e)))}function A(e){return[...e].map((e=>e.toString(16).padStart(2,"0"))).join("")}function L(e){return new Uint8Array(e.match(/.{1,2}/g).map((e=>Number.parseInt(e,16))))}function P(e,t=!1){const n=e.toString("hex");return v(t?`0x${n}`:n)}function D(e){return P(H(e),!0)}function N(e){return C(e.toString(10))}function R(e){return v(`0x${BigInt(e).toString(16)}`)}function T(e){return e.startsWith("0x")||e.startsWith("0X")}function U(e){return T(e)?e.slice(2):e}function j(e){return T(e)?`0x${e.slice(2)}`:`0x${e}`}function O(e){if("string"!==typeof e)return!1;const t=U(e).toLowerCase();return S.test(t)}function W(e,t=!1){let n=function(e,t=!1){if("string"===typeof e){const n=U(e).toLowerCase();if(S.test(n))return v(t?`0x${n}`:n)}throw f.invalidParams(`"${String(e)}" is not a hexadecimal string`)}(e,!1);return n.length%2===1&&(n=v(`0${n}`)),t?v(`0x${n}`):n}function q(e){if("string"===typeof e){const t=U(e).toLowerCase();if(O(t)&&40===t.length)return k(j(t))}throw f.invalidParams(`Invalid Ethereum address: ${String(e)}`)}function H(e){if(I.isBuffer(e))return e;if("string"===typeof e){if(O(e)){const t=W(e,!1);return I.from(t,"hex")}return I.from(e,"utf8")}throw f.invalidParams(`Not binary data: ${String(e)}`)}function V(e){if("number"===typeof e&&Number.isInteger(e))return E(e);if("string"===typeof e){if(x.test(e))return E(Number(e));if(O(e))return E(Number(BigInt(W(e,!0))))}throw f.invalidParams(`Not an integer: ${String(e)}`)}function B(e){if(null!==e&&("bigint"===typeof e||function(e){if(null==e||"function"!==typeof e.constructor)return!1;const{constructor:t}=e;return"function"===typeof t.config&&"number"===typeof t.EUCLID}(e)))return BigInt(e.toString(10));if("number"===typeof e)return BigInt(V(e));if("string"===typeof e){if(x.test(e))return BigInt(e);if(O(e))return BigInt(W(e,!0))}throw f.invalidParams(`Not an integer: ${String(e)}`)}function z(e){if("string"===typeof e)return JSON.parse(e);if("object"===typeof e)return e;throw f.invalidParams(`Not a JSON string or an object: ${String(e)}`)}function Z(){const e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:t,host:n}=document.location,s=e?e.getAttribute("href"):null;return!s||s.startsWith("javascript:")||s.startsWith("vbscript:")?`${t}//${n}/favicon.ico`:s.startsWith("http://")||s.startsWith("https://")||s.startsWith("data:")?s:s.startsWith("//")?t+s:`${t}//${n}${s}`}function F(e){switch(e){case"public":return"spki";case"private":return"pkcs8"}}async function K(e,t){const n=F(e),s=await crypto.subtle.exportKey(n,t);return A(new Uint8Array(s))}async function $(e,t){const n=F(e),s=L(t).buffer;return await crypto.subtle.importKey(n,new Uint8Array(s),{name:"ECDH",namedCurve:"P-256"},!0,"private"===e?["deriveKey"]:[])}async function G(e,t){return async function(e,t){const n=crypto.getRandomValues(new Uint8Array(12));return{iv:n,cipherText:await crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,(new TextEncoder).encode(t))}}(t,JSON.stringify(e,((e,t)=>{if(!(t instanceof Error))return t;const n=t;return Object.assign(Object.assign({},n.code?{code:n.code}:{}),{message:n.message})})))}async function J(e,t){return JSON.parse(await async function(e,{iv:t,cipherText:n}){const s=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,n);return(new TextDecoder).decode(s)}(t,e))}const Y={storageKey:"ownPrivateKey",keyType:"private"},Q={storageKey:"ownPublicKey",keyType:"public"},X={storageKey:"peerPublicKey",keyType:"public"};class ee{constructor(){this.storage=new s("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(e){this.sharedSecret=null,this.peerPublicKey=e,await this.storeKey(X,e),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(Q.storageKey),this.storage.removeItem(Y.storageKey),this.storage.removeItem(X.storageKey)}async generateKeyPair(){const e=await async function(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}();this.ownPrivateKey=e.privateKey,this.ownPublicKey=e.publicKey,await this.storeKey(Y,e.privateKey),await this.storeKey(Q,e.publicKey)}async loadKeysIfNeeded(){if(null===this.ownPrivateKey&&(this.ownPrivateKey=await this.loadKey(Y)),null===this.ownPublicKey&&(this.ownPublicKey=await this.loadKey(Q)),null!==this.ownPrivateKey&&null!==this.ownPublicKey||await this.generateKeyPair(),null===this.peerPublicKey&&(this.peerPublicKey=await this.loadKey(X)),null===this.sharedSecret){if(null===this.ownPrivateKey||null===this.peerPublicKey)return;this.sharedSecret=await async function(e,t){return crypto.subtle.deriveKey({name:"ECDH",public:t},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(e){const t=this.storage.getItem(e.storageKey);return t?$(e.keyType,t):null}async storeKey(e,t){const n=await K(e.keyType,t);this.storage.setItem(e.storageKey,n)}}const te="4.3.0",ne="@coinbase/wallet-sdk";async function se(e,t){const n=Object.assign(Object.assign({},e),{jsonrpc:"2.0",id:crypto.randomUUID()}),s=await window.fetch(t,{method:"POST",body:JSON.stringify(n),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":te,"X-Cbw-Sdk-Platform":ne}}),{result:i,error:r}=await s.json();if(r)throw r;return i}function ie({metadata:e,preference:t}){var n,s;const{appName:i,appLogoUrl:r,appChainIds:a}=e;if("smartWalletOnly"!==t.options){const e=globalThis.coinbaseWalletExtension;if(e)return null===(n=e.setAppInfo)||void 0===n||n.call(e,i,r,a,t),e}const o=function(){var e,t;try{const n=globalThis;return null!==(e=n.ethereum)&&void 0!==e?e:null===(t=n.top)||void 0===t?void 0:t.ethereum}catch(n){return}}();if(null===o||void 0===o?void 0:o.isCoinbaseBrowser)return null===(s=o.setAppInfo)||void 0===s||s.call(o,i,r,a,t),o}const re="accounts",ae="activeChain",oe="availableChains",ce="walletCapabilities";class le{constructor(e){var t,n,i;this.metadata=e.metadata,this.communicator=e.communicator,this.callback=e.callback,this.keyManager=new ee,this.storage=new s("CBWSDK","SCWStateManager"),this.accounts=null!==(t=this.storage.loadObject(re))&&void 0!==t?t:[],this.chain=this.storage.loadObject(ae)||{id:null!==(i=null===(n=e.metadata.appChainIds)||void 0===n?void 0:n[0])&&void 0!==i?i:1},this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}async handshake(e){var t,n,s,i;await(null===(n=(t=this.communicator).waitForPopupLoaded)||void 0===n?void 0:n.call(t));const r=await this.createRequestMessage({handshake:{method:e.method,params:Object.assign({},this.metadata,null!==(s=e.params)&&void 0!==s?s:{})}}),a=await this.communicator.postRequestAndWaitForResponse(r);if("failure"in a.content)throw a.content.failure;const o=await $("public",a.sender);await this.keyManager.setPeerPublicKey(o);const c=(await this.decryptResponseMessage(a)).result;if("error"in c)throw c.error;switch(e.method){case"eth_requestAccounts":{const e=c.value;this.accounts=e,this.storage.storeObject(re,e),null===(i=this.callback)||void 0===i||i.call(this,"accountsChanged",e);break}}}async request(e){var t;if(0===this.accounts.length){if("wallet_sendCalls"===e.method)return this.sendRequestToPopup(e);throw m.unauthorized()}switch(e.method){case"eth_requestAccounts":return null===(t=this.callback)||void 0===t||t.call(this,"connect",{chainId:R(this.chain.id)}),this.accounts;case"eth_accounts":return this.accounts;case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return R(this.chain.id);case"wallet_getCapabilities":return this.storage.loadObject(ce);case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(e);case"eth_ecRecover":case"personal_sign":case"wallet_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":return this.sendRequestToPopup(e);default:if(!this.chain.rpcUrl)throw f.internal("No RPC URL set for chain");return se(e,this.chain.rpcUrl)}}async sendRequestToPopup(e){var t,n;await(null===(n=(t=this.communicator).waitForPopupLoaded)||void 0===n?void 0:n.call(t));const s=await this.sendEncryptedRequest(e),i=(await this.decryptResponseMessage(s)).result;if("error"in i)throw i.error;return i.value}async cleanup(){var e,t;this.storage.clear(),await this.keyManager.clear(),this.accounts=[],this.chain={id:null!==(t=null===(e=this.metadata.appChainIds)||void 0===e?void 0:e[0])&&void 0!==t?t:1}}async handleSwitchChainRequest(e){var t;const n=e.params;if(!n||!(null===(t=n[0])||void 0===t?void 0:t.chainId))throw f.invalidParams();const s=V(n[0].chainId);if(this.updateChain(s))return null;const i=await this.sendRequestToPopup(e);return null===i&&this.updateChain(s),i}async sendEncryptedRequest(e){const t=await this.keyManager.getSharedSecret();if(!t)throw m.unauthorized("No valid session found, try requestAccounts before other methods");const n=await G({action:e,chainId:this.chain.id},t),s=await this.createRequestMessage({encrypted:n});return this.communicator.postRequestAndWaitForResponse(s)}async createRequestMessage(e){const t=await K("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:t,content:e,timestamp:new Date}}async decryptResponseMessage(e){var t,n;const s=e.content;if("failure"in s)throw s.failure;const i=await this.keyManager.getSharedSecret();if(!i)throw m.unauthorized("Invalid session");const r=await J(s.encrypted,i),a=null===(t=r.data)||void 0===t?void 0:t.chains;if(a){const e=Object.entries(a).map((([e,t])=>({id:Number(e),rpcUrl:t})));this.storage.storeObject(oe,e),this.updateChain(this.chain.id,e)}const o=null===(n=r.data)||void 0===n?void 0:n.capabilities;return o&&this.storage.storeObject(ce,o),r}updateChain(e,t){var n;const s=null!==t&&void 0!==t?t:this.storage.loadObject(oe),i=null===s||void 0===s?void 0:s.find((t=>t.id===e));return!!i&&(i!==this.chain&&(this.chain=i,this.storage.storeObject(ae,i),null===(n=this.callback)||void 0===n||n.call(this,"chainChanged",R(i.id))),!0)}}var de=n(87009);const ue="Addresses";function he(e){return void 0!==e.errorMessage}class pe{constructor(e){this.secret=e}async encrypt(e){const t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");const n=crypto.getRandomValues(new Uint8Array(12)),s=await crypto.subtle.importKey("raw",L(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=new TextEncoder,r=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,i.encode(e)),a=r.slice(r.byteLength-16),o=r.slice(0,r.byteLength-16),c=new Uint8Array(a),l=new Uint8Array(o);return A(new Uint8Array([...n,...c,...l]))}async decrypt(e){const t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");return new Promise(((n,s)=>{!async function(){const i=await crypto.subtle.importKey("raw",L(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),r=L(e),a=r.slice(0,12),o=r.slice(12,28),c=r.slice(28),l=new Uint8Array([...c,...o]),d={name:"AES-GCM",iv:new Uint8Array(a)};try{const e=await window.crypto.subtle.decrypt(d,i,l),t=new TextDecoder;n(t.decode(e))}catch(u){s(u)}}()}))}}class fe{constructor(e,t,n){this.linkAPIUrl=e,this.sessionId=t;const s=`${t}:${n}`;this.auth=`Basic ${btoa(s)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map((e=>fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}})))).catch((e=>console.error("Unabled to mark event as failed:",e)))}async fetchUnseenEvents(){var e;const t=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(t.ok){const{events:n,error:s}=await t.json();if(s)throw new Error(`Chec