try {
  let e =
      'undefined' != typeof window
        ? window
        : 'undefined' != typeof global
          ? global
          : 'undefined' != typeof globalThis
            ? globalThis
            : 'undefined' != typeof self
              ? self
              : {},
    t = new e.Error().stack;
  t &&
    ((e._sentryDebugIds = e._sentryDebugIds || {}),
    (e._sentryDebugIds[t] = '9f5d4031-ed27-47cc-9d6e-50629c443a92'),
    (e._sentryDebugIdIdentifier = 'sentry-dbid-9f5d4031-ed27-47cc-9d6e-50629c443a92'));
} catch (e) {}
(self.webpackChunk_N_E = self.webpackChunk_N_E || []).push([
  [705],
  {
    3699: function (e, t, r) {
      Promise.resolve().then(r.bind(r, 84267)),
        Promise.resolve().then(r.bind(r, 43609)),
        Promise.resolve().then(r.bind(r, 49482)),
        Promise.resolve().then(r.t.bind(r, 23293, 23)),
        Promise.resolve().then(r.bind(r, 9009)),
        Promise.resolve().then(r.bind(r, 30726)),
        Promise.resolve().then(r.bind(r, 95955)),
        Promise.resolve().then(r.bind(r, 59586)),
        Promise.resolve().then(r.bind(r, 68843)),
        Promise.resolve().then(r.bind(r, 1017)),
        Promise.resolve().then(r.bind(r, 87859)),
        Promise.resolve().then(r.bind(r, 61837)),
        Promise.resolve().then(r.bind(r, 71338)),
        Promise.resolve().then(r.bind(r, 38662)),
        Promise.resolve().then(r.bind(r, 87251)),
        Promise.resolve().then(r.bind(r, 84125)),
        Promise.resolve().then(r.bind(r, 16903)),
        Promise.resolve().then(r.bind(r, 40408)),
        Promise.resolve().then(r.bind(r, 10827)),
        Promise.resolve().then(r.bind(r, 48634)),
        Promise.resolve().then(r.bind(r, 95919)),
        Promise.resolve().then(r.bind(r, 15862)),
        Promise.resolve().then(r.bind(r, 14978)),
        Promise.resolve().then(r.bind(r, 62763)),
        Promise.resolve().then(r.bind(r, 71324)),
        Promise.resolve().then(r.bind(r, 66436)),
        Promise.resolve().then(r.bind(r, 53777)),
        Promise.resolve().then(r.bind(r, 17395)),
        Promise.resolve().then(r.bind(r, 67414)),
        Promise.resolve().then(r.bind(r, 17722)),
        Promise.resolve().then(r.bind(r, 19991)),
        Promise.resolve().then(r.bind(r, 80841)),
        Promise.resolve().then(r.bind(r, 31369)),
        Promise.resolve().then(r.bind(r, 45667)),
        Promise.resolve().then(r.bind(r, 60706)),
        Promise.resolve().then(r.bind(r, 71463)),
        Promise.resolve().then(r.bind(r, 24537)),
        Promise.resolve().then(r.bind(r, 40673)),
        Promise.resolve().then(r.bind(r, 40756)),
        Promise.resolve().then(r.bind(r, 36866)),
        Promise.resolve().then(r.bind(r, 2383)),
        Promise.resolve().then(r.bind(r, 63122)),
        Promise.resolve().then(r.bind(r, 47810)),
        Promise.resolve().then(r.bind(r, 14223)),
        Promise.resolve().then(r.bind(r, 43228)),
        Promise.resolve().then(r.bind(r, 35510)),
        Promise.resolve().then(r.bind(r, 24637)),
        Promise.resolve().then(r.bind(r, 7900)),
        Promise.resolve().then(r.bind(r, 42898)),
        Promise.resolve().then(r.bind(r, 78336)),
        Promise.resolve().then(r.bind(r, 15722)),
        Promise.resolve().then(r.bind(r, 70357)),
        Promise.resolve().then(r.bind(r, 99314)),
        Promise.resolve().then(r.bind(r, 72033)),
        Promise.resolve().then(r.bind(r, 30105)),
        Promise.resolve().then(r.bind(r, 91708)),
        Promise.resolve().then(r.bind(r, 84365)),
        Promise.resolve().then(r.bind(r, 66279)),
        Promise.resolve().then(r.bind(r, 67721)),
        Promise.resolve().then(r.bind(r, 19333)),
        Promise.resolve().then(r.bind(r, 43328)),
        Promise.resolve().then(r.bind(r, 52048)),
        Promise.resolve().then(r.bind(r, 23570)),
        Promise.resolve().then(r.bind(r, 18001)),
        Promise.resolve().then(r.bind(r, 63586)),
        Promise.resolve().then(r.bind(r, 35891)),
        Promise.resolve().then(r.bind(r, 5901)),
        Promise.resolve().then(r.bind(r, 56291)),
        Promise.resolve().then(r.bind(r, 68676)),
        Promise.resolve().then(r.bind(r, 51631)),
        Promise.resolve().then(r.bind(r, 37968)),
        Promise.resolve().then(r.bind(r, 98042)),
        Promise.resolve().then(r.bind(r, 34882)),
        Promise.resolve().then(r.bind(r, 45184)),
        Promise.resolve().then(r.bind(r, 30262)),
        Promise.resolve().then(r.bind(r, 78519)),
        Promise.resolve().then(r.bind(r, 71320)),
        Promise.resolve().then(r.bind(r, 46050)),
        Promise.resolve().then(r.bind(r, 87861)),
        Promise.resolve().then(r.bind(r, 64738)),
        Promise.resolve().then(r.bind(r, 58961)),
        Promise.resolve().then(r.bind(r, 87326)),
        Promise.resolve().then(r.bind(r, 6662)),
        Promise.resolve().then(r.bind(r, 29887)),
        Promise.resolve().then(r.bind(r, 56689)),
        Promise.resolve().then(r.bind(r, 4222)),
        Promise.resolve().then(r.bind(r, 40388)),
        Promise.resolve().then(r.bind(r, 70591)),
        Promise.resolve().then(r.bind(r, 41136)),
        Promise.resolve().then(r.bind(r, 28638)),
        Promise.resolve().then(r.bind(r, 56702)),
        Promise.resolve().then(r.bind(r, 94337)),
        Promise.resolve().then(r.bind(r, 16690)),
        Promise.resolve().then(r.bind(r, 93141));
    },
    84267: function (e, t, r) {
      'use strict';
      r.d(t, {
        default: function () {
          return tp;
        },
      });
      var i = r(78286),
        l = r(58258),
        o = r(54655),
        a = r(51712),
        n = r(55694),
        s = r(89991),
        d = r(70064),
        c = r(4565),
        u = r(12556),
        v = r(35047),
        p = r(78017),
        m = r(16820),
        h = r(47528),
        g = (0, l.memo)((e) => {
          var t, r, a, n, d, g, y, f, b, x, Z, w, A, P, k;
          let { position: X, onClick: B } = e,
            { targetChainId: T } = (0, s.Z_)(),
            C = (0, v.getValue)(X, 'lowestRateMarket'),
            S = (0, v.getValue)(X, 'migratablePosition'),
            R = (0, l.useMemo)(() => (0, u.wk)(C.collateralAsset), [C.collateralAsset]),
            I = (0, l.useMemo)(() => (0, u.wk)(C.loanAsset), [C.loanAsset]),
            M = u.FW.getProtocol({ name: S.protocol, chainId: T }),
            q = (0, h.H)(C),
            L = (0, o.$4C)({
              chainId: T,
              collateralAddress:
                null === (t = C.collateralAsset) || void 0 === t ? void 0 : t.address,
              uniqueKey: C.uniqueKey,
            }),
            K = (0, l.useMemo)(() => {
              var e;
              return (0, m.Pi)(
                null === (e = C.state) || void 0 === e ? void 0 : e.dailyBorrowApy,
                c.safeParseNumber
              );
            }, [null === (r = C.state) || void 0 === r ? void 0 : r.dailyBorrowApy]),
            E = (0, l.useMemo)(() => {
              var e;
              return (0, m.Pi)(
                null === (e = C.state) || void 0 === e ? void 0 : e.fee,
                c.safeParseNumber
              );
            }, [null === (a = C.state) || void 0 === a ? void 0 : a.fee]),
            { collateralUsd: N, loanUsd: V } = (0, l.useMemo)(
              () => ({
                collateralUsd: null == R ? void 0 : R.toUsd(S.collateral),
                loanUsd: null == I ? void 0 : I.toUsd(S.borrow),
              }),
              [R, I, S.borrow, S.collateral]
            ),
            U = (0, l.useMemo)(() => {
              var e;
              return (0, m.Pi)(
                null === (e = C.state) || void 0 === e ? void 0 : e.dailyNetBorrowApy,
                c.safeParseNumber
              );
            }, [null === (n = C.state) || void 0 === n ? void 0 : n.dailyNetBorrowApy]);
          return (0, i.BX)(o.Zbd, {
            direction: 'column',
            gap: 'm',
            padding: { base: 'm', s: 's' },
            width: '100%',
            children: [
              (0, i.BX)(o.Kqy, {
                direction: 'row',
                gap: 'xs',
                align: 'center',
                children: [
                  (0, i.tZ)(o.Pws, {
                    collateralAssetURI:
                      null === (d = C.collateralAsset) || void 0 === d ? void 0 : d.logoURI,
                    loanAssetURI: null === (g = C.loanAsset) || void 0 === g ? void 0 : g.logoURI,
                    size: 'big',
                  }),
                  (0, i.BX)(o.Kqy, {
                    direction: 'column',
                    flex: 1,
                    gap: 'xs',
                    children: [
                      (0, i.tZ)(o.xvT.Title.XS, {
                        children: (0, o.lAJ)({
                          loanAsset: C.loanAsset,
                          collateralAsset: C.collateralAsset,
                        }),
                      }),
                      (0, i.BX)(o.xvT.Body.S.Regular, {
                        color: 'text.secondary',
                        children: [M.name, ' Borrow'],
                      }),
                    ],
                  }),
                ],
              }),
              (0, i.BX)(o.Kqy, {
                direction: 'column',
                gap: 's',
                children: [
                  (0, i.BX)(o.Kqy, {
                    wrap: 'wrap',
                    gap: 's',
                    children: [
                      (0, i.BX)(o.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        background: 'background.tertiary',
                        align: 'center',
                        gap: 'xs',
                        minWidth: '232px',
                        flex: 1,
                        height: '88px',
                        children: [
                          (0, i.tZ)(o.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: 'Collateral',
                          }),
                          (0, i.BX)(o.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            align: 'center',
                            children: [
                              (0, i.tZ)(o.qEK, {
                                src:
                                  null === (y = C.collateralAsset) || void 0 === y
                                    ? void 0
                                    : y.logoURI,
                                style: { width: 20, height: 20 },
                                rounded: !0,
                              }),
                              (0, i.tZ)(o.xvT.Body.XS.Regular, {
                                children: (0, m.sL)({
                                  price:
                                    null !== (w = null == R ? void 0 : R.price) && void 0 !== w
                                      ? w
                                      : 0n,
                                  amount: S.collateral,
                                  decimals:
                                    null !== (A = null == R ? void 0 : R.decimals) && void 0 !== A
                                      ? A
                                      : 18,
                                  withTrailingZero: !1,
                                  symbol: null == R ? void 0 : R.symbol,
                                }),
                              }),
                              (0, i.tZ)(o.Vp9, {
                                label: o.$0l.short.unit('$').default('-').digits(2).of(N, 18),
                              }),
                            ],
                          }),
                        ],
                      }),
                      (0, i.BX)(o.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        background: 'background.tertiary',
                        align: 'center',
                        gap: 'xs',
                        minWidth: '232px',
                        flex: 1,
                        height: '88px',
                        children: [
                          (0, i.tZ)(o.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: 'Loan',
                          }),
                          (0, i.BX)(o.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            align: 'center',
                            children: [
                              (0, i.tZ)(o.qEK, {
                                src:
                                  null === (f = C.loanAsset) || void 0 === f ? void 0 : f.logoURI,
                                style: { width: 20, height: 20 },
                                rounded: !0,
                              }),
                              (0, i.tZ)(o.xvT.Body.XS.Regular, {
                                children: (0, m.sL)({
                                  price: (0, c.safeParseNumber)(
                                    null !==
                                      (P =
                                        null === (b = C.loanAsset) || void 0 === b
                                          ? void 0
                                          : b.priceUsd) && void 0 !== P
                                      ? P
                                      : 0
                                  ),
                                  amount: S.borrow,
                                  decimals:
                                    null !==
                                      (k =
                                        null === (x = C.loanAsset) || void 0 === x
                                          ? void 0
                                          : x.decimals) && void 0 !== k
                                      ? k
                                      : 18,
                                  withTrailingZero: !1,
                                  symbol:
                                    null === (Z = C.loanAsset) || void 0 === Z ? void 0 : Z.symbol,
                                }),
                              }),
                              (0, i.tZ)(o.Vp9, {
                                label: o.$0l.short.unit('$').default('-').digits(2).of(V, 18),
                              }),
                            ],
                          }),
                        ],
                      }),
                    ],
                  }),
                  (0, i.BX)(o.Kqy, {
                    wrap: 'wrap',
                    gap: 's',
                    children: [
                      (0, i.BX)(o.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        background: 'background.tertiary',
                        align: 'center',
                        gap: 'xs',
                        minWidth: '232px',
                        flex: 1,
                        height: '88px',
                        children: [
                          (0, i.BX)(o.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: [M.name, ' Rate'],
                          }),
                          (0, i.tZ)(o.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            children: (0, i.tZ)(o.xvT.Body.XS.Regular, {
                              children: o.$0l.percent
                                .unit('%')
                                .default('-')
                                .digits(2)
                                .of(S.borrowApy),
                            }),
                          }),
                        ],
                      }),
                      (0, i.BX)(o.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        background: 'background.tertiary',
                        align: 'center',
                        gap: 'xs',
                        minWidth: '232px',
                        flex: 1,
                        height: '88px',
                        children: [
                          (0, i.tZ)(o.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: 'Morpho Borrow Rate',
                          }),
                          (0, i.tZ)(o.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            children: (0, i.tZ)(p.w, {
                              RewardsHoverCardProps: {
                                performanceFee: E,
                                apy: K,
                                rewards: q,
                                points: L,
                                variant: 'market',
                                netApy: U,
                              },
                              children: (0, i.tZ)(o.xvT.Body.XS.Regular, {
                                children: o.$0l.percent.unit('%').default('-').digits(2).of(U, 18),
                              }),
                            }),
                          }),
                        ],
                      }),
                    ],
                  }),
                ],
              }),
              (0, i.tZ)(o.zxk, {
                label: 'Migrate',
                size: 'big',
                onClick: B,
                'data-testid': 'borrow-migrate-button',
              }),
            ],
          });
        }),
        y = r(99971),
        f = r(82078),
        b = r(45090),
        x = r(62239),
        Z = r(9124),
        w = r(22683),
        A = r(34896),
        P = r(89805),
        k = r(75147),
        X = r(52832);
      r(89672);
      var B = r(9635),
        T = r(60145),
        C = r(34550),
        S = r(39882),
        R = (0, l.memo)((e) => {
          var t, r, a, n;
          let { protocolPosition: d, operation: c, errors: p } = e,
            { targetChainId: h } = (0, s.Z_)(),
            { migratablePosition: g, lowestRateMarket: y } = d,
            f = u.FW.getProtocol({ name: g.protocol, chainId: h }),
            b = (0, l.useMemo)(() => (0, u.wk)(y.loanAsset), [y.loanAsset]),
            x = (0, l.useMemo)(() => (0, u.wk)(y.collateralAsset), [y.collateralAsset]),
            Z = (0, l.useMemo)(
              () => o.$0l.percent.digits(2).unit('%').of(g.borrowApy),
              [g.borrowApy]
            ),
            w = (0, l.useMemo)(() => g.getLtv(), [g]),
            A = (0, l.useMemo)(
              () =>
                c.collateralAssets === g.collateral && c.loanAssets === g.borrow
                  ? 0n
                  : g.getLtv({ withdrawn: c.collateralAssets, repaid: c.loanAssets }),
              [g, c.collateralAssets, c.loanAssets]
            ),
            P = (0, l.useMemo)(() => !!w && (0, u.M4)(w, g.lltv), [w, g.lltv]);
          return (0, i.BX)(o.soA.Root, {
            width: '100%',
            height: '304px',
            maxWidth: { s: '100%', base: '394px' },
            children: [
              (0, i.BX)(o.soA.Header, {
                children: [
                  (0, i.tZ)(o.qEK, { size: 'large', src: f.imageSrc }),
                  (0, i.tZ)(o.Kqy, {
                    direction: 'column',
                    gap: 'xs',
                    children: (0, i.tZ)(o.xvT.Title.XS, { children: f.name }),
                  }),
                ],
              }),
              (0, i.BX)(o.soA.List, {
                children: [
                  (0, i.tZ)(o.soA.ListItem, {
                    warning: null == p ? void 0 : p.collateralError,
                    label: 'Collateral ('.concat(
                      (0, v.formatLongString)(
                        null !== (r = null == x ? void 0 : x.symbol) && void 0 !== r ? r : '',
                        15
                      ),
                      ')'
                    ),
                    value: (0, i.tZ)(o.soA.ValueChange, {
                      initialProps: { value: g.collateral },
                      finalProps: { value: g.collateral - c.collateralAssets },
                      formatter: (e) =>
                        x
                          ? (0, m.sL)({
                              price: x.price,
                              amount: e,
                              decimals: x.decimals,
                              withTrailingZero: !1,
                            })
                          : void 0,
                    }),
                  }),
                  (0, i.tZ)(o.soA.ListItem, {
                    warning: null == p ? void 0 : p.loanError,
                    label: 'Loan ('.concat(
                      (0, v.formatLongString)(
                        null !== (a = null == b ? void 0 : b.symbol) && void 0 !== a ? a : '',
                        15
                      ),
                      ')'
                    ),
                    value: (0, i.tZ)(o.soA.ValueChange, {
                      initialProps: { value: g.borrow },
                      finalProps: { value: g.borrow - c.loanAssets },
                      formatter: (e) =>
                        b
                          ? (0, m.sL)({
                              price: b.price,
                              amount: e,
                              decimals: b.decimals,
                              withTrailingZero: !1,
                            })
                          : void 0,
                    }),
                  }),
                  (0, i.tZ)(o.soA.ListItem, {
                    warning: null == p ? void 0 : p.ltvError,
                    label: 'LTV / Liq. LTV',
                    value: (0, i.BX)(o.Kqy, {
                      direction: 'row',
                      align: 'center',
                      gap: '2px',
                      children: [
                        (0, i.tZ)(o.soA.ValueChange, {
                          initialProps: {
                            value: w,
                            typographyProps: { color: P ? 'text.interactive.error' : void 0 },
                          },
                          finalProps: {
                            value: A,
                            typographyProps: {
                              color:
                                null !==
                                  (n =
                                    null == p
                                      ? void 0
                                      : null === (t = p.ltvError) || void 0 === t
                                        ? void 0
                                        : t.color) && void 0 !== n
                                  ? n
                                  : 'text.body',
                            },
                          },
                          formatter: (e) => o.$0l.percent.unit('%').digits(2).max(1).of(e, 18),
                        }),
                        (0, i.tZ)(o.xvT.Body.XS.Regular, {
                          display: 'flex',
                          alignItems: 'center',
                          lineHeight: 'normal',
                          gap: '2px',
                          children: (0, i.BX)(o.xvT.Inherit, {
                            children: [' / ', o.$0l.percent.unit('%').digits(2).of(g.lltv, 18)],
                          }),
                        }),
                      ],
                    }),
                  }),
                  (0, i.tZ)(o.soA.ListItem, {
                    label: 'Rate',
                    value: (0, i.tZ)(o.soA.Value, { value: Z }),
                  }),
                ],
              }),
            ],
          });
        });
      let I = (e) => {
        var t, r, n, c, p;
        let { position: m, initialOperation: g } = e,
          M = (0, o.CPt)(),
          { bundlerConfiguration: q } = (0, w.N)(),
          { lowestRateMarket: L, compatibleMarkets: K } = m,
          {
            simulationError: E,
            isPending: N,
            blockError: V,
            config: { addToSimulationState: U },
          } = (0, w.N)(),
          { setActiveBundle: W } = (0, k.H)(),
          { toggleDialog: D } = (0, o.DAv)(),
          { account: O, targetChainId: _ } = (0, s.Z_)(),
          [H, F] = (0, l.useState)(!1),
          [j, z] = (0, l.useState)(
            null !==
              (p =
                null !== (c = null == g ? void 0 : g.marketId) && void 0 !== c
                  ? c
                  : null === (t = K[0]) || void 0 === t
                    ? void 0
                    : t.uniqueKey) && void 0 !== p
              ? p
              : L.uniqueKey
          ),
          $ = (0, l.useMemo)(() => K.find((e) => e.uniqueKey === j), [K, j]),
          G = (0, S.t)({ market: $, withSharedLiquidity: !0 }),
          J = (0, l.useMemo)(() => (0, u.wk)(null == $ ? void 0 : $.loanAsset), [$]),
          Y = (0, l.useMemo)(() => (0, u.wk)(null == $ ? void 0 : $.collateralAsset), [$]),
          {
            localOperation: Q,
            collateralAssets: ee,
            loanAssets: et,
            maxCollateral: er,
            maxLoan: ei,
            isMaxCollateral: el,
            isMaxLoan: eo,
            isLoading: ea,
            bundle: en,
            initialState: es,
            protocol: ed,
            setInputCollateralAmount: ec,
            setInputLoanAmount: eu,
            setIsMaxCollateral: ev,
            setIsMaxLoan: ep,
          } = (0, B.M)({ marketId: j, position: m, initialOperation: g }),
          [em] = (0, P._)(es.data, Q, q, !0),
          [eh, eg] = null != em ? em : [],
          ey = (0, T.K)({
            initialState: eh,
            finalState: eg,
            operation: Q,
            marketId: j,
            position: m,
            protocol: ed,
          }),
          ef = (0, X.Z)(ey.errors.message, O.isWrongChain),
          eb = (0, C.Z)(
            'migration',
            0n === ee || 0n === et,
            !0,
            !0,
            ey.errors.message,
            [],
            E,
            V,
            N,
            O.isWrongChain,
            !1
          ),
          ex = (0, l.useMemo)(
            () =>
              (null == $ ? void 0 : $.oracleAddress)
                ? { address: $.oracleAddress, ...$.oracleFeed }
                : void 0,
            [$]
          ),
          eZ = (0, h.H)($),
          ew = (0, l.useMemo)(
            () => (V && N) || ey.isBlocked || !!E || !(0, A.H)(Q) || O.isWrongChain,
            [V, N, ey.isBlocked, E, Q, O.isWrongChain]
          ),
          eA = (0, l.useCallback)(() => {
            D(!1);
          }, [D]),
          eP = (0, l.useCallback)(() => {
            D(
              (0, i.tZ)(y.sG, {
                operations: [Q],
                headerActionSlot: (0, i.tZ)(o.zxk, {
                  variant: 'ghost',
                  iconRight: 'EditPlain20',
                  label: 'Edit migration',
                  onClick: () => {
                    D(
                      (0, i.tZ)(d.Z, {
                        fallback: (0, i.tZ)(a.c, {}),
                        children: (0, i.tZ)(I, {
                          'data-testid': 'migration-dialog',
                          position: m,
                          initialOperation: Q,
                        }),
                      }),
                      { maxWidth: M ? void 0 : '900px', fullSize: M }
                    );
                  },
                }),
                onConfirm: () => {
                  (null == en ? void 0 : en.actions) &&
                    (W(en, [Q]), D((0, i.tZ)(f.h, {}), { closable: !1 }));
                },
              })
            );
          }, [Q, en, D, W, M, m]),
          ek = (0, l.useCallback)(
            (e) => {
              z(e), F(!1), ec(0n), eu(0n), ev(!1), ep(!1);
            },
            [z, F, ec, eu, ev, ep]
          );
        return (
          (0, l.useEffect)(() => {
            U(G);
          }, [G, U]),
          (0, i.tZ)(x.Do, {
            title: 'Migrate Position',
            size: 'small',
            topSlot: (0, i.tZ)(o.Kqy, {
              direction: 'row',
              width: 'fit-content',
              align: 'center',
              children: (0, i.tZ)(Z.K, {
                side: 'bottom',
                align: 'start',
                isOpen: H,
                markets: null != K ? K : [],
                selectedMarket: $,
                isLoading: ea,
                onOpenChange: F,
                onSelect: ek,
                buttonLabel: 'Select Morpho Market',
              }),
            }),
            inputSlots: [
              Y &&
                (0, i.tZ)(
                  o.TGk,
                  {
                    fullWidth: !0,
                    token: Y,
                    amount: ee,
                    onChange: ec,
                    header: 'Collateral to migrate',
                    maxValue: null == er ? void 0 : er.value,
                    loading: ea,
                    onMaxClick: ev,
                    isMax: el,
                    disabled: ea,
                  },
                  null == Y ? void 0 : Y.address
                ),
              J &&
                (0, i.tZ)(
                  o.TGk,
                  {
                    fullWidth: !0,
                    token: J,
                    amount: et,
                    onChange: eu,
                    header: 'Loan to migrate',
                    maxValue: ei,
                    loading: ea,
                    onMaxClick: ep,
                    isMax: eo,
                    disabled: ea || (!et && !ee),
                  },
                  null == J ? void 0 : J.address
                ),
            ],
            initialPositionSlot: (0, i.tZ)(R, {
              protocolPosition: m,
              operation: Q,
              errors: {
                loanError: ey.errors.borrowError,
                collateralError: ey.errors.collateralError,
                ltvError: ey.errors.migratablePositionLtvError,
              },
            }),
            finalPositionSlot: (0, i.tZ)(b.F, {
              chainId: _,
              market: {
                uniqueKey: j,
                collateralToken: Y,
                loanToken: J,
                oracle: ex,
                warnings: null == $ ? void 0 : $.warnings,
                rewards: eZ,
                dailyBorrowApy:
                  null == $
                    ? void 0
                    : null === (r = $.state) || void 0 === r
                      ? void 0
                      : r.dailyBorrowApy,
                dailyNetBorrowApy:
                  null == $
                    ? void 0
                    : null === (n = $.state) || void 0 === n
                      ? void 0
                      : n.dailyNetBorrowApy,
              },
              state: ey,
              errors: { liquidityError: ey.errors.liquidityError, ltvError: ey.errors.ltvError },
            }),
            actionSlot: (0, i.tZ)(o.ua7, {
              content: ef,
              disabled: !ef,
              children: (0, i.tZ)(o.zxk, {
                size: 'big',
                variant: ew ? 'secondary' : 'primary',
                label: eb,
                disabled: ew || !(0, v.isDefined)(ey.initialMarketData),
                onClick: eP,
                shortenByWidth: 300,
                loading: ea,
                'data-testid': 'finalize-button',
              }),
            }),
            onClose: eA,
          })
        );
      };
      var M = (0, l.memo)(I),
        q = r(95284),
        L = r(88),
        K = r(38819);
      let E = (0, K.Z)('div', { target: 'evxx7d0' })(
        'display:grid;grid-template-columns:repeat(2,1fr);gap:',
        (e) => {
          let { theme: t } = e;
          return t.spacing.m;
        },
        ';',
        (e) => {
          let { theme: t } = e;
          return t.breakpoints.containerDown('content-s');
        },
        '{grid-template-columns:repeat(1,1fr);}'
      );
      var N = r(31040),
        V = r(77762),
        U = r(59528),
        W = r(50488),
        D = r(60174),
        O = r(25205),
        _ = r(98255),
        H = r(6925),
        F = r(9454),
        j = r(2547),
        z = r(50256),
        $ = 'Collapsible',
        [G, J] = (0, V.b)($),
        [Y, Q] = G($),
        ee = l.forwardRef((e, t) => {
          let {
              __scopeCollapsible: r,
              open: i,
              defaultOpen: o,
              disabled: a,
              onOpenChange: n,
              ...s
            } = e,
            [d, c] = (0, O.T)({ prop: i, defaultProp: null != o && o, onChange: n, caller: $ });
          return (0, z.jsx)(Y, {
            scope: r,
            disabled: a,
            contentId: (0, j.M)(),
            open: d,
            onOpenToggle: l.useCallback(() => c((e) => !e), [c]),
            children: (0, z.jsx)(_.WV.div, {
              'data-state': ea(d),
              'data-disabled': a ? '' : void 0,
              ...s,
              ref: t,
            }),
          });
        });
      ee.displayName = $;
      var et = 'CollapsibleTrigger',
        er = l.forwardRef((e, t) => {
          let { __scopeCollapsible: r, ...i } = e,
            l = Q(et, r);
          return (0, z.jsx)(_.WV.button, {
            type: 'button',
            'aria-controls': l.contentId,
            'aria-expanded': l.open || !1,
            'data-state': ea(l.open),
            'data-disabled': l.disabled ? '' : void 0,
            disabled: l.disabled,
            ...i,
            ref: t,
            onClick: (0, D.M)(e.onClick, l.onOpenToggle),
          });
        });
      er.displayName = et;
      var ei = 'CollapsibleContent',
        el = l.forwardRef((e, t) => {
          let { forceMount: r, ...i } = e,
            l = Q(ei, e.__scopeCollapsible);
          return (0, z.jsx)(F.z, {
            present: r || l.open,
            children: (e) => {
              let { present: r } = e;
              return (0, z.jsx)(eo, { ...i, ref: t, present: r });
            },
          });
        });
      el.displayName = ei;
      var eo = l.forwardRef((e, t) => {
        let { __scopeCollapsible: r, present: i, children: o, ...a } = e,
          n = Q(ei, r),
          [s, d] = l.useState(i),
          c = l.useRef(null),
          u = (0, W.e)(t, c),
          v = l.useRef(0),
          p = v.current,
          m = l.useRef(0),
          h = m.current,
          g = n.open || s,
          y = l.useRef(g),
          f = l.useRef(void 0);
        return (
          l.useEffect(() => {
            let e = requestAnimationFrame(() => (y.current = !1));
            return () => cancelAnimationFrame(e);
          }, []),
          (0, H.b)(() => {
            let e = c.current;
            if (e) {
              (f.current = f.current || {
                transitionDuration: e.style.transitionDuration,
                animationName: e.style.animationName,
              }),
                (e.style.transitionDuration = '0s'),
                (e.style.animationName = 'none');
              let t = e.getBoundingClientRect();
              (v.current = t.height),
                (m.current = t.width),
                y.current ||
                  ((e.style.transitionDuration = f.current.transitionDuration),
                  (e.style.animationName = f.current.animationName)),
                d(i);
            }
          }, [n.open, i]),
          (0, z.jsx)(_.WV.div, {
            'data-state': ea(n.open),
            'data-disabled': n.disabled ? '' : void 0,
            id: n.contentId,
            hidden: !g,
            ...a,
            ref: u,
            style: {
              '--radix-collapsible-content-height': p ? ''.concat(p, 'px') : void 0,
              '--radix-collapsible-content-width': h ? ''.concat(h, 'px') : void 0,
              ...e.style,
            },
            children: g && o,
          })
        );
      });
      function ea(e) {
        return e ? 'open' : 'closed';
      }
      var en = r(79395),
        es = 'Accordion',
        ed = ['Home', 'End', 'ArrowDown', 'ArrowUp', 'ArrowLeft', 'ArrowRight'],
        [ec, eu, ev] = (0, U.B)(es),
        [ep, em] = (0, V.b)(es, [ev, J]),
        eh = J(),
        eg = l.forwardRef((e, t) => {
          let { type: r, ...i } = e;
          return (0, z.jsx)(ec.Provider, {
            scope: e.__scopeAccordion,
            children:
              'multiple' === r
                ? (0, z.jsx)(ew, { ...i, ref: t })
                : (0, z.jsx)(eZ, { ...i, ref: t }),
          });
        });
      eg.displayName = es;
      var [ey, ef] = ep(es),
        [eb, ex] = ep(es, { collapsible: !1 }),
        eZ = l.forwardRef((e, t) => {
          let {
              value: r,
              defaultValue: i,
              onValueChange: o = () => {},
              collapsible: a = !1,
              ...n
            } = e,
            [s, d] = (0, O.T)({
              prop: r,
              defaultProp: null != i ? i : '',
              onChange: o,
              caller: es,
            });
          return (0, z.jsx)(ey, {
            scope: e.__scopeAccordion,
            value: l.useMemo(() => (s ? [s] : []), [s]),
            onItemOpen: d,
            onItemClose: l.useCallback(() => a && d(''), [a, d]),
            children: (0, z.jsx)(eb, {
              scope: e.__scopeAccordion,
              collapsible: a,
              children: (0, z.jsx)(ek, { ...n, ref: t }),
            }),
          });
        }),
        ew = l.forwardRef((e, t) => {
          let { value: r, defaultValue: i, onValueChange: o = () => {}, ...a } = e,
            [n, s] = (0, O.T)({
              prop: r,
              defaultProp: null != i ? i : [],
              onChange: o,
              caller: es,
            }),
            d = l.useCallback(
              (e) =>
                s(function () {
                  let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                  return [...t, e];
                }),
              [s]
            ),
            c = l.useCallback(
              (e) =>
                s(function () {
                  let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                  return t.filter((t) => t !== e);
                }),
              [s]
            );
          return (0, z.jsx)(ey, {
            scope: e.__scopeAccordion,
            value: n,
            onItemOpen: d,
            onItemClose: c,
            children: (0, z.jsx)(eb, {
              scope: e.__scopeAccordion,
              collapsible: !0,
              children: (0, z.jsx)(ek, { ...a, ref: t }),
            }),
          });
        }),
        [eA, eP] = ep(es),
        ek = l.forwardRef((e, t) => {
          let { __scopeAccordion: r, disabled: i, dir: o, orientation: a = 'vertical', ...n } = e,
            s = l.useRef(null),
            d = (0, W.e)(s, t),
            c = eu(r),
            u = 'ltr' === (0, en.gm)(o),
            v = (0, D.M)(e.onKeyDown, (e) => {
              var t;
              if (!ed.includes(e.key)) return;
              let r = e.target,
                i = c().filter((e) => {
                  var t;
                  return !(null === (t = e.ref.current) || void 0 === t ? void 0 : t.disabled);
                }),
                l = i.findIndex((e) => e.ref.current === r),
                o = i.length;
              if (-1 === l) return;
              e.preventDefault();
              let n = l,
                s = o - 1,
                d = () => {
                  (n = l + 1) > s && (n = 0);
                },
                v = () => {
                  (n = l - 1) < 0 && (n = s);
                };
              switch (e.key) {
                case 'Home':
                  n = 0;
                  break;
                case 'End':
                  n = s;
                  break;
                case 'ArrowRight':
                  'horizontal' === a && (u ? d() : v());
                  break;
                case 'ArrowDown':
                  'vertical' === a && d();
                  break;
                case 'ArrowLeft':
                  'horizontal' === a && (u ? v() : d());
                  break;
                case 'ArrowUp':
                  'vertical' === a && v();
              }
              null === (t = i[n % o].ref.current) || void 0 === t || t.focus();
            });
          return (0, z.jsx)(eA, {
            scope: r,
            disabled: i,
            direction: o,
            orientation: a,
            children: (0, z.jsx)(ec.Slot, {
              scope: r,
              children: (0, z.jsx)(_.WV.div, {
                ...n,
                'data-orientation': a,
                ref: d,
                onKeyDown: i ? void 0 : v,
              }),
            }),
          });
        }),
        eX = 'AccordionItem',
        [eB, eT] = ep(eX),
        eC = l.forwardRef((e, t) => {
          let { __scopeAccordion: r, value: i, ...l } = e,
            o = eP(eX, r),
            a = ef(eX, r),
            n = eh(r),
            s = (0, j.M)(),
            d = (i && a.value.includes(i)) || !1,
            c = o.disabled || e.disabled;
          return (0, z.jsx)(eB, {
            scope: r,
            open: d,
            disabled: c,
            triggerId: s,
            children: (0, z.jsx)(ee, {
              'data-orientation': o.orientation,
              'data-state': eK(d),
              ...n,
              ...l,
              ref: t,
              disabled: c,
              open: d,
              onOpenChange: (e) => {
                e ? a.onItemOpen(i) : a.onItemClose(i);
              },
            }),
          });
        });
      eC.displayName = eX;
      var eS = 'AccordionHeader',
        eR = l.forwardRef((e, t) => {
          let { __scopeAccordion: r, ...i } = e,
            l = eP(es, r),
            o = eT(eS, r);
          return (0, z.jsx)(_.WV.h3, {
            'data-orientation': l.orientation,
            'data-state': eK(o.open),
            'data-disabled': o.disabled ? '' : void 0,
            ...i,
            ref: t,
          });
        });
      eR.displayName = eS;
      var eI = 'AccordionTrigger',
        eM = l.forwardRef((e, t) => {
          let { __scopeAccordion: r, ...i } = e,
            l = eP(es, r),
            o = eT(eI, r),
            a = ex(eI, r),
            n = eh(r);
          return (0, z.jsx)(ec.ItemSlot, {
            scope: r,
            children: (0, z.jsx)(er, {
              'aria-disabled': (o.open && !a.collapsible) || void 0,
              'data-orientation': l.orientation,
              id: o.triggerId,
              ...n,
              ...i,
              ref: t,
            }),
          });
        });
      eM.displayName = eI;
      var eq = 'AccordionContent',
        eL = l.forwardRef((e, t) => {
          let { __scopeAccordion: r, ...i } = e,
            l = eP(es, r),
            o = eT(eq, r),
            a = eh(r);
          return (0, z.jsx)(el, {
            role: 'region',
            'aria-labelledby': o.triggerId,
            'data-orientation': l.orientation,
            ...a,
            ...i,
            ref: t,
            style: {
              '--radix-accordion-content-height': 'var(--radix-collapsible-content-height)',
              '--radix-accordion-content-width': 'var(--radix-collapsible-content-width)',
              ...e.style,
            },
          });
        });
      function eK(e) {
        return e ? 'open' : 'closed';
      }
      eL.displayName = eq;
      var eE = r(72280),
        eN = r(23567);
      let eV = (0, eN.F4)(
          'from{height:0;opacity:0;}to{height:var(--radix-accordion-content-height);opacity:1;}'
        ),
        eU = (0, eN.F4)(
          'from{height:var(--radix-accordion-content-height);opacity:1;}to{height:0;opacity:0;}'
        ),
        eW = (0, K.Z)(eR, { target: 'e10apxyx0' })('all:unset;display:flex;'),
        eD = (0, K.Z)(eM, { target: 'e10apxyx1' })(
          'all:unset;width:100%;display:flex;justify-content:space-between;align-items:center;cursor:pointer;'
        ),
        eO = (0, K.Z)(eL, { target: 'e10apxyx2' })(
          'overflow:hidden;&[data-state="open"]{animation:',
          eV,
          ' 300ms ease-out forwards;padding-bottom:62px;}&[data-state="closed"]{animation:',
          eU,
          ' 300ms ease-in forwards;}'
        ),
        e_ = (0, K.Z)('div', { shouldForwardProp: (e) => 'open' !== e, target: 'e10apxyx3' })(
          'margin-left:16px;color:',
          (e) => {
            let { theme: t } = e;
            return t.colors.text.secondary;
          },
          ';transition:transform 300ms ease;transform:',
          (e) => {
            let { open: t } = e;
            return t ? 'rotate(0deg)' : 'rotate(-90deg)';
          },
          ';'
        ),
        eH = (0, l.forwardRef)((e, t) => {
          let { children: r, isOpen: o, ...a } = e,
            [n, s] = (0, l.useState)(!1);
          return (0, i.tZ)(eW, {
            children: (0, i.BX)(eD, {
              ...a,
              ref: t,
              'data-testid': 'protocol-accordion',
              onClick: () => s(!n),
              children: [
                r,
                (0, i.tZ)(e_, { open: n, children: (0, i.tZ)(eE.v4q, { width: 24, height: 24 }) }),
              ],
            }),
          });
        });
      eH.displayName = 'AccordionTrigger';
      let eF = (0, l.forwardRef)((e, t) => {
        let { children: r, ...l } = e;
        return (0, i.tZ)(eO, { ...l, ref: t, children: r });
      });
      eF.displayName = 'AccordionContent';
      var ej = (0, l.memo)((e) => {
          let { migratableProtocol: t, positions: r, children: a } = e,
            { targetChainId: n } = (0, s.Z_)(),
            d = (0, o.dD4)(),
            c = u.FW.getProtocol({ chainId: n, name: t }),
            v = (0, l.useMemo)(() => {
              let e = 0n;
              return (
                r.forEach((t) => {
                  var r, i;
                  'compatibleVaults' in t &&
                    (e += null !== (r = t.maxUsdValue) && void 0 !== r ? r : 0n),
                    'compatibleMarkets' in t &&
                      (e += null !== (i = t.equityUsd) && void 0 !== i ? i : 0n);
                }),
                e
              );
            }, [r]);
          return 0 === r.length
            ? null
            : (0, i.tZ)(eg, {
                type: 'single',
                collapsible: !0,
                children: (0, i.BX)(eC, {
                  value: c.name,
                  children: [
                    (0, i.tZ)(eH, {
                      children: (0, i.BX)(o.Kqy, {
                        direction: 'row',
                        justify: 'space-between',
                        align: 'center',
                        width: '100%',
                        height: 120,
                        children: [
                          (0, i.BX)(o.Kqy, {
                            direction: 'row',
                            gap: 'xs',
                            align: 'center',
                            children: [
                              (0, i.tZ)(o.qEK, {
                                src: c.imageSrc,
                                style: { width: 36, height: 36 },
                              }),
                              (0, i.tZ)(o.xvT.Title.XS, { children: c.name }),
                            ],
                          }),
                          !d &&
                            (0, i.BX)(o.Kqy, {
                              direction: 'row',
                              gap: 'xs',
                              align: 'center',
                              children: [
                                (0, i.BX)(o.xvT.Body.L.Regular, {
                                  color: 'text.secondary',
                                  children: [r.length, ' ', (0, o._6H)(r.length, 'position')],
                                }),
                                (0, i.tZ)(o.xvT.Body.L.Regular, {
                                  color: 'text.tertiary',
                                  children: ' / ',
                                }),
                                (0, i.tZ)(o.xvT.Body.L.Regular, {
                                  color: 'text.secondary',
                                  children: o.$0l.short
                                    .unit('$')
                                    .digits(2)
                                    .trailingZero(!1)
                                    .of(v, 18),
                                }),
                              ],
                            }),
                        ],
                      }),
                    }),
                    (0, i.tZ)(eF, { children: a }, c.name),
                    (0, i.tZ)(o.Z0O, {}),
                  ],
                }),
              });
        }),
        ez = r(83897),
        e$ = (0, l.memo)((e) => {
          var t, r, a, n, d;
          let { position: h, onClick: g } = e,
            { targetChainId: y } = (0, s.Z_)(),
            f = (0, v.getValue)(h, 'mostYieldingVault'),
            b = (0, v.getValue)(h, 'migratablePosition'),
            x = u.FW.getProtocol({ name: b.protocol, chainId: y }),
            Z = (0, ez.M)(f.address, f.state, f.asset),
            w = (0, o.vmq)({
              chainId: y,
              vaultAddress: f.address,
              allocation: null === (t = f.state) || void 0 === t ? void 0 : t.allocation,
            }),
            A = (0, l.useMemo)(() => {
              var e;
              return (null === (e = f.state) || void 0 === e ? void 0 : e.dailyApy)
                ? (0, c.safeParseNumber)(f.state.dailyApy)
                : void 0;
            }, [null === (r = f.state) || void 0 === r ? void 0 : r.dailyApy]),
            P = (0, l.useMemo)(() => {
              var e;
              return (null === (e = f.state) || void 0 === e ? void 0 : e.fee)
                ? (0, c.safeParseNumber)(f.state.fee)
                : void 0;
            }, [null === (a = f.state) || void 0 === a ? void 0 : a.fee]);
          return (0, i.BX)(o.Zbd, {
            direction: 'column',
            gap: 'm',
            padding: { base: 'm', s: 's' },
            width: '100%',
            children: [
              (0, i.BX)(o.Kqy, {
                direction: 'row',
                gap: 'xs',
                align: 'center',
                children: [
                  (0, i.tZ)(o.qEK, { src: f.asset.logoURI, size: 'big', rounded: !0 }),
                  (0, i.BX)(o.Kqy, {
                    direction: 'column',
                    flex: 1,
                    gap: 'xs',
                    children: [
                      (0, i.tZ)(o.xvT.Title.XS, { children: f.asset.symbol }),
                      (0, i.BX)(o.xvT.Body.S.Regular, {
                        color: 'text.secondary',
                        children: [x.name, ' Supply'],
                      }),
                    ],
                  }),
                ],
              }),
              (0, i.BX)(o.Kqy, {
                direction: 'column',
                gap: 's',
                children: [
                  (0, i.BX)(o.Kqy, {
                    wrap: 'wrap',
                    gap: 's',
                    children: [
                      (0, i.BX)(o.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        background: 'background.tertiary',
                        align: 'center',
                        gap: 'xs',
                        minWidth: '232px',
                        flex: 1,
                        height: '88px',
                        children: [
                          (0, i.tZ)(o.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: 'Supply',
                          }),
                          (0, i.BX)(o.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            align: 'center',
                            children: [
                              (0, i.tZ)(o.qEK, {
                                src: f.asset.logoURI,
                                style: { width: 20, height: 20 },
                                rounded: !0,
                              }),
                              (0, i.tZ)(o.xvT.Body.XS.Regular, {
                                children: (0, m.sL)({
                                  price: (0, c.safeParseNumber)(
                                    null !== (d = f.asset.priceUsd) && void 0 !== d ? d : 0
                                  ),
                                  amount: b.max.value,
                                  decimals: f.asset.decimals,
                                  withTrailingZero: !1,
                                  symbol: f.asset.symbol,
                                }),
                              }),
                              (0, i.tZ)(o.Vp9, {
                                label: o.$0l.short
                                  .unit('$')
                                  .readable()
                                  .default('-')
                                  .digits(2)
                                  .of(h.maxUsdValue, 18),
                              }),
                            ],
                          }),
                        ],
                      }),
                      (0, i.BX)(o.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        align: 'center',
                        gap: 'xs',
                        background: 'background.tertiary',
                        flex: 1,
                        height: '88px',
                        minWidth: '232px',
                        children: [
                          (0, i.BX)(o.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: [x.name, ' Supply APY'],
                          }),
                          (0, i.tZ)(o.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            children: (0, i.tZ)(o.xvT.Body.XS.Regular, {
                              children: o.$0l.percent
                                .unit('%')
                                .readable()
                                .default('-')
                                .digits(2)
                                .of(b.supplyApy),
                            }),
                          }),
                        ],
                      }),
                    ],
                  }),
                  (0, i.BX)(o.Zbd, {
                    padding: 's',
                    height: '88px',
                    direction: 'column',
                    justify: 'center',
                    align: 'center',
                    gap: 'xs',
                    background: 'background.tertiary',
                    flex: 1,
                    children: [
                      (0, i.tZ)(o.xvT.Body.XXS.Regular, {
                        color: 'text.secondary',
                        children: 'Morpho Supply APY',
                      }),
                      (0, i.BX)(o.Kqy, {
                        direction: 'row',
                        gap: 'xxs',
                        children: [
                          (0, i.BX)(o.xvT.Body.XS.Regular, {
                            children: [
                              'Up to',
                              ' ',
                              o.$0l.percent
                                .unit('%')
                                .readable()
                                .default('-')
                                .digits(2)
                                .of(
                                  null === (n = f.state) || void 0 === n ? void 0 : n.dailyNetApy
                                ),
                            ],
                          }),
                          (0, i.tZ)(p.w, {
                            RewardsHoverCardProps: {
                              performanceFee: P,
                              apy: A,
                              rewards: Z,
                              points: w,
                              variant: 'vault',
                            },
                          }),
                        ],
                      }),
                    ],
                  }),
                ],
              }),
              (0, i.tZ)(o.zxk, {
                size: 'big',
                onClick: g,
                'data-testid': 'supply-migrate-button',
                children: 'Migrate',
              }),
            ],
          });
        }),
        eG = r(40252),
        eJ = r(73057),
        eY = r(12472),
        eQ = (0, l.memo)((e) => {
          var t, r, a, n, d, c, v, p, h;
          let { operation: g, localSimulationResult: y, vault: f, loading: b } = e,
            { targetChainId: x, account: Z } = (0, s.Z_)(),
            w = (0, l.useMemo)(
              () => (0, u.wk)(null == f ? void 0 : f.asset),
              [null == f ? void 0 : f.asset]
            ),
            A = (0, ez.M)(
              g.vaultAddress,
              null == f ? void 0 : f.state,
              null == f ? void 0 : f.asset
            ),
            P = (0, o.vmq)({
              chainId: x,
              vaultAddress: g.vaultAddress,
              allocation:
                null == f ? void 0 : null === (t = f.state) || void 0 === t ? void 0 : t.allocation,
            }),
            { initialData: k } = (0, eJ.Z)(Z.address, y, g.vaultAddress, w),
            X = (0, l.useMemo)(() => {
              var e;
              if (!b) return null !== (e = k.position) && void 0 !== e ? e : 0n;
            }, [k.position, b]),
            B = (0, l.useMemo)(() => {
              var e;
              if (!b) return (null !== (e = k.position) && void 0 !== e ? e : 0n) + g.assets;
            }, [k.position, g.assets, b]);
          return f && null != g.assets && w
            ? (0, i.tZ)(eY.Z, {
                vault: {
                  rewards: A,
                  points: P,
                  allocation:
                    null !== (v = null === (r = f.state) || void 0 === r ? void 0 : r.allocation) &&
                    void 0 !== v
                      ? v
                      : [],
                  address: f.address,
                  name: f.name,
                  dailyApy: null === (a = f.state) || void 0 === a ? void 0 : a.dailyApy,
                  dailyNetApy: null === (n = f.state) || void 0 === n ? void 0 : n.dailyNetApy,
                  fee: null === (d = f.state) || void 0 === d ? void 0 : d.fee,
                  curators:
                    null !==
                      (p = null === (c = f.metadata) || void 0 === c ? void 0 : c.curators) &&
                    void 0 !== p
                      ? p
                      : [],
                  warnings: null !== (h = f.warnings) && void 0 !== h ? h : [],
                  asset: w,
                },
                initialPosition: X,
                finalPosition: B,
              })
            : (0, i.tZ)(o.SKT, {
                height: '282px',
                text: 'Cannot display interaction with vault '.concat((0, m.Tg)(g.vaultAddress)),
              });
        }),
        e0 = r(82803),
        e2 = r(4205);
      let e1 = (e) => {
        let { vaultAddress: t, position: r } = e,
          {
            operation: i,
            index: o,
            isNew: a,
            error: n,
          } = (0, l.useMemo)(
            () => ({
              isNew: !0,
              index: 0,
              operation: {
                id: crypto.randomUUID(),
                type: e0.H.InterfaceOperationType.migrateSupply,
                vaultAddress: t,
                assets: 0n,
                shares: 0n,
                position: r,
                options: { isMax: [], disabledPeripheralTokens: new Set() },
              },
              error: void 0,
            }),
            [t, r]
          ),
          s = (0, e2.f)(o),
          d = (0, e2.f)(o + 1);
        return { operation: i, index: o, isNew: a, error: n, initialState: s, finalState: d };
      };
      var e5 = r(13191),
        e8 = r(54775),
        e3 = r(76631);
      let e4 = (e) => {
        var t, r, i, a;
        let { vaultAddress: n, position: d, initialOperation: c } = e,
          { account: p, targetChainId: m } = (0, s.Z_)(),
          {
            operation: h,
            initialState: g,
            finalState: y,
            isNew: f,
          } = e1({ vaultAddress: n, position: d }),
          [b, x] = (0, l.useState)(
            null !== (t = null == c ? void 0 : c.assets) && void 0 !== t ? t : 0n
          ),
          [Z, w] = (0, l.useState)(
            null !== (r = null == c ? void 0 : c.shares) && void 0 !== r ? r : 0n
          ),
          [A, P] = (0, l.useState)(
            null !==
              (a =
                null !==
                  (i =
                    null == c
                      ? void 0
                      : c.options.isMax.includes(e0.H.InterfaceOperationType.migrateSupply)) &&
                void 0 !== i
                  ? i
                  : h.options.isMax.includes(e0.H.InterfaceOperationType.migrateSupply)) &&
              void 0 !== a &&
              a
          ),
          k = (0, l.useMemo)(
            () => ({
              type: e0.H.InterfaceOperationType.migrateSupply,
              position: d,
              vaultAddress: n,
              assets: b,
              shares: Z,
              id: h.id,
              options: { isMax: [e0.H.InterfaceOperationType.migrateSupply] },
            }),
            [b, h.id, Z, n, d]
          ),
          X = (0, l.useMemo)(() => (0, u.wk)(null == d ? void 0 : d.mostYieldingVault.asset), [d]),
          B = (0, l.useMemo)(() => {
            if (d) return u.FW.getProtocol({ name: d.migratablePosition.protocol, chainId: m });
          }, [d, m]),
          T = (0, l.useMemo)(() => {
            var e, t;
            if (g)
              return null === (t = g.data) || void 0 === t
                ? void 0
                : null === (e = t.tryGetAccrualVault(n)) || void 0 === e
                  ? void 0
                  : e.accrueInterest(g.data.block.timestamp);
          }, [g, n]),
          C = (0, l.useMemo)(() => {
            if (!p.address || !g || !T || !d) return;
            let e = T.getDepositCapacityLimit(d.migratablePosition.max.value);
            return e.limiter === eG.CapacityLimitReason.cap
              ? { value: e.value, limiter: eG.CapacityLimitReason.cap }
              : d.migratablePosition.max;
          }, [p.address, g, T, d]),
          S = (0, l.useMemo)(() => {
            if (d && X && C && b > C.value) {
              let e = o.$0l.commas.digits(2).unit(X.symbol).of(C.value, X.decimals);
              switch (C.limiter) {
                case e8.SupplyMigrationLimiter.position:
                  return {
                    reason: e8.SupplyMigrationLimiter.position,
                    message: 'Limited by balance: '.concat(e),
                    level: e5.WarningLevel.Red,
                    color: 'text.interactive.error',
                  };
                case eG.CapacityLimitReason.cap:
                  return {
                    reason: eG.CapacityLimitReason.cap,
                    message: "Limited by vault's caps: ".concat(e),
                    level: e5.WarningLevel.Red,
                    color: 'text.interactive.error',
                  };
                case e8.SupplyMigrationLimiter.liquidity:
                  return {
                    reason: e8.SupplyMigrationLimiter.liquidity,
                    message: 'Limited by liquidity on '
                      .concat(null == B ? void 0 : B.name, ': ')
                      .concat(e),
                    level: e5.WarningLevel.Red,
                    color: 'text.interactive.error',
                  };
              }
              return {
                reason: void 0,
                message: 'Max: '.concat(e),
                level: e5.WarningLevel.Red,
                color: 'text.interactive.error',
              };
            }
          }, [d, X, C, b, null == B ? void 0 : B.name]),
          R = (0, l.useMemo)(() => {
            if (void 0 !== T && void 0 !== X)
              return 0n === b
                ? null
                : {
                    amount: b,
                    vault: T.address,
                    maxSharePrice: eG.MathLib.mulDivUp(
                      b,
                      eG.MathLib.wToRay(eG.MathLib.WAD + (0, e3.oi)(T.apy)),
                      T.toShares(b)
                    ),
                  };
          }, [b, X, T]),
          I = (0, l.useMemo)(() => {
            if (!(!d || !R || (0, v.isDefined)(S)))
              return d.migratablePosition.getMigrationTx(
                R,
                !p.isContract && !!(null == B ? void 0 : B.supportSignature)
              );
          }, [d, R, S, p.isContract, null == B ? void 0 : B.supportSignature]),
          M = (0, u.nR)({
            isFetching: g.isFetchingAny || g.isPending,
            dependencies: [p.isConnected],
            requiredData: [null == C ? void 0 : C.value],
          }),
          q = (0, l.useCallback)((e) => {
            P(!1), x(e), w(0n);
          }, []),
          L = (0, l.useCallback)(
            (e) => {
              if (e) {
                if ((null == C ? void 0 : C.value) == null) return;
                x(C.value);
                let e = null == T ? void 0 : T.toShares(C.value, 'Down');
                if (null == e) return;
                w(e);
              }
              P(e);
            },
            [C, T]
          );
        return {
          isLoading: M,
          localOperation: k,
          initialState: g,
          finalState: y,
          inputError: S,
          args: R,
          amountToMigrate: b,
          isNew: f,
          isMax: A,
          maxMigratable: C,
          bundle: I,
          setInputAmount: q,
          setIsMax: L,
        };
      };
      var e6 = r(25596),
        e7 = r(76280),
        e9 = r(34571),
        te = r(32926),
        tt = r(55872);
      let tr = [
          {
            id: 'vault',
            header: () =>
              (0, i.tZ)(o.xvT.Body.XXXS.Regular, {
                marginLeft: '12px',
                color: 'text.secondary',
                children: 'Vault',
              }),
            cell: (e) => {
              let { row: t } = e;
              return (0, i.BX)(o.Kqy, {
                gap: 'xs',
                align: 'center',
                'data-testid': 'vault-cell-'.concat(t.original.vault.address.toLowerCase()),
                children: [
                  (0, i.tZ)(o.DU6, {
                    ...t.original.vault,
                    chainId: t.original.chainId,
                    maxLength: 22,
                    TextVariant: o.xvT.Body.XXS.Regular,
                  }),
                  t.original.isSelected &&
                    (0, i.tZ)(o.JO$, { icon: 'CheckPlain20', color: 'text.body' }),
                ],
              });
            },
            accessorFn: (e) => e.vault.name,
            sortingFn: (e, t) => e.original.vault.name.localeCompare(t.original.vault.name),
          },
          {
            id: 'riskCurator',
            header: () =>
              (0, i.tZ)(o.xvT.Body.XXXS.Regular, {
                marginLeft: '12px',
                color: 'text.secondary',
                children: 'Risk Curator',
              }),
            cell: (e) => {
              var t, r;
              let { row: l } = e;
              return (0, i.tZ)(o.$xj, {
                items:
                  null !==
                    (r =
                      null === (t = l.original.vault.metadata) || void 0 === t
                        ? void 0
                        : t.curators.map((e) => ({ logoUrl: e.image }))) && void 0 !== r
                    ? r
                    : [],
                maxTokensCount: 3,
                align: 'right',
              });
            },
            accessorFn: (e) => {
              var t;
              return null === (t = e.vault.metadata) || void 0 === t ? void 0 : t.curators;
            },
          },
          {
            id: 'liquidity',
            header: () =>
              (0, i.tZ)(o.xvT.Body.XXXS.Regular, {
                color: 'text.secondary',
                children: 'Liquidity',
              }),
            cell: (e) => {
              let { row: t } = e;
              return (0, i.tZ)(o.UuD, {
                TextVariant: o.xvT.Body.XXS.Regular,
                token: t.original.vault.asset,
                amount: t.original.assets.assets,
                value: t.original.assets.assetsUsd,
              });
            },
            accessorFn: (e) => e.assets.assetsUsd,
          },
          {
            id: 'Collateral',
            header: () =>
              (0, i.tZ)(o.xvT.Body.XXXS.Regular, {
                color: 'text.secondary',
                children: 'Collateral',
              }),
            cell: (e) => {
              let { row: t } = e;
              return (0, i.tZ)(tt.m, {
                collateralExposures: t.original.collateralExposures.collateralExposures,
                targetChainId: t.original.chainId,
                maxTokensCount: 4,
              });
            },
            accessorFn: (e) => e.collateralExposures.collateralExposures,
          },
          {
            id: 'apy',
            header: () =>
              (0, i.tZ)(o.xvT.Body.XXXS.Regular, { color: 'text.secondary', children: 'APY' }),
            cell: (e) => {
              let { row: t } = e;
              return (0, i.tZ)(e9.Z, {
                rewards: t.original.netApy.rewards,
                netApy: t.original.netApy.netApy,
                apy: t.original.netApy.dailyApy,
                performanceFee: t.original.netApy.performanceFee,
                variant: 'vault',
                points: t.original.netApy.points,
                TextVariant: o.xvT.Body.XXS.Regular,
                withBackgroundEffect: !1,
              });
            },
            accessorFn: (e) => e.netApy.netApy,
          },
        ],
        ti = [
          {
            id: 'vault',
            header: () =>
              (0, i.tZ)(o.xvT.Body.XXXS.Regular, {
                marginLeft: '12px',
                color: 'text.secondary',
                children: 'Vault',
              }),
            cell: (e) => {
              var t;
              let { row: r } = e;
              return (0, i.BX)(o.Kqy, {
                direction: 'row',
                gap: 'xs',
                align: 'center',
                wrap: 'wrap',
                style: { marginBlock: '12px' },
                children: [
                  (0, i.tZ)(o.DU6, {
                    ...r.original.vault,
                    chainId: r.original.chainId,
                    TextVariant: o.xvT.Body.XXS.Regular,
                    maxLength: 22,
                  }),
                  (0, i.tZ)(te.Z, {
                    curators:
                      null === (t = r.original.vault.metadata) || void 0 === t
                        ? void 0
                        : t.curators,
                    TextVariant: o.xvT.Body.XXS.Regular,
                    chainId: r.original.chainId,
                  }),
                  (0, i.tZ)(o.UuD, {
                    withAvatar: !0,
                    token: r.original.vault.asset,
                    amount: r.original.assets.assets,
                    value: r.original.assets.assetsUsd,
                    TextVariant: o.xvT.Body.XXS.Regular,
                  }),
                  (0, i.tZ)(e9.Z, {
                    netApy: r.original.netApy.netApy,
                    apy: r.original.netApy.dailyApy,
                    performanceFee: r.original.netApy.performanceFee,
                    rewards: r.original.netApy.rewards,
                    variant: 'vault',
                    points: r.original.netApy.points,
                    TextVariant: o.xvT.Body.XXS.Regular,
                    isHoverable: !1,
                  }),
                  (0, i.tZ)(tt.m, {
                    collateralExposures: r.original.collateralExposures.collateralExposures,
                    targetChainId: r.original.chainId,
                    maxTokensCount: 4,
                  }),
                ],
              });
            },
          },
        ];
      var tl = r(9834),
        to = r(73828),
        ta = (e) => {
          let { vaults: t, selectedVaultAddress: r, searchQuery: i } = e,
            { targetChainId: a } = (0, s.Z_)();
          return (0, l.useMemo)(
            () =>
              t
                ? t
                    .filter((e) => (0, o.Uaj)(e.name).toLowerCase().includes(i.toLowerCase()))
                    .map((e) => {
                      var t, i, l, n, s, d, p, m, h, g, y;
                      let f = (0, to.pf)(e.address, e.state, e.asset, a),
                        b = (0, u.wk)(e.asset),
                        x = (0, o.BwX)(
                          a,
                          e.address,
                          null === (t = e.state) || void 0 === t ? void 0 : t.allocation
                        ),
                        Z = (0, tl.m)(
                          null === (i = e.state) || void 0 === i ? void 0 : i.allocation
                        ),
                        w = (0, v.isDefined)(e.warnings) ? (0, o.Myy)(e.warnings) : void 0,
                        A = (null === (l = e.state) || void 0 === l ? void 0 : l.totalAssetsUsd)
                          ? (0, c.safeParseNumber)(
                              null === (n = e.state) || void 0 === n ? void 0 : n.totalAssetsUsd
                            )
                          : void 0,
                        P = (null === (s = e.state) || void 0 === s ? void 0 : s.dailyApy)
                          ? (0, c.safeParseNumber)(
                              null === (d = e.state) || void 0 === d ? void 0 : d.dailyApy
                            )
                          : void 0,
                        k = (null === (p = e.state) || void 0 === p ? void 0 : p.dailyNetApy)
                          ? (0, c.safeParseNumber)(
                              null === (m = e.state) || void 0 === m ? void 0 : m.dailyNetApy
                            )
                          : void 0,
                        X = (null === (h = e.state) || void 0 === h ? void 0 : h.fee)
                          ? (0, c.safeParseNumber)(
                              null === (g = e.state) || void 0 === g ? void 0 : g.fee
                            )
                          : void 0;
                      return {
                        vault: { ...e, asset: b },
                        assets: {
                          assetsUsd: A,
                          assets: null === (y = e.state) || void 0 === y ? void 0 : y.totalAssets,
                          asset: b,
                          vaultAddress: e.address,
                        },
                        collateralExposures: { collateralExposures: Z, warnings: w },
                        netApy: {
                          netApy: k,
                          dailyApy: P,
                          performanceFee: X,
                          rewards: f,
                          points: x,
                        },
                        isSelected: e.address === r,
                        chainId: a,
                      };
                    })
                    .sort((0, v.bigIntComparator)((e) => e.assets.assetsUsd, 'desc'))
                : [],
            [t, r, a, i]
          );
        },
        tn = (0, l.memo)((e) => {
          var t, r, a, n, d, u, p, m;
          let {
              isOpen: h,
              isLoading: g,
              vaults: y,
              selectedVault: f,
              searchQuery: b,
              onOpenChange: x,
              onSelect: Z,
              setSearchQuery: w,
            } = e,
            { targetChainId: A } = (0, s.Z_)(),
            P = (0, o.CPt)(),
            k = ta({
              vaults: y,
              selectedVaultAddress: null == f ? void 0 : f.address,
              searchQuery: b,
            }),
            X = (0, l.useMemo)(() => (P ? ti : tr), [P]),
            B = (0, l.useMemo)(() => {
              if (!f) return '';
              let e = (0, o.Uaj)(f.name);
              return e ? (0, v.formatLongString)(e) : '';
            }, [f]),
            T = (0, ez.M)(f.address, f.state, f.asset),
            C = (0, o.vmq)({
              vaultAddress: f.address,
              chainId: A,
              allocation: null === (t = f.state) || void 0 === t ? void 0 : t.allocation,
            }),
            S = (0, l.useMemo)(() => {
              var e, t;
              return (0, c.safeParseNumber)(
                null !== (t = null === (e = f.state) || void 0 === e ? void 0 : e.dailyNetApy) &&
                  void 0 !== t
                  ? t
                  : 0
              );
            }, [null === (r = f.state) || void 0 === r ? void 0 : r.dailyNetApy]),
            R = (0, l.useMemo)(() => {
              var e, t;
              return (0, c.safeParseNumber)(
                null !== (t = null === (e = f.state) || void 0 === e ? void 0 : e.dailyApy) &&
                  void 0 !== t
                  ? t
                  : 0
              );
            }, [null === (a = f.state) || void 0 === a ? void 0 : a.dailyApy]),
            I = (0, l.useMemo)(() => {
              var e, t;
              return (0, c.safeParseNumber)(
                null !== (t = null === (e = f.state) || void 0 === e ? void 0 : e.fee) &&
                  void 0 !== t
                  ? t
                  : 0
              );
            }, [null === (n = f.state) || void 0 === n ? void 0 : n.fee]),
            M = (0, l.useMemo)(() => {
              var e, t;
              return (0, c.safeParseNumber)(
                null !== (t = null === (e = f.state) || void 0 === e ? void 0 : e.totalAssetsUsd) &&
                  void 0 !== t
                  ? t
                  : 0
              );
            }, [null === (d = f.state) || void 0 === d ? void 0 : d.totalAssetsUsd]);
          return g
            ? (0, i.tZ)(o.OdW, { width: '150px', height: '45px', borderRadius: '20px' })
            : (0, i.tZ)(o.Kqy, {
                direction: 'row',
                width: 'full',
                align: 'center',
                children: (0, i.BX)(o.Ce2.Root, {
                  open: h,
                  onOpenChange: x,
                  children: [
                    (0, i.BX)(o.Kqy, {
                      direction: 'column',
                      gap: 'xs',
                      flex: 1,
                      children: [
                        (0, i.tZ)(o.xvT.Body.XXS.Regular, {
                          color: 'text.secondary',
                          shortenByWidth: 320,
                          children: 'Select vault',
                        }),
                        (0, i.tZ)(o.Ce2.Trigger, {
                          children: (0, i.tZ)(o.zxk, {
                            style: { width: 'fit-content' },
                            loading: g,
                            variant: 'secondary',
                            onClick: () => x(!h),
                            'data-testid': 'select-vault-trigger',
                            children: (0, i.BX)(o.Kqy, {
                              direction: 'row',
                              align: 'center',
                              gap: 's',
                              children: [
                                (0, i.BX)(o.Kqy, {
                                  direction: 'row',
                                  align: 'center',
                                  gap: 'xs',
                                  children: [
                                    (0, i.tZ)(o.qEK, {
                                      src:
                                        null == f
                                          ? void 0
                                          : null === (u = f.asset) || void 0 === u
                                            ? void 0
                                            : u.logoURI,
                                      size: 'medium',
                                    }),
                                    (0, i.tZ)(o.xvT.Body.XXS.Regular, {
                                      shortenByWidth: 320,
                                      children: B,
                                    }),
                                  ],
                                }),
                                !P &&
                                  (null === (m = f.metadata) || void 0 === m
                                    ? void 0
                                    : null === (p = m.curators) || void 0 === p
                                      ? void 0
                                      : p.map((e) =>
                                          (0, i.tZ)(
                                            o.Vp9,
                                            {
                                              variant: 'main',
                                              label: e.name,
                                              startIcon: (0, i.tZ)(o.qEK, {
                                                src: e.image,
                                                size: 'small',
                                                style: { width: 16, height: 16 },
                                              }),
                                            },
                                            e.name
                                          )
                                        )),
                                (0, i.tZ)(o.Vp9, {
                                  variant: 'main',
                                  label: o.$0l.short.digits(2).unit('$').of(M, 18),
                                }),
                                (0, i.tZ)(e9.Z, {
                                  rewards: T,
                                  netApy: S,
                                  apy: R,
                                  performanceFee: I,
                                  variant: 'vault',
                                  points: C,
                                  TextVariant: o.xvT.Body.XXXS.Regular,
                                  isHoverable: !0,
                                  withBackgroundEffect: !1,
                                }),
                                (0, i.tZ)(o.JO$, {
                                  icon: 'ChevronPlain20',
                                  style: {
                                    transition: 'transform 0.2s ease-in-out',
                                    transform: h ? 'rotate(180deg)' : 'rotate(0deg)',
                                  },
                                }),
                              ],
                            }),
                          }),
                        }),
                      ],
                    }),
                    (0, i.tZ)(o.Ce2.Portal, {
                      children: (0, i.BX)(o.Ce2.Content, {
                        side: 'bottom',
                        sideOffset: 2,
                        align: 'start',
                        width: 'min(775px, 90vw)',
                        children: [
                          (0, i.tZ)(o.Ce2.SearchBar, {
                            placeholder: 'Search vaults',
                            value: b,
                            onChange: (e) => w(e.target.value),
                          }),
                          (0, i.tZ)(o.Ce2.Separator, {}),
                          (0, i.tZ)(o.Ce2.Table, {
                            maxHeight: 262,
                            data: k,
                            columnsDefs: X,
                            columnWidths: ['30%', '120px', '200px', '110px'],
                            onRowClick: (e) => Z(e.vault.address),
                          }),
                        ],
                      }),
                    }),
                  ],
                }),
              });
        }),
        ts = (0, l.memo)((e) => {
          var t;
          let { protocolPosition: r, operation: a, errors: n } = e,
            { targetChainId: d } = (0, s.Z_)(),
            { migratablePosition: c, mostYieldingVault: p } = r,
            h = u.FW.getProtocol({ name: c.protocol, chainId: d }),
            g = (0, l.useMemo)(() => (0, u.wk)(p.asset), [p.asset]),
            y = (0, l.useMemo)(
              () => o.$0l.percent.digits(2).unit('%').of(c.supplyApy),
              [c.supplyApy]
            );
          return (0, i.BX)(o.soA.Root, {
            width: '100%',
            height: '257px',
            children: [
              (0, i.BX)(o.soA.Header, {
                children: [
                  (0, i.tZ)(o.qEK, { size: 'large', src: h.imageSrc }),
                  (0, i.tZ)(o.Kqy, {
                    direction: 'column',
                    gap: 'xs',
                    children: (0, i.tZ)(o.xvT.Title.XS, { children: h.name }),
                  }),
                ],
              }),
              (0, i.BX)(o.soA.List, {
                children: [
                  (0, i.tZ)(o.soA.ListItem, {
                    warning: null == n ? void 0 : n.supplyError,
                    label: 'Supply ('.concat(
                      (0, v.formatLongString)(null !== (t = g.symbol) && void 0 !== t ? t : '', 15),
                      ')'
                    ),
                    value: (0, i.tZ)(o.soA.ValueChange, {
                      initialProps: { value: c.max.value },
                      finalProps: { value: c.max.value - a.assets },
                      formatter: (e) =>
                        (0, m.sL)({
                          price: g.price,
                          amount: e,
                          decimals: g.decimals,
                          withTrailingZero: !1,
                        }),
                    }),
                  }),
                  (0, i.tZ)(o.soA.ListItem, {
                    label: 'APY',
                    value: (0, i.tZ)(o.soA.Value, { value: y }),
                  }),
                ],
              }),
            ],
          });
        });
      let td = (e) => {
        var t, r, n, c, v;
        let { position: p, initialOperation: m } = e,
          h = (0, o.CPt)(),
          { mostYieldingVault: g, compatibleVaults: b } = p,
          {
            bundlerConfiguration: Z,
            simulationError: X,
            isPending: B,
            blockError: T,
            config: { addToSimulationState: S },
          } = (0, w.N)(),
          { setActiveBundle: R } = (0, k.H)(),
          { toggleDialog: I } = (0, o.DAv)(),
          { account: M } = (0, s.Z_)(),
          [q, L] = (0, l.useState)(''),
          [K, E] = (0, l.useState)(!1),
          [N, V] = (0, l.useState)(
            null !==
              (n =
                null !== (r = null == m ? void 0 : m.vaultAddress) && void 0 !== r
                  ? r
                  : null === (t = b[0]) || void 0 === t
                    ? void 0
                    : t.address) && void 0 !== n
              ? n
              : g.address
          ),
          U = (0, l.useMemo)(() => b.find((e) => e.address === N), [b, N]),
          W = (0, e7.q)(U),
          D = (0, l.useMemo)(() => (0, u.wk)(g.asset), [g.asset]),
          {
            localOperation: O,
            inputError: _,
            maxMigratable: H,
            amountToMigrate: F,
            isMax: j,
            isLoading: z,
            initialState: $,
            isNew: G,
            bundle: J,
            setInputAmount: Y,
            setIsMax: Q,
          } = e4({ vaultAddress: N, position: p, initialOperation: m }),
          [ee] = (0, P._)($.data, O, Z, G),
          et = (0, e6.oP)({
            address: N,
            error: null == _ ? void 0 : _.message,
            isWrongChain: M.isWrongChain,
            chainId:
              null !== (c = null == U ? void 0 : U.chain.id) && void 0 !== c
                ? c
                : eG.ChainId.EthMainnet,
          }),
          er = (0, C.Z)(
            'migration',
            0n === F,
            !0,
            !0,
            null !== (v = null == _ ? void 0 : _.message) && void 0 !== v ? v : void 0,
            [],
            X,
            T,
            B,
            M.isWrongChain,
            !1
          ),
          ei = (0, l.useMemo)(
            () =>
              (T && B) ||
              !!(null == _ ? void 0 : _.message) ||
              !!X ||
              !(0, A.H)(O) ||
              M.isWrongChain,
            [T, B, null == _ ? void 0 : _.message, X, O, M.isWrongChain]
          ),
          el = (0, l.useCallback)(() => {
            I(!1);
          }, [I]),
          eo = (0, l.useCallback)(() => {
            I(
              (0, i.tZ)(y.sG, {
                operations: [O],
                headerActionSlot: (0, i.tZ)(o.zxk, {
                  variant: 'ghost',
                  iconRight: 'EditPlain20',
                  label: 'Edit migration',
                  onClick: () => {
                    I(
                      (0, i.tZ)(d.Z, {
                        fallback: (0, i.tZ)(a.c, {}),
                        children: (0, i.tZ)(td, {
                          'data-testid': 'migration-dialog',
                          position: p,
                          initialOperation: O,
                        }),
                      }),
                      { maxWidth: h ? void 0 : '900px', fullSize: h }
                    );
                  },
                }),
                onConfirm: () => {
                  (null == J ? void 0 : J.actions) &&
                    (R(J, [O]), I((0, i.tZ)(f.h, {}), { closable: !1 }));
                },
              })
            );
          }, [O, J, I, R, h, p]),
          ea = (0, l.useCallback)(
            (e) => {
              V(e), E(!1), Y(0n), Q(!1);
            },
            [V, E, Y, Q]
          );
        return (
          (0, l.useEffect)(() => {
            S(W);
          }, [W, S]),
          (0, i.tZ)(x.Do, {
            title: 'Migrate Position',
            size: 'small',
            topSlot: (0, i.tZ)(i.HY, {
              children: U
                ? (0, i.tZ)(tn, {
                    isOpen: K,
                    vaults: b,
                    selectedVault: U,
                    searchQuery: q,
                    setSearchQuery: L,
                    onOpenChange: E,
                    onSelect: ea,
                  })
                : (0, i.tZ)(o.OdW, { width: 'full', height: '59px', borderRadius: '20px' }),
            }),
            inputSlots: [
              (0, i.tZ)(
                o.TGk,
                {
                  fullWidth: !0,
                  token: D,
                  amount: F,
                  onChange: Y,
                  header: 'Supply amount to migrate',
                  maxValue: null == H ? void 0 : H.value,
                  loading: z,
                  onMaxClick: Q,
                  isMax: j,
                  disabled: z,
                },
                D.address
              ),
            ],
            initialPositionSlot: (0, i.tZ)(ts, {
              protocolPosition: p,
              operation: O,
              errors: {
                supplyError:
                  (null == _ ? void 0 : _.reason) !== eG.CapacityLimitReason.cap ? _ : void 0,
              },
            }),
            finalPositionSlot: (0, i.tZ)(eQ, {
              vault: U,
              operation: O,
              localSimulationResult: ee,
              loading: z,
            }),
            actionSlot: (0, i.tZ)(o.ua7, {
              content: null == et ? void 0 : et.message,
              disabled: !et,
              children: (0, i.tZ)(o.zxk, {
                size: 'big',
                variant: ei ? 'secondary' : 'primary',
                label: er,
                disabled: ei,
                onClick: eo,
                shortenByWidth: 300,
                'data-testid': 'finalize-button',
              }),
            }),
            onClose: el,
          })
        );
      };
      var tc = (0, l.memo)(td),
        tu = r(13328),
        tv = r(33214),
        tp = (0, l.memo)(() => {
          let { toggleDialog: e } = (0, o.DAv)(),
            t = (0, o.CPt)(),
            { account: r, modal: c } = (0, s.Z_)(),
            {
              migratablePositionsByProtocol: u,
              hasMigratablePositions: v,
              isLoading: p,
              error: m,
            } = (0, n.w)(),
            h = (0, l.useCallback)(
              (r) => {
                e(
                  (0, i.tZ)(d.Z, {
                    fallback: (0, i.tZ)(a.c, { minHeight: '494px' }),
                    children:
                      'supply' === r.type
                        ? (0, i.tZ)(tc, { position: r })
                        : (0, i.tZ)(M, { position: r }),
                  }),
                  { maxWidth: t ? void 0 : '900px', fullSize: t }
                );
              },
              [e, t]
            );
          return r.isConnected
            ? p
              ? (0, i.tZ)(tv.i, {})
              : m
                ? (0, i.BX)(N.Z, {
                    spacing: 'l',
                    children: [(0, i.tZ)(a.c, { minHeight: '600px' }), ';'],
                  })
                : v
                  ? (0, i.tZ)(N.Z, {
                      spacing: 'l',
                      children: (0, i.tZ)(o.Kqy, {
                        direction: 'column',
                        width: '100%',
                        maxWidth: '1112px',
                        children: Object.entries(null != u ? u : {}).map((e) => {
                          let [t, r] = e;
                          return (0, i.tZ)(
                            ej,
                            {
                              migratableProtocol: t,
                              positions: r,
                              children: (0, i.tZ)(E, {
                                children: r.map((e, r) =>
                                  (0, i.tZ)(
                                    o.Kqy,
                                    {
                                      minWidth: '210px',
                                      children:
                                        'supply' === e.type
                                          ? (0, i.tZ)(e$, { position: e, onClick: () => h(e) })
                                          : (0, i.tZ)(g, {
                                              position: e,
                                              onClick: () => {
                                                h(e);
                                              },
                                            }),
                                    },
                                    ''.concat(t, '-').concat(r, '-migratable-position')
                                  )
                                ),
                              }),
                            },
                            t
                          );
                        }),
                      }),
                    })
                  : (0, i.tZ)(N.Z, {
                      spacing: { base: 'l', 'content-l': 'm' },
                      children: (0, i.BX)(o.Kqy, {
                        direction: { base: 'row', 'content-l': 'column' },
                        width: '100%',
                        maxWidth: '1086px',
                        gap: 'm',
                        children: [
                          (0, i.tZ)(L.Z, {}),
                          (0, i.BX)(o.Kqy, {
                            direction: 'column',
                            width: '100%',
                            gap: 'm',
                            children: [(0, i.tZ)(tu.a, {}), (0, i.tZ)(q.Z, {})],
                          }),
                        ],
                      }),
                    })
            : (0, i.tZ)(N.Z, {
                spacing: 'm',
                children: (0, i.BX)(o.Kqy, {
                  direction: 'column',
                  gap: 'm',
                  maxWidth: '702px',
                  width: '100%',
                  children: [
                    (0, i.tZ)(o._Lo, {
                      onClick: () => c.open(),
                      width: 'full',
                      children: 'Connect Wallet',
                    }),
                    (0, i.tZ)(L.Z, {}),
                  ],
                }),
              });
        });
    },
    45090: function (e, t, r) {
      'use strict';
      r.d(t, {
        F: function () {
          return f;
        },
      });
      var i = r(78286),
        l = r(58258),
        o = r(40252),
        a = r(4565),
        n = r(12556),
        s = r(54655),
        d = r(35047),
        c = r(725),
        u = r(78017),
        v = r(35288),
        p = r(16820),
        m = r(6423),
        h = r(30806);
      let g = (0, r(38819).Z)(s.OdW, {
          shouldForwardProp: (e) => 'fullWidth' !== e,
          target: 'eyb0hni0',
        })(
          'width:100%;height:304px;',
          (e) => {
            let { fullWidth: t } = e;
            return !t && 'max-width: 394px;';
          },
          ' ',
          (e) => {
            let { theme: t } = e;
            return t.breakpoints.down('m');
          },
          '{width:100%;max-width:100%;}'
        ),
        y = (e) => s.$0l.percent.digits(2).trailingZero(!1).unit('%').default('-').of(e, 18);
      var f = (0, l.memo)((e) => {
        var t, r, f, b, x, Z, w, A, P, k, X, B, T;
        let {
            chainId: C,
            isLoading: S,
            errors: R,
            market: {
              collateralToken: I,
              loanToken: M,
              uniqueKey: q,
              oracle: L,
              warnings: K,
              dailyBorrowApy: E,
              dailyNetBorrowApy: N,
              rewards: V,
            },
            state: {
              initialPosition: U,
              finalMarketData: W,
              initialMarketData: D,
              previewedMarket: O,
              previewedPosition: _,
            },
          } = e,
          H = (0, c.B9)({ lltv: null == D ? void 0 : D.params.lltv, marketId: q }),
          F = (0, s.$4C)({
            chainId: C,
            uniqueKey: q,
            collateralAddress: null == I ? void 0 : I.address,
          }),
          j = (0, l.useMemo)(() => (0, a.safeParseNumber)(E || 0, 18), [E]),
          z = (0, l.useMemo)(() => {
            var e;
            return (
              !!D &&
              null != U &&
              !!U.ltv &&
              !!H &&
              (0, n.M4)(null !== (e = U.ltv) && void 0 !== e ? e : 0n, H)
            );
          }, [U, D, H]),
          $ = (0, l.useMemo)(() => s.$0l.percent.default('0.00').digits(2).unit('%').of(N), [N]);
        return I && M && D && !S
          ? (0, i.BX)(s.soA.Root, {
              width: '100%',
              children: [
                (0, i.BX)(s.soA.Header, {
                  children: [
                    (0, i.tZ)(s._nw, {
                      size: 'large',
                      leftAvatarProps: { src: null == I ? void 0 : I.logoURI },
                      rightAvatarProps: { src: null == M ? void 0 : M.logoURI },
                    }),
                    (0, i.BX)(s.Kqy, {
                      direction: 'column',
                      gap: 'xs',
                      children: [
                        (0, i.tZ)(s.xvT.Title.XS, {
                          children: (0, s.lAJ)({ loanAsset: M, collateralAsset: I, maxLength: 15 }),
                        }),
                        (0, i.BX)(s.Kqy, {
                          direction: 'row',
                          align: 'center',
                          gap: 4,
                          children: [
                            (0, i.tZ)(s.Vp9, {
                              variant: 'main',
                              label: y(null == D ? void 0 : D.params.lltv),
                            }),
                            (0, d.isDefined)(L) &&
                              (0, i.tZ)(v.Z, {
                                oracle: L,
                                warnings: null != K ? K : [],
                                typographyProps: { color: 'text.secondary' },
                              }),
                            (0, d.isDefined)(q) &&
                              (0, i.tZ)(h.x, {
                                tooltip: 'Open market.',
                                href: (0, m.E3)({
                                  chainName: n.FW.getNameById(C),
                                  marketUniqueKey: q,
                                  collateralSymbol:
                                    null !== (x = I.symbol) && void 0 !== x ? x : '',
                                  loanSymbol: null !== (Z = M.symbol) && void 0 !== Z ? Z : '',
                                }),
                              }),
                          ],
                        }),
                      ],
                    }),
                  ],
                }),
                (0, i.BX)(s.soA.List, {
                  children: [
                    (0, i.tZ)(s.soA.ListItem, {
                      warning: null == R ? void 0 : R.collateralError,
                      label: 'Collateral ('.concat(
                        (0, d.formatLongString)(null !== (w = I.symbol) && void 0 !== w ? w : ''),
                        ')'
                      ),
                      value: (0, i.tZ)(s.soA.ValueChange, {
                        initialProps: { value: (0, d.getValue)(U, 'collateral') },
                        finalProps: {
                          value: (0, d.getValue)(_, 'collateral'),
                          typographyProps: {
                            color:
                              null !==
                                (A =
                                  null == R
                                    ? void 0
                                    : null === (t = R.collateralError) || void 0 === t
                                      ? void 0
                                      : t.color) && void 0 !== A
                                ? A
                                : 'text.body',
                          },
                        },
                        formatter: (e) =>
                          (0, p.sL)({
                            price: I.price,
                            amount: e,
                            decimals: I.decimals,
                            withTrailingZero: !1,
                          }),
                      }),
                    }),
                    (0, i.tZ)(s.soA.ListItem, {
                      warning: null == R ? void 0 : R.borrowError,
                      label: 'Loan ('.concat(
                        (0, d.formatLongString)(null !== (P = M.symbol) && void 0 !== P ? P : ''),
                        ')'
                      ),
                      value: (0, i.tZ)(s.soA.ValueChange, {
                        initialProps: { value: (0, d.getValue)(U, 'borrowAssets') },
                        finalProps: {
                          value: (0, d.getValue)(_, 'borrowAssets'),
                          typographyProps: {
                            color:
                              null !==
                                (k =
                                  null == R
                                    ? void 0
                                    : null === (r = R.borrowError) || void 0 === r
                                      ? void 0
                                      : r.color) && void 0 !== k
                                ? k
                                : 'text.body',
                          },
                        },
                        formatter: (e) => {
                          var t;
                          return (0, p.sL)({
                            price: null !== (t = M.price) && void 0 !== t ? t : 0n,
                            amount: e,
                            decimals: M.decimals,
                            withTrailingZero: !1,
                          });
                        },
                      }),
                    }),
                    (0, i.tZ)(s.soA.ListItem, {
                      warning: null == R ? void 0 : R.ltvError,
                      label: (0, i.tZ)(c.gX, { marketId: q }),
                      value: (0, i.BX)(s.Kqy, {
                        direction: 'row',
                        align: 'center',
                        gap: '2px',
                        children: [
                          (0, i.tZ)(s.soA.ValueChange, {
                            initialProps: {
                              value: null == U ? void 0 : U.ltv,
                              typographyProps: { color: z ? 'text.interactive.error' : void 0 },
                            },
                            finalProps: {
                              value: (0, d.getValue)(_, 'ltv'),
                              typographyProps: {
                                color:
                                  null !==
                                    (X =
                                      null == R
                                        ? void 0
                                        : null === (f = R.ltvError) || void 0 === f
                                          ? void 0
                                          : f.color) && void 0 !== X
                                    ? X
                                    : 'text.body',
                              },
                            },
                            formatter: (e) =>
                              s.$0l.percent.unit('%').trailingZero(!1).digits(2).max(1).of(e, 18),
                          }),
                          (0, i.BX)(s.xvT.Body.XXS.Regular, {
                            display: 'flex',
                            alignItems: 'center',
                            lineHeight: 'normal',
                            gap: '2px',
                            color: 'text.body',
                            children: [
                              (0, i.tZ)(s.xvT.Inherit, { children: '/' }),
                              (0, i.tZ)(c.v1, {
                                lltv: null == D ? void 0 : D.params.lltv,
                                marketId: q,
                              }),
                            ],
                          }),
                        ],
                      }),
                    }),
                    (0, i.tZ)(s.soA.ListItem, {
                      label: 'Borrow Rate',
                      value: (0, i.tZ)(s.Kqy, {
                        gap: 2,
                        direction: 'row',
                        align: 'center',
                        children: (0, i.tZ)(u.w, {
                          RewardsHoverCardProps: {
                            apy: j,
                            rewards: V,
                            variant: 'market',
                            points: F,
                            asset: I,
                            netApy: (0, p.Pi)(N, a.safeParseNumber),
                          },
                          children: (0, i.tZ)(s.soA.Value, {
                            value: $,
                            typographyProps: { color: 'text.body' },
                          }),
                        }),
                      }),
                    }),
                    (0, i.tZ)(s.soA.ListItem, {
                      warning: null == R ? void 0 : R.liquidityError,
                      label: 'Total Liquidity ('.concat(
                        (0, d.formatLongString)(null !== (B = M.symbol) && void 0 !== B ? B : ''),
                        ')'
                      ),
                      value: (0, i.tZ)(s.soA.ValueChange, {
                        initialProps: {
                          value: (0, d.transformValue)(
                            (0, d.getValue)(D, 'liquidity'),
                            o.MathLib.max.bind(void 0, 0n)
                          ),
                        },
                        finalProps: {
                          value: (0, d.transformValue)(
                            (0, d.getValue)(null != W ? W : O, 'liquidity'),
                            o.MathLib.max.bind(void 0, 0n)
                          ),
                          typographyProps: {
                            color:
                              null !==
                                (T =
                                  null == R
                                    ? void 0
                                    : null === (b = R.liquidityError) || void 0 === b
                                      ? void 0
                                      : b.color) && void 0 !== T
                                ? T
                                : 'text.body',
                          },
                        },
                        formatter: (e) => {
                          var t;
                          return (0, p.sL)({
                            price: null !== (t = M.price) && void 0 !== t ? t : 0n,
                            amount: e,
                            decimals: M.decimals,
                            withTrailingZero: !1,
                          });
                        },
                      }),
                    }),
                  ],
                }),
              ],
            })
          : (0, i.tZ)(g, { fullWidth: !0, borderRadius: '20px' });
      });
    },
    34571: function (e, t, r) {
      'use strict';
      r.d(t, {
        Z: function () {
          return n;
        },
      });
      var i = r(78286),
        l = r(58258),
        o = r(54655),
        a = r(27349),
        n = (0, l.memo)((e) => {
          let {
              netApy: t,
              apy: r,
              performanceFee: n,
              rewards: s,
              variant: d,
              points: c,
              isSimulated: u,
              isHoverable: v = !0,
              TextVariant: p = o.xvT.Body.XS.Regular,
              asset: m,
              withBackgroundEffect: h = !0,
            } = e,
            g = (0, l.useMemo)(() => o.$0l.percent.digits(2).unit('%').of(t, 18), [t]);
          return g
            ? (0, i.tZ)(o.KNv, {
                withBackgroundEffect: h,
                hoverCardContent: (0, i.tZ)(a.Z, {
                  netApy: t,
                  apy: r,
                  performanceFee: n,
                  rewards: s,
                  variant: d,
                  points: c,
                  asset: m,
                }),
                isDisabled: !v,
                padding: '0 11px 0 14px',
                children:
                  g &&
                  (0, i.BX)(o.Kqy, {
                    gap: 2,
                    align: 'center',
                    children: [
                      (0, i.tZ)(o.ZT$, {
                        TextVariant: p,
                        isSimulated: u,
                        display: 'flex',
                        alignItems: 'center',
                        lineHeight: 'normal',
                        color: 'text.body',
                        children: g,
                      }),
                      (null == s ? void 0 : s.length)
                        ? (0, i.tZ)(o.JO$, { icon: 'RewardsGradient20' })
                        : null,
                      (null == c ? void 0 : c.length)
                        ? (0, i.tZ)(o.JO$, { icon: 'PointsGradient20' })
                        : null,
                    ],
                  }),
              })
            : null;
        });
    },
    32926: function (e, t, r) {
      'use strict';
      r.d(t, {
        Z: function () {
          return x;
        },
      });
      var i = r(78286),
        l = r(58258),
        o = r(54655),
        a = r(55412),
        n = r(3245),
        s = r(63658),
        d = r(60059);
      function c() {
        let e = (0, a._)([
          '\n  query GetCreatorVaults($where: VaultFilters) {\n    vaults(where: $where) {\n      items {\n        ...simpleVaultFields\n        state {\n          id\n          totalAssetsUsd\n        }\n        chain {\n          id\n          network\n        }\n      }\n    }\n  }\n  ',
          '\n',
        ]);
        return (
          (c = function () {
            return e;
          }),
          e
        );
      }
      let u = {},
        v = (0, n.Ps)(c(), d.U);
      var p = r(85501),
        m = r(4407),
        h = (0, l.memo)(() =>
          (0, i.tZ)(m.M, {
            children: Array.from({ length: 4 }).map((e, t) =>
              (0, i.tZ)(
                m.n,
                {
                  align: 'center',
                  children: (0, i.tZ)(o.OdW, { width: '100%', height: 21, borderRadius: '8px' }, t),
                },
                t
              )
            ),
          })
        );
      let g = (e) =>
        e.slice().sort((e, t) => {
          var r, i, l, o;
          let a =
              null !== (l = null === (r = e.state) || void 0 === r ? void 0 : r.totalAssetsUsd) &&
              void 0 !== l
                ? l
                : 0,
            n =
              null !== (o = null === (i = t.state) || void 0 === i ? void 0 : i.totalAssetsUsd) &&
              void 0 !== o
                ? o
                : 0;
          return n > a ? 1 : n < a ? -1 : 0;
        });
      var y = (0, l.memo)((e) => {
        let { creatorName: t, chainId: r } = e,
          {
            data: a,
            error: n,
            loading: d,
          } = (function (e) {
            let t = { ...u, ...e };
            return s.aM(v, t);
          })({
            variables: {
              where: { search: t, chainId_in: [r], totalAssetsUsd_gte: 1, whitelisted: !0 },
            },
            skip: !t,
          }),
          c = (0, l.useMemo)(() => {
            var e;
            return g(
              null !== (e = null == a ? void 0 : a.vaults.items) && void 0 !== e ? e : []
            ).map((e) => {
              var t, r, i;
              let l = o.$0l.short
                .unit('$')
                .digits(2)
                .of(null === (t = e.state) || void 0 === t ? void 0 : t.totalAssetsUsd);
              return {
                id: e.id,
                vaultName: e.name,
                address: e.address,
                imageURI:
                  null !== (i = null === (r = e.metadata) || void 0 === r ? void 0 : r.image) &&
                  void 0 !== i
                    ? i
                    : '',
                network: e.chain.network,
                vaultDeposit: l,
              };
            });
          }, [null == a ? void 0 : a.vaults.items]);
        return d
          ? (0, i.tZ)(h, {})
          : n
            ? (0, i.tZ)(o.xvT.Body.XS.Regular, {
                color: 'text.interactive.error',
                children: 'Error loading vaults',
              })
            : (0, i.tZ)(p.T, {
                vaults: c,
                emptyMessage: 'No vaults found for this curator on '.concat(r, '.'),
              });
      });
      let f = (0, r(38819).Z)(o.Kqy, { target: 'ecpepk30' })(
        'padding:',
        (e) => {
          let { theme: t } = e;
          return t.padding.s;
        },
        ';gap:12px;'
      );
      var b = (0, l.memo)((e) => {
          let { creatorName: t, riskCurators: r, chainId: l } = e;
          return 0 !== r.length && t
            ? (0, i.BX)(f, {
                direction: 'column',
                children: [
                  (0, i.tZ)(o.Kqy, {
                    gap: 's',
                    children: r.map((e) => {
                      let { name: t, image: r } = e;
                      return (0, i.BX)(
                        o.Kqy,
                        {
                          direction: 'row',
                          gap: 4,
                          align: 'center',
                          children: [
                            (0, i.tZ)(o.qEK, { src: r, size: 'medium' }),
                            (0, i.tZ)(o.xvT.Body.XS.Regular, { color: 'text.body', children: t }),
                          ],
                        },
                        t
                      );
                    }),
                  }),
                  (0, i.tZ)(y, { creatorName: t, chainId: l }),
                ],
              })
            : null;
        }),
        x = (0, l.memo)((e) => {
          var t;
          let {
            curators: r,
            creatorAddress: l,
            TextVariant: a = o.xvT.Body.XS.Regular,
            isSimulated: n,
            isHoverable: s = !0,
            withLabel: d = !0,
            chainId: c,
          } = e;
          return r && 0 !== r.length
            ? (0, i.tZ)(o.KNv, {
                hoverCardContent:
                  l &&
                  (0, i.tZ)(b, {
                    creatorName: null === (t = r[0]) || void 0 === t ? void 0 : t.name,
                    riskCurators: r,
                    chainId: c,
                  }),
                isDisabled: !l || !s,
                children: (0, i.tZ)(o.Kqy, {
                  direction: 'row',
                  gap: 'xs',
                  align: 'center',
                  children: r.map((e, t) => {
                    let { name: r, image: l } = e;
                    return (0, i.BX)(
                      o.Kqy,
                      {
                        direction: 'row',
                        gap: 4,
                        align: 'center',
                        children: [
                          l && (0, i.tZ)(o.qEK, { src: l, size: 'medium' }),
                          d &&
                            (0, i.tZ)(o.ZT$, {
                              lineHeight: 'normal',
                              isSimulated: n,
                              TextVariant: a,
                              color: 'text.body',
                              children: r,
                            }),
                        ],
                      },
                      t
                    );
                  }),
                }),
              })
            : null;
        });
    },
    55872: function (e, t, r) {
      'use strict';
      r.d(t, {
        m: function () {
          return g;
        },
      });
      var i = r(78286),
        l = r(58258),
        o = r(54655),
        a = r(13191),
        n = r(40252),
        s = r(35047),
        d = r(50825),
        c = r(38819);
      let u = (0, c.Z)('div', { target: 'eyr4h7c0' })(
          'min-width:220px;max-width:300px;padding:',
          (e) => {
            let { theme: t } = e;
            return t.spacing.s;
          },
          ' 0;'
        ),
        v = (0, c.Z)(o.Kqy, { target: 'eyr4h7c1' })(
          'padding:0px ',
          (e) => {
            let { theme: t } = e;
            return t.spacing.s;
          },
          ';min-height:34px;'
        ),
        p = (0, c.Z)(v, { target: 'eyr4h7c2' })(
          'padding:10px ',
          (e) => {
            let { theme: t } = e;
            return t.spacing.s;
          },
          ';'
        ),
        m = (0, c.Z)(o.xvT.Body.XXS.Regular, { target: 'eyr4h7c3' })('display:contents;');
      var h = (0, l.memo)((e) => {
          let { className: t, collateralExposure: r, targetChainId: c } = e,
            h = (0, l.useMemo)(
              () =>
                Array.from(r.lltvs)
                  .map((e) =>
                    ''.concat(o.$0l.percent.unit('%').trailingZero(!1).digits(1).of(e, 18))
                  )
                  .join(', '),
              [r]
            ),
            g = (0, l.useMemo)(() => {
              let e = new Set();
              return Array.from(r.oracles)
                .map((e) => {
                  let t = 'string' == typeof e,
                    r = t ? e : e.address;
                  return {
                    label: t
                      ? (0, o.GQT)(e)
                      : e.type === a.OracleType.Unknown
                        ? (0, o.GQT)(r)
                        : (0, s.formatLongString)((0, o.pTE)(e), 30) || (0, o.GQT)(r),
                    url: n.ChainUtils.getExplorerAddressUrl(c, r),
                    address: r,
                  };
                })
                .filter((t) => {
                  let r = ''.concat(t.label, '-').concat(t.url, '-').concat(t.address);
                  return !e.has(r) && (e.add(r), !0);
                });
            }, [r.oracles, c]);
          return (0, i.tZ)(u, {
            className: t,
            children: (0, i.BX)(o.Kqy, {
              direction: 'column',
              children: [
                (0, i.BX)(v, {
                  align: 'center',
                  justify: 'space-between',
                  children: [
                    (0, i.tZ)(o.xvT.Body.XXS.Regular, {
                      color: 'text.body',
                      children: 'Collateral',
                    }),
                    (0, i.BX)(o.Kqy, {
                      align: 'center',
                      gap: 4,
                      children: [
                        (0, i.tZ)(o.qEK, { src: r.token.logoURI, size: 'small' }),
                        (0, i.tZ)(m, {
                          children: r.token.symbol
                            ? (0, s.formatLongString)(r.token.symbol, 35)
                            : '-',
                        }),
                      ],
                    }),
                  ],
                }),
                (0, i.tZ)(o.Z0O, {}),
                (0, i.BX)(v, {
                  align: 'center',
                  justify: 'space-between',
                  children: [
                    (0, i.tZ)(o.xvT.Body.XXS.Regular, { color: 'text.body', children: 'LLTV' }),
                    (0, i.tZ)(o.xvT.Body.XXS.Regular, { children: h }),
                  ],
                }),
                (0, i.tZ)(o.Z0O, {}),
                (0, i.BX)(p, {
                  align: 'center',
                  justify: 'space-between',
                  gap: 's',
                  children: [
                    (0, i.tZ)(o.xvT.Body.XXS.Regular, { children: 'Oracle' }),
                    (0, i.tZ)(o.Kqy, {
                      direction: 'column',
                      gap: 5,
                      align: 'end',
                      children: g.map((e, t) =>
                        (0, i.tZ)(
                          d.Z,
                          {
                            href: e.url,
                            mode: 'external',
                            buttonProps: { variant: 'ghost', size: 'small', label: e.label },
                          },
                          'oracleLink_'.concat(t)
                        )
                      ),
                    }),
                  ],
                }),
              ],
            }),
          });
        }),
        g = (0, l.memo)((e) => {
          let {
              className: t,
              collateralExposures: r,
              targetChainId: a,
              extraInfo: n,
              align: s = 'left',
              maxTokensCount: d,
              size: c,
            } = e,
            u = (0, l.useMemo)(
              () =>
                r.map((e) => ({
                  hoverCardContent: (0, i.tZ)(h, { collateralExposure: e, targetChainId: a }),
                  logoUrl: e.token.logoURI,
                })),
              [r, a]
            );
          return (0, i.tZ)(o.$xj, {
            className: t,
            items: u,
            extraInfo: n,
            align: s,
            maxTokensCount: d,
            avatarSize: c,
          });
        });
    },
    9124: function (e, t, r) {
      'use strict';
      r.d(t, {
        K: function () {
          return g;
        },
      });
      var i = r(78286),
        l = r(58258),
        o = r(54655),
        a = r(4565),
        n = r(12556),
        s = r(35047),
        d = r(89991),
        c = r(16820),
        u = r(47528),
        v = (e) => {
          let { markets: t, selectedMarketId: r } = e,
            { targetChain: i } = (0, d.Z_)();
          return (0, l.useMemo)(
            () =>
              t
                ? t
                    .map((e) => {
                      var t, l, d, v, p;
                      let m = (0, n.wk)(e.loanAsset),
                        h = (0, n.wk)(e.collateralAsset),
                        g = (0, u.f)(e),
                        y = (0, c.Pi)(
                          null === (t = e.state) || void 0 === t ? void 0 : t.dailyNetBorrowApy,
                          a.safeParseNumber
                        ),
                        f = (0, c.Pi)(
                          null === (l = e.state) || void 0 === l ? void 0 : l.dailyBorrowApy,
                          a.safeParseNumber
                        ),
                        b = (0, o.bhT)(i.id, e.uniqueKey, null == h ? void 0 : h.address).filter(
                          s.isDefined
                        ),
                        x = (0, o.pTE)({ address: e.oracleAddress, ...e.oracleFeed }),
                        Z =
                          (null !==
                            (v =
                              null === (d = e.state) || void 0 === d
                                ? void 0
                                : d.liquidityAssets) && void 0 !== v
                            ? v
                            : 0n) +
                          (null !== (p = e.reallocatableLiquidityAssets) && void 0 !== p ? p : 0n),
                        w = m.toUsd(Z);
                      return {
                        market: e,
                        loanAsset: m,
                        collateralAsset: h,
                        rewards: g,
                        oracleName: x,
                        liquidity: { amount: Z, value: w },
                        netApy: { dailyNetBorrowApy: y, dailyBorrowApy: f, rewards: g, points: b },
                        isSelected: e.uniqueKey === r,
                      };
                    })
                    .sort((0, s.bigIntComparator)((e) => e.liquidity.value, 'desc'))
                : [],
            [t, r, i.id]
          );
        },
        p = r(34571);
      let m = [
          {
            id: 'market',
            header: () =>
              (0, i.tZ)(o.xvT.Body.XXXS.Regular, {
                marginLeft: '12px',
                color: 'text.secondary',
                children: 'Market',
              }),
            cell: function (e) {
              let { row: t } = e,
                { targetChainId: r } = (0, d.Z_)();
              return (0, i.BX)(o.Kqy, {
                gap: 'xs',
                align: 'center',
                'data-testid': 'market-cell-'.concat(t.original.market.uniqueKey.toLowerCase()),
                children: [
                  (0, i.tZ)(o.k1R, {
                    ...t.original.market,
                    chainId: r,
                    maxLength: 6,
                    TextVariant: o.xvT.Body.XXS.Regular,
                  }),
                  t.original.market.oracleFeed &&
                    (0, i.tZ)(o.Vp9, {
                      variant: 'main',
                      label: (0, s.formatLongString)(t.original.oracleName, 15),
                    }),
                  t.original.isSelected &&
                    (0, i.tZ)(o.JO$, { icon: 'CheckPlain20', color: 'text.body' }),
                ],
              });
            },
            accessorFn: (e) => e.market.lltv,
            sortingFn: (0, s.bigIntComparator)((e) => e.original.market.lltv),
          },
          {
            id: 'liquidity',
            header: 'Liquidity',
            cell: (e) => {
              let { row: t } = e;
              return t.original.loanAsset
                ? (0, i.tZ)(o.UuD, {
                    withAvatar: !0,
                    token: t.original.loanAsset,
                    amount: t.original.liquidity.amount,
                    maxLength: 6,
                    TextVariant: o.xvT.Body.XXXS.Regular,
                    value: t.original.liquidity.value,
                  })
                : null;
            },
            accessorFn: (e) => {
              var t;
              return null === (t = e.market.state) || void 0 === t ? void 0 : t.liquidityAssetsUsd;
            },
          },
          {
            id: 'netApy',
            header: 'Rate',
            accessorFn: (e) => e.netApy.dailyBorrowApy,
            cell: (e) => {
              let { row: t } = e;
              return t.original.netApy.dailyBorrowApy && t.original.netApy.dailyNetBorrowApy
                ? (0, i.tZ)(p.Z, {
                    variant: 'market',
                    performanceFee: BigInt(0),
                    netApy: t.original.netApy.dailyNetBorrowApy,
                    apy: t.original.netApy.dailyBorrowApy,
                    rewards: t.original.netApy.rewards,
                    points: t.original.netApy.points,
                    TextVariant: o.xvT.Body.XXXS.Regular,
                    isHoverable: !1,
                  })
                : null;
            },
          },
        ],
        h = [
          {
            id: 'market',
            header: 'Market',
            cell: (e) => {
              var t;
              let { row: r } = e;
              return (0, i.BX)(o.Kqy, {
                direction: 'row',
                gap: 'xs',
                align: 'center',
                wrap: 'wrap',
                style: { marginBlock: '12px' },
                children: [
                  (0, i.tZ)(o.k1R, { ...r.original.market, chainId: 1 }),
                  r.original.market.collateralAsset &&
                    (0, i.tZ)(o.UuD, {
                      withAvatar: !0,
                      token: (0, n.wk)(r.original.market.collateralAsset),
                      amount:
                        null === (t = r.original.market.state) || void 0 === t
                          ? void 0
                          : t.liquidityAssets,
                      value: r.original.liquidity.value,
                    }),
                  (0, i.tZ)(p.Z, {
                    netApy: r.original.netApy.dailyNetBorrowApy,
                    apy: r.original.netApy.dailyBorrowApy,
                    performanceFee: BigInt(0),
                    rewards: r.original.netApy.rewards,
                    variant: 'market',
                    isHoverable: !1,
                  }),
                ],
              });
            },
          },
        ];
      var g = (0, l.memo)((e) => {
        var t, r;
        let {
            isOpen: a,
            isLoading: n,
            markets: s,
            selectedMarket: d,
            buttonLabel: c,
            side: u = 'bottom',
            align: p = 'end',
            direction: g = 'column',
            onOpenChange: y,
            onSelect: f,
          } = e,
          b = (0, o.CPt)(),
          x = v({ markets: s, selectedMarketId: null == d ? void 0 : d.uniqueKey }),
          Z = (0, l.useMemo)(() => (b ? h : m), [b]),
          w = (0, l.useMemo)(() => {
            if (!d) return '';
            let e = (0, o.lAJ)({
                collateralAsset: null == d ? void 0 : d.collateralAsset,
                loanAsset: null == d ? void 0 : d.loanAsset,
                maxLength: 10,
              }),
              t = d.lltv
                ? o.$0l.percent
                    .readable()
                    .trailingZero(!1)
                    .digits(0)
                    .unit('%')
                    .of(BigInt(d.lltv), 18)
                : '';
            return ''.concat(e, ' ').concat(t);
          }, [d]);
        return n
          ? (0, i.tZ)(o.OdW, { width: '150px', height: '57px', borderRadius: '20px' })
          : (0, i.BX)(o.Ce2.Root, {
              open: a,
              onOpenChange: y,
              children: [
                (0, i.BX)(o.Kqy, {
                  direction: g,
                  gap: 'xs',
                  flex: 1,
                  align: 'row' === g ? 'center' : 'start',
                  children: [
                    c &&
                      (0, i.tZ)(o.xvT.Body.XXXS.Regular, { color: 'text.secondary', children: c }),
                    (0, i.tZ)(o.Ce2.Trigger, {
                      children: (0, i.tZ)(o.zxk, {
                        iconLeft: (0, i.tZ)(o.Kqy, {
                          direction: 'row',
                          align: 'center',
                          gap: 'xs',
                          children: (0, i.tZ)(o.Pws, {
                            collateralAssetURI:
                              null == d
                                ? void 0
                                : null === (t = d.collateralAsset) || void 0 === t
                                  ? void 0
                                  : t.logoURI,
                            loanAssetURI:
                              null == d
                                ? void 0
                                : null === (r = d.loanAsset) || void 0 === r
                                  ? void 0
                                  : r.logoURI,
                          }),
                        }),
                        loading: n,
                        iconRight: 'ChevronPlain20',
                        variant: 'secondary',
                        label: w,
                        iconRightProps: {
                          style: {
                            transition: 'transform 0.2s ease-in-out',
                            transform: a ? 'rotate(180deg)' : 'rotate(0deg)',
                          },
                        },
                        onClick: () => y(!a),
                        'data-testid': 'select-market-trigger',
                      }),
                    }),
                  ],
                }),
                (0, i.tZ)(o.Ce2.Portal, {
                  children: (0, i.tZ)(o.Ce2.Content, {
                    side: u,
                    sideOffset: 2,
                    align: p,
                    width: 'min(600px, 90vw)',
                    children: (0, i.tZ)(o.Ce2.Table, {
                      maxHeight: 262,
                      data: x,
                      columnsDefs: Z,
                      columnWidths: ['53%', '190px'],
                      onRowClick: (e) => f(e.market.uniqueKey),
                    }),
                  }),
                }),
              ],
            });
      });
    },
    4407: function (e, t, r) {
      'use strict';
      r.d(t, {
        M: function () {
          return o;
        },
        n: function () {
          return a;
        },
      });
      var i = r(38819),
        l = r(54655);
      let o = (0, i.Z)(l.Kqy, { target: 'emgz5yv0' })('flex-direction:column;max-height:200px;'),
        a = (0, i.Z)(l.Kqy, { target: 'emgz5yv1' })(
          'width:240px;padding:4px ',
          (e) => {
            let { theme: t } = e;
            return t.spacing.s;
          },
          ';border-radius:8px;cursor:pointer;transition:background-color 0.15s;width:100%;&:hover{background-color:',
          (e) => {
            let { theme: t } = e;
            return t.colors.constant.dark;
          },
          ';}'
        );
    },
    85501: function (e, t, r) {
      'use strict';
      r.d(t, {
        T: function () {
          return d;
        },
      });
      var i = r(78286),
        l = r(58258),
        o = r(54655),
        a = r(6423),
        n = r(73478),
        s = r(4407),
        d = (0, l.memo)((e) => {
          let { vaults: t, emptyMessage: r, shouldOpenLinkInNewTab: l } = e;
          return (0, i.tZ)(o.xrM, {
            children: (0, i.tZ)(s.M, {
              children:
                0 === t.length
                  ? (0, i.tZ)(o.xvT.Body.S.Regular, { color: 'text.body', children: r })
                  : t.map((e) => {
                      let {
                          id: t,
                          vaultName: r,
                          address: d,
                          imageURI: c,
                          network: u,
                          vaultDeposit: v,
                        } = e,
                        p = (0, a.Q)({ chainName: u, vaultAddress: d, vaultName: r });
                      return (0, i.tZ)(
                        n.h,
                        {
                          href: p,
                          prefetch: !0,
                          shouldOpenLinkInNewTab: l,
                          children: (0, i.BX)(s.n, {
                            justify: 'space-between',
                            gap: 'xs',
                            align: 'center',
                            children: [
                              (0, i.BX)(o.Kqy, {
                                gap: 'xxs',
                                align: 'center',
                                children: [
                                  (0, i.tZ)(o.qEK, { src: c, size: 'small' }),
                                  (0, i.tZ)(o.xvT.Body.XXS.Regular, {
                                    shorten: 1,
                                    color: 'text.body',
                                    children: (0, o.Uaj)(r),
                                  }),
                                ],
                              }),
                              v &&
                                (0, i.tZ)(o.xvT.Body.XXS.Regular, {
                                  color: 'text.body',
                                  children: v,
                                }),
                            ],
                          }),
                        },
                        t
                      );
                    }),
            }),
          });
        });
    },
    12472: function (e, t, r) {
      'use strict';
      var i = r(78286),
        l = r(58258),
        o = r(4565),
        a = r(12556),
        n = r(54655),
        s = r(35047),
        d = r(55872),
        c = r(89991),
        u = r(9834),
        v = r(16820),
        p = r(6423),
        m = r(78017),
        h = r(30806);
      t.Z = (0, l.memo)((e) => {
        var t, r, g;
        let { initialPosition: y, finalPosition: f, vault: b } = e,
          { targetChain: x } = (0, c.Z_)(),
          Z = (0, l.useMemo)(() => (0, u.m)(b.allocation), [b.allocation]),
          w = (0, l.useMemo)(
            () => n.$0l.percent.digits(2).unit('%').of(b.dailyNetApy),
            [b.dailyNetApy]
          ),
          A = (0, l.useMemo)(
            () => ((0, s.isDefined)(b.warnings) ? (0, n.Myy)(b.warnings) : void 0),
            [b.warnings]
          ),
          P = (0, l.useMemo)(() => {
            let e = (0, n.Uaj)(b.name);
            return e ? (0, s.formatLongString)(e, 22) : '';
          }, [b.name]),
          k = (0, l.useMemo)(() => {
            if (b.dailyApy) return (0, o.safeParseNumber)(b.dailyApy);
          }, [b.dailyApy]),
          X = (0, l.useMemo)(() => {
            if (b.fee) return (0, o.safeParseNumber)(b.fee);
          }, [b.fee]);
        return (0, i.BX)(n.soA.Root, {
          width: '100%',
          height: '257px',
          children: [
            (0, i.BX)(n.soA.Header, {
              children: [
                (0, i.tZ)(n.qEK, { size: 'large', src: b.asset.logoURI }),
                (0, i.BX)(n.Kqy, {
                  direction: 'column',
                  gap: 'xs',
                  children: [
                    (0, i.tZ)(n.ZT$, { TextVariant: n.xvT.Title.XS, children: P }),
                    (0, i.BX)(n.Kqy, {
                      direction: 'row',
                      align: 'center',
                      gap: 4,
                      children: [
                        null === (t = b.curators) || void 0 === t
                          ? void 0
                          : t.map((e) =>
                              (0, i.tZ)(
                                n.Vp9,
                                {
                                  variant: 'main',
                                  label: e.name,
                                  startIcon: (0, i.tZ)(n.qEK, {
                                    src: e.image,
                                    size: 'small',
                                    style: { width: 16, height: 16 },
                                  }),
                                },
                                e.name
                              )
                            ),
                        (0, i.tZ)(h.x, {
                          tooltip: 'Open vault.',
                          href: (0, p.Q)({
                            chainName: a.FW.getNameById(x.id),
                            vaultAddress: b.address,
                            vaultName: b.name,
                          }),
                        }),
                      ],
                    }),
                  ],
                }),
              ],
            }),
            (0, i.BX)(n.soA.List, {
              children: [
                (0, i.tZ)(n.soA.ListItem, {
                  label: 'My Position ('.concat(
                    (0, s.formatLongString)(null !== (r = b.asset.symbol) && void 0 !== r ? r : ''),
                    ')'
                  ),
                  value: (0, i.tZ)(n.soA.ValueChange, {
                    initialProps: { value: y },
                    finalProps: { value: f },
                    formatter: (e) =>
                      (0, v.sL)({
                        price: b.asset.price,
                        amount: e,
                        decimals: b.asset.decimals,
                        withTrailingZero: !1,
                      }),
                  }),
                }),
                (0, i.tZ)(n.soA.ListItem, {
                  label: 'APY',
                  value: (0, i.BX)(n.Kqy, {
                    gap: 2,
                    direction: 'row',
                    align: 'center',
                    children: [
                      (0, i.tZ)(n.soA.Value, { value: w }),
                      (0, i.tZ)(m.w, {
                        RewardsHoverCardProps: {
                          performanceFee: X,
                          apy: k,
                          rewards: b.rewards,
                          points: null !== (g = b.points) && void 0 !== g ? g : [],
                          variant: 'vault',
                        },
                      }),
                    ],
                  }),
                }),
                (0, i.tZ)(n.soA.ListItem, {
                  label: 'Collateral Exposure',
                  value: (0, i.tZ)(d.m, {
                    align: 'right',
                    collateralExposures: Z,
                    extraInfo: (0, i.tZ)(n.aNP, { ...A }),
                    targetChainId: x.id,
                    maxTokensCount: 5,
                  }),
                }),
              ],
            }),
          ],
        });
      });
    },
    34896: function (e, t, r) {
      'use strict';
      r.d(t, {
        H: function () {
          return o;
        },
      });
      var i = r(45842),
        l = r(82803);
      let o = (e) => {
        switch (e.type) {
          case l.H.InterfaceOperationType.repay:
          case l.H.InterfaceOperationType.borrow:
          case l.H.InterfaceOperationType.metaMorphoDeposit:
          case l.H.InterfaceOperationType.metaMorphoWithdraw:
            return e.assets > 0n || e.shares > 0n;
          case l.H.InterfaceOperationType.withdrawCollateral:
          case l.H.InterfaceOperationType.supplyCollateral:
            return e.assets > 0n;
          case l.H.InterfaceOperationType.supplyCollateralBorrow:
          case l.H.InterfaceOperationType.withdrawCollateralRepay:
            return e.collateralAssets > 0n || e.loanAssets > 0n || e.loanShares > 0n;
          case l.H.InterfaceOperationType.zap:
            return e.collateralAssets > 0n && e.marketTo !== i.DR;
          case l.H.InterfaceOperationType.migrateSupply:
            return e.assets > 0n;
          case l.H.InterfaceOperationType.migrateBorrow:
            return e.collateralAssets > 0n;
          default:
            throw Error('Not implemented');
        }
      };
    },
    89805: function (e, t, r) {
      'use strict';
      r.d(t, {
        _: function () {
          return v;
        },
      });
      var i = r(58258),
        l = r(68612),
        o = r(40252),
        a = r(35047),
        n = r(51196),
        s = r(89991),
        d = r(34896),
        c = r(57054);
      let u = o.MathLib.MAX_UINT_160,
        v = function (e, t, r) {
          var v;
          let p = !(arguments.length > 3) || void 0 === arguments[3] || arguments[3],
            { account: m } = (0, s.Z_)(),
            h =
              null !== (v = null == m ? void 0 : m.address) && void 0 !== v
                ? v
                : '0x0000000000000000000000000000000000000001',
            g = (0, i.useMemo)(
              () =>
                p
                  ? e &&
                    (0, n.produceImmutable)(e, (e) => {
                      var t, r;
                      (0, a.keys)(e.tokens).forEach((t) => {
                        var r, i, a, n;
                        let s =
                          null !==
                            (n = (i =
                              null !== (a = (r = e.holdings)[h]) && void 0 !== a ? a : (r[h] = {}))[
                              t
                            ]) && void 0 !== n
                            ? n
                            : (i[t] = new o.Holding({
                                user: h,
                                token: t,
                                balance: 0n,
                                erc20Allowances: {
                                  morpho: 0n,
                                  permit2: 0n,
                                  'bundler3.generalAdapter1': l.zL,
                                },
                                permit2BundlerAllowance: { amount: 0n, expiration: 0n, nonce: 0n },
                              }));
                        (s.canTransfer = !0), (s.balance += u);
                      }),
                        (0, a.keys)(e.markets).forEach((t) => {
                          var r, i, l, a;
                          (null !==
                            (a = (i =
                              null !== (l = (r = e.positions)[h]) && void 0 !== l
                                ? l
                                : (r[h] = {}))[t]) &&
                            void 0 !== a) ||
                            (i[t] = new o.Position({
                              user: h,
                              marketId: t,
                              supplyShares: 0n,
                              borrowShares: 0n,
                              collateral: 0n,
                            }));
                        }),
                        (null !== (r = (t = e.users)[h]) && void 0 !== r) ||
                          (t[h] = new o.User({
                            address: h,
                            isBundlerAuthorized: !1,
                            morphoNonce: 0n,
                          }));
                    })
                  : e,
              [e, p, h]
            ),
            y = (0, i.useMemo)(() => ((0, d.H)(t) ? [t] : []), [t]),
            [f, b] = (0, c.b)(g, y, r, h),
            { steps: x, exceededToken: Z } = (0, i.useMemo)(() => {
              let e;
              return p
                ? {
                    steps:
                      h &&
                      (null == f
                        ? void 0
                        : f.map((r) =>
                            (0, n.produceImmutable)(r, (r) => {
                              var i;
                              let l = {};
                              (0, a.values)(
                                null !== (i = r.holdings[h]) && void 0 !== i ? i : {}
                              ).forEach((i) => {
                                if (!i) return;
                                let n = r.getBundleAssetBalances(
                                    h,
                                    i.token,
                                    o.DEFAULT_SLIPPAGE_TOLERANCE
                                  ),
                                  s = i.balance - u,
                                  { virtualFinalBalance: d, virtualDealtBalance: c } = (0,
                                  a.values)(null == n ? void 0 : n.allocations)
                                    .filter(a.isDefined)
                                    .reduce(
                                      (e, r) => {
                                        var i;
                                        let { type: l, srcAmount: o, dstAmount: a } = r;
                                        return (
                                          !(a > 0n) ||
                                            (null === (i = t.options.disabledPeripheralTokens) ||
                                            void 0 === i
                                              ? void 0
                                              : i.has(l)) ||
                                            ((e.virtualFinalBalance += a),
                                            (e.virtualDealtBalance += (u * a) / o)),
                                          e
                                        );
                                      },
                                      { virtualFinalBalance: 0n, virtualDealtBalance: 0n }
                                    ),
                                  v = r.tryGetToken(i.token);
                                d < c &&
                                  v &&
                                  (!e || (null == v ? void 0 : v.address) === o.NATIVE_ADDRESS) &&
                                  (e = new o.Token(v)),
                                  (l[i.token] = new o.Holding({
                                    ...i,
                                    balance: o.MathLib.max(0n, s),
                                  }));
                              }),
                                (r.holdings[h] = l);
                            })
                          )),
                    exceededToken: e,
                  }
                : { steps: f, exceededToken: void 0 };
            }, [t.options.disabledPeripheralTokens, p, h, f]);
          return [x, b, h, Z];
        };
    },
    52832: function (e, t, r) {
      'use strict';
      var i = r(78286),
        l = r(58258),
        o = r(54655);
      t.Z = (e, t) =>
        (0, l.useMemo)(
          () =>
            e
              ? (0, i.tZ)(o.xvT.Body.XXXS.Regular, { wordBreak: 'break-all', children: e })
              : t
                ? (0, i.tZ)(o.xvT.Body.XXXS.Regular, {
                    children: 'Please switch to the correct network',
                  })
                : void 0,
          [t, e]
        );
    },
    34550: function (e, t, r) {
      'use strict';
      var i = r(58258),
        l = r(3100);
      t.Z = (e, t, r, o, a, n, s, d, c, u, v) =>
        (0, i.useMemo)(
          () =>
            v
              ? ''.concat((0, l.Z)(e), ' disabled')
              : t
                ? 'Enter an amount'
                : u
                  ? 'Wrong network'
                  : !r && o
                    ? 'Editing'
                    : d && c
                      ? 'Could not fetch block'
                      : a ||
                        (s
                          ? s.message
                          : 0 !== n.length && (1 !== n.length || r)
                            ? 'Finalize bundle'
                            : 'Review '.concat(e)),
          [t, o, c, r, n.length, d, s, a, u, e, v]
        );
    },
    25596: function (e, t, r) {
      'use strict';
      r.d(t, {
        oP: function () {
          return n;
        },
      });
      var i = r(78286),
        l = r(58258),
        o = r(12556),
        a = r(54655);
      let n = (e) => {
        let { address: t, error: r, isWrongChain: i, chainId: a } = e,
          { isReadOnly: n, message: s } = (0, o.WW)({ chainId: a, address: t });
        return (0, l.useMemo)(
          () =>
            n
              ? { message: s, textProps: { whiteSpace: 'break-spaces' } }
              : r
                ? { message: r, textProps: { wordBreak: 'break-all' } }
                : i
                  ? { message: 'Please switch to the correct network', textProps: {} }
                  : void 0,
          [r, i, n, s]
        );
      };
      t.ZP = (e) => {
        let { address: t, error: r, isWrongChain: l, chainId: o } = e,
          s = n({ address: t, error: r, isWrongChain: l, chainId: o });
        if (s) return (0, i.tZ)(a.xvT.Body.XXXS.Regular, { ...s.textProps, children: s.message });
      };
    },
    39882: function (e, t, r) {
      'use strict';
      r.d(t, {
        t: function () {
          return o;
        },
      });
      var i = r(58258),
        l = r(35047);
      let o = (e) => {
        let { market: t, withSharedLiquidity: r } = e;
        return (0, i.useMemo)(() => {
          var e, i, o;
          if (!t) return;
          let a = [],
            n = [],
            s = [];
          n.push(t.uniqueKey), t.collateralAsset && a.push(t.collateralAsset.address);
          let d =
            null === (i = t.collateralAsset) || void 0 === i
              ? void 0
              : null === (e = i.vault) || void 0 === e
                ? void 0
                : e.address;
          return (
            (0, l.isDefined)(d) && s.push(d),
            a.push(t.loanAsset.address),
            r &&
              (null === (o = t.publicAllocatorSharedLiquidity) ||
                void 0 === o ||
                o.forEach((e) => {
                  var t;
                  s.push(e.vault.address),
                    null === (t = e.vault.publicAllocatorConfig) ||
                      void 0 === t ||
                      t.flowCaps.forEach((e) => {
                        var t;
                        n.push(e.market.uniqueKey),
                          a.push(e.market.loanAsset.address),
                          (null === (t = e.market.collateralAsset) || void 0 === t
                            ? void 0
                            : t.address) && a.push(e.market.collateralAsset.address);
                      });
                })),
            { tokens: a, marketIds: n, vaults: s }
          );
        }, [t, r]);
      };
    },
    76280: function (e, t, r) {
      'use strict';
      r.d(t, {
        q: function () {
          return l;
        },
      });
      var i = r(58258);
      let l = (e) =>
        (0, i.useMemo)(() => {
          if (!e) return;
          let t = [],
            r = [],
            i = [],
            { address: l, asset: o, state: a } = e;
          return (
            t.push(l),
            r.push(l, o.address),
            (null == a ? void 0 : a.allocation) &&
              a.allocation.forEach((e) => {
                var t;
                let { market: l } = e;
                i.push(l.uniqueKey);
                let o = null === (t = l.collateralAsset) || void 0 === t ? void 0 : t.address;
                o && r.push(o);
              }),
            { vaults: t, tokens: r, marketIds: i }
          );
        }, [e]);
    },
  },
  function (e) {
    e.O(
      0,
      [
        9913, 1811, 3960, 3261, 3173, 3248, 7287, 6929, 3391, 3515, 4516, 3613, 1594, 4655, 825,
        8205, 9255, 7567, 3214, 6269, 8577, 1744,
      ],
      function () {
        return e((e.s = 3699));
      }
    ),
      (_N_E = e.O());
  },
]);
