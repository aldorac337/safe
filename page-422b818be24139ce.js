try {
  let e =
      'undefined' != typeof window
        ? window
        : 'undefined' != typeof global
          ? global
          : 'undefined' != typeof globalThis
            ? globalThis
            : 'undefined' != typeof self
              ? self
              : {},
    t = new e.Error().stack;
  t &&
    ((e._sentryDebugIds = e._sentryDebugIds || {}),
    (e._sentryDebugIds[t] = '04ae3a19-20dc-4b0d-9fce-e73b065db507'),
    (e._sentryDebugIdIdentifier = 'sentry-dbid-04ae3a19-20dc-4b0d-9fce-e73b065db507'));
} catch (e) {}
(self.webpackChunk_N_E = self.webpackChunk_N_E || []).push([
  [705],
  {
    3699: function (e, t, i) {
      Promise.resolve().then(i.bind(i, 70836)),
        Promise.resolve().then(i.bind(i, 43609)),
        Promise.resolve().then(i.bind(i, 49482)),
        Promise.resolve().then(i.t.bind(i, 23293, 23)),
        Promise.resolve().then(i.bind(i, 9009)),
        Promise.resolve().then(i.bind(i, 30726)),
        Promise.resolve().then(i.bind(i, 95955)),
        Promise.resolve().then(i.bind(i, 59586)),
        Promise.resolve().then(i.bind(i, 68843)),
        Promise.resolve().then(i.bind(i, 1017)),
        Promise.resolve().then(i.bind(i, 87859)),
        Promise.resolve().then(i.bind(i, 61837)),
        Promise.resolve().then(i.bind(i, 71338)),
        Promise.resolve().then(i.bind(i, 38662)),
        Promise.resolve().then(i.bind(i, 87251)),
        Promise.resolve().then(i.bind(i, 84125)),
        Promise.resolve().then(i.bind(i, 16903)),
        Promise.resolve().then(i.bind(i, 40408)),
        Promise.resolve().then(i.bind(i, 10827)),
        Promise.resolve().then(i.bind(i, 48634)),
        Promise.resolve().then(i.bind(i, 95919)),
        Promise.resolve().then(i.bind(i, 15862)),
        Promise.resolve().then(i.bind(i, 14978)),
        Promise.resolve().then(i.bind(i, 62763)),
        Promise.resolve().then(i.bind(i, 71324)),
        Promise.resolve().then(i.bind(i, 66436)),
        Promise.resolve().then(i.bind(i, 53777)),
        Promise.resolve().then(i.bind(i, 17395)),
        Promise.resolve().then(i.bind(i, 67414)),
        Promise.resolve().then(i.bind(i, 17722)),
        Promise.resolve().then(i.bind(i, 19991)),
        Promise.resolve().then(i.bind(i, 80841)),
        Promise.resolve().then(i.bind(i, 31369)),
        Promise.resolve().then(i.bind(i, 45667)),
        Promise.resolve().then(i.bind(i, 60706)),
        Promise.resolve().then(i.bind(i, 71463)),
        Promise.resolve().then(i.bind(i, 24537)),
        Promise.resolve().then(i.bind(i, 40673)),
        Promise.resolve().then(i.bind(i, 40756)),
        Promise.resolve().then(i.bind(i, 36866)),
        Promise.resolve().then(i.bind(i, 2383)),
        Promise.resolve().then(i.bind(i, 63122)),
        Promise.resolve().then(i.bind(i, 47810)),
        Promise.resolve().then(i.bind(i, 14223)),
        Promise.resolve().then(i.bind(i, 43228)),
        Promise.resolve().then(i.bind(i, 35510)),
        Promise.resolve().then(i.bind(i, 24637)),
        Promise.resolve().then(i.bind(i, 7900)),
        Promise.resolve().then(i.bind(i, 42898)),
        Promise.resolve().then(i.bind(i, 78336)),
        Promise.resolve().then(i.bind(i, 15722)),
        Promise.resolve().then(i.bind(i, 70357)),
        Promise.resolve().then(i.bind(i, 99314)),
        Promise.resolve().then(i.bind(i, 72033)),
        Promise.resolve().then(i.bind(i, 30105)),
        Promise.resolve().then(i.bind(i, 91708)),
        Promise.resolve().then(i.bind(i, 84365)),
        Promise.resolve().then(i.bind(i, 66279)),
        Promise.resolve().then(i.bind(i, 67721)),
        Promise.resolve().then(i.bind(i, 19333)),
        Promise.resolve().then(i.bind(i, 43328)),
        Promise.resolve().then(i.bind(i, 52048)),
        Promise.resolve().then(i.bind(i, 23570)),
        Promise.resolve().then(i.bind(i, 18001)),
        Promise.resolve().then(i.bind(i, 63586)),
        Promise.resolve().then(i.bind(i, 35891)),
        Promise.resolve().then(i.bind(i, 5901)),
        Promise.resolve().then(i.bind(i, 56291)),
        Promise.resolve().then(i.bind(i, 68676)),
        Promise.resolve().then(i.bind(i, 51631)),
        Promise.resolve().then(i.bind(i, 37968)),
        Promise.resolve().then(i.bind(i, 98042)),
        Promise.resolve().then(i.bind(i, 34882)),
        Promise.resolve().then(i.bind(i, 45184)),
        Promise.resolve().then(i.bind(i, 30262)),
        Promise.resolve().then(i.bind(i, 78519)),
        Promise.resolve().then(i.bind(i, 71320)),
        Promise.resolve().then(i.bind(i, 46050)),
        Promise.resolve().then(i.bind(i, 87861)),
        Promise.resolve().then(i.bind(i, 64738)),
        Promise.resolve().then(i.bind(i, 58961)),
        Promise.resolve().then(i.bind(i, 87326)),
        Promise.resolve().then(i.bind(i, 6662)),
        Promise.resolve().then(i.bind(i, 29887)),
        Promise.resolve().then(i.bind(i, 56689)),
        Promise.resolve().then(i.bind(i, 4222)),
        Promise.resolve().then(i.bind(i, 40388)),
        Promise.resolve().then(i.bind(i, 70591)),
        Promise.resolve().then(i.bind(i, 41136)),
        Promise.resolve().then(i.bind(i, 28638)),
        Promise.resolve().then(i.bind(i, 56702)),
        Promise.resolve().then(i.bind(i, 94337)),
        Promise.resolve().then(i.bind(i, 16690)),
        Promise.resolve().then(i.bind(i, 93141));
    },
    70836: function (e, t, i) {
      'use strict';
      i.d(t, {
        default: function () {
          return tx;
        },
      });
      var r,
        a,
        l = i(78286),
        o = i(58258),
        n = i(54655),
        s = i(53863),
        d = i(55694),
        u = i(89991),
        c = i(70064),
        v = i(4565),
        m = i(12556),
        p = i(35047),
        g = i(78017),
        h = i(16820),
        y = i(47528),
        b = (0, o.memo)((e) => {
          var t, i, r, a, s, d, c, b, f, x, w, Z, A, P;
          let { position: k, onClick: B } = e,
            { targetChainId: X } = (0, u.Z_)(),
            T = (0, p.getValue)(k, 'lowestRateMarket'),
            M = (0, p.getValue)(k, 'migratablePosition'),
            C = (0, o.useMemo)(() => (0, m.wk)(T.collateralAsset), [T.collateralAsset]),
            S = (0, o.useMemo)(() => (0, m.wk)(T.loanAsset), [T.loanAsset]),
            R = m.FW.getProtocol({ name: M.protocol, chainId: X }),
            L = (0, y.H)(T),
            I = (0, n.$4C)({
              chainId: X,
              collateralAddress:
                null === (t = T.collateralAsset) || void 0 === t ? void 0 : t.address,
              uniqueKey: T.uniqueKey,
            }),
            q = (0, o.useMemo)(() => {
              var e;
              return (null === (e = T.state) || void 0 === e ? void 0 : e.dailyNetBorrowApy)
                ? (0, v.safeParseNumber)(T.state.dailyNetBorrowApy)
                : void 0;
            }, [null === (i = T.state) || void 0 === i ? void 0 : i.dailyNetBorrowApy]),
            K = (0, o.useMemo)(() => {
              var e;
              return (null === (e = T.state) || void 0 === e ? void 0 : e.fee)
                ? (0, v.safeParseNumber)(T.state.fee)
                : void 0;
            }, [null === (r = T.state) || void 0 === r ? void 0 : r.fee]),
            { collateralUsd: E, loanUsd: N } = (0, o.useMemo)(
              () => ({
                collateralUsd: null == C ? void 0 : C.toUsd(M.collateral),
                loanUsd: null == S ? void 0 : S.toUsd(M.borrow),
              }),
              [C, S, M.borrow, M.collateral]
            );
          return (0, l.BX)(n.Zbd, {
            direction: 'column',
            gap: 'm',
            padding: { base: 'm', s: 's' },
            width: '100%',
            children: [
              (0, l.BX)(n.Kqy, {
                direction: 'row',
                gap: 'xs',
                align: 'center',
                children: [
                  (0, l.tZ)(n.Pws, {
                    collateralAssetURI:
                      null === (a = T.collateralAsset) || void 0 === a ? void 0 : a.logoURI,
                    loanAssetURI: null === (s = T.loanAsset) || void 0 === s ? void 0 : s.logoURI,
                    size: 'big',
                  }),
                  (0, l.BX)(n.Kqy, {
                    direction: 'column',
                    flex: 1,
                    gap: 'xs',
                    children: [
                      (0, l.tZ)(n.xvT.Title.XS, {
                        children: (0, n.lAJ)({
                          loanAsset: T.loanAsset,
                          collateralAsset: T.collateralAsset,
                        }),
                      }),
                      (0, l.BX)(n.xvT.Body.S.Regular, {
                        color: 'text.secondary',
                        children: [R.name, ' Borrow'],
                      }),
                    ],
                  }),
                ],
              }),
              (0, l.BX)(n.Kqy, {
                direction: 'column',
                gap: 's',
                children: [
                  (0, l.BX)(n.Kqy, {
                    wrap: 'wrap',
                    gap: 's',
                    children: [
                      (0, l.BX)(n.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        background: 'background.tertiary',
                        align: 'center',
                        gap: 'xs',
                        minWidth: '232px',
                        flex: 1,
                        height: '88px',
                        children: [
                          (0, l.tZ)(n.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: 'Collateral',
                          }),
                          (0, l.BX)(n.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            align: 'center',
                            children: [
                              (0, l.tZ)(n.qEK, {
                                src:
                                  null === (d = T.collateralAsset) || void 0 === d
                                    ? void 0
                                    : d.logoURI,
                                style: { width: 20, height: 20 },
                                rounded: !0,
                              }),
                              (0, l.tZ)(n.xvT.Body.XS.Regular, {
                                children: (0, h.sL)({
                                  price:
                                    null !== (w = null == C ? void 0 : C.price) && void 0 !== w
                                      ? w
                                      : 0n,
                                  amount: M.collateral,
                                  decimals:
                                    null !== (Z = null == C ? void 0 : C.decimals) && void 0 !== Z
                                      ? Z
                                      : 18,
                                  withTrailingZero: !1,
                                  symbol: null == C ? void 0 : C.symbol,
                                }),
                              }),
                              (0, l.tZ)(n.Vp9, {
                                label: n.$0l.short
                                  .unit('$')
                                  .readable()
                                  .default('-')
                                  .digits(2)
                                  .of(E, 18),
                              }),
                            ],
                          }),
                        ],
                      }),
                      (0, l.BX)(n.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        background: 'background.tertiary',
                        align: 'center',
                        gap: 'xs',
                        minWidth: '232px',
                        flex: 1,
                        height: '88px',
                        children: [
                          (0, l.tZ)(n.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: 'Loan',
                          }),
                          (0, l.BX)(n.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            align: 'center',
                            children: [
                              (0, l.tZ)(n.qEK, {
                                src:
                                  null === (c = T.loanAsset) || void 0 === c ? void 0 : c.logoURI,
                                style: { width: 20, height: 20 },
                                rounded: !0,
                              }),
                              (0, l.tZ)(n.xvT.Body.XS.Regular, {
                                children: (0, h.sL)({
                                  price: (0, v.safeParseNumber)(
                                    null !==
                                      (A =
                                        null === (b = T.loanAsset) || void 0 === b
                                          ? void 0
                                          : b.priceUsd) && void 0 !== A
                                      ? A
                                      : 0
                                  ),
                                  amount: M.borrow,
                                  decimals:
                                    null !==
                                      (P =
                                        null === (f = T.loanAsset) || void 0 === f
                                          ? void 0
                                          : f.decimals) && void 0 !== P
                                      ? P
                                      : 18,
                                  withTrailingZero: !1,
                                  symbol:
                                    null === (x = T.loanAsset) || void 0 === x ? void 0 : x.symbol,
                                }),
                              }),
                              (0, l.tZ)(n.Vp9, {
                                label: n.$0l.short
                                  .unit('$')
                                  .readable()
                                  .default('-')
                                  .digits(2)
                                  .of(N, 18),
                              }),
                            ],
                          }),
                        ],
                      }),
                    ],
                  }),
                  (0, l.BX)(n.Kqy, {
                    wrap: 'wrap',
                    gap: 's',
                    children: [
                      (0, l.BX)(n.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        background: 'background.tertiary',
                        align: 'center',
                        gap: 'xs',
                        minWidth: '232px',
                        flex: 1,
                        height: '88px',
                        children: [
                          (0, l.BX)(n.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: [R.name, ' Rate'],
                          }),
                          (0, l.tZ)(n.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            children: (0, l.tZ)(n.xvT.Body.XS.Regular, {
                              children: n.$0l.percent
                                .unit('%')
                                .readable()
                                .default('-')
                                .digits(2)
                                .of(M.borrowApy),
                            }),
                          }),
                        ],
                      }),
                      (0, l.BX)(n.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        background: 'background.tertiary',
                        align: 'center',
                        gap: 'xs',
                        minWidth: '232px',
                        flex: 1,
                        height: '88px',
                        children: [
                          (0, l.tZ)(n.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: 'Morpho Borrow Rate',
                          }),
                          (0, l.BX)(n.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            children: [
                              (0, l.tZ)(n.xvT.Body.XS.Regular, {
                                children: n.$0l.percent
                                  .unit('%')
                                  .readable()
                                  .default('-')
                                  .digits(2)
                                  .of(q, 18),
                              }),
                              (0, l.tZ)(g.w, {
                                RewardsHoverCardProps: {
                                  performanceFee: K,
                                  apy: q,
                                  rewards: L,
                                  points: I,
                                  variant: 'vault',
                                },
                              }),
                            ],
                          }),
                        ],
                      }),
                    ],
                  }),
                ],
              }),
              (0, l.tZ)(n.zxk, {
                label: 'Migrate',
                size: 'big',
                onClick: B,
                'data-testid': 'borrow-migrate-button',
              }),
            ],
          });
        }),
        f = i(99971),
        x = i(82078),
        w = i(45090),
        Z = i(62239),
        A = i(9124),
        P = i(22683),
        k = i(34896),
        B = i(89805),
        X = i(75147),
        T = i(84030),
        M = i(52832),
        C = i(17965),
        S = i(40252),
        R = i(74006),
        L = i(725),
        I = i(82803),
        q = i(96278),
        K = i(76631),
        E = i(42847),
        N = i(77458),
        V = i(4205);
      let W = (e) => {
        let { marketId: t, position: i } = e,
          {
            operation: r,
            index: a,
            isNew: l,
            error: n,
          } = (0, o.useMemo)(
            () => ({
              isNew: !0,
              index: 0,
              operation: {
                id: crypto.randomUUID(),
                type: I.H.InterfaceOperationType.migrateBorrow,
                marketId: t,
                loanAssets: 0n,
                loanShares: 0n,
                collateralAssets: 0n,
                position: i,
                options: { isMax: [] },
              },
              error: void 0,
            }),
            [t, i]
          ),
          s = (0, V.f)(a),
          d = (0, V.f)(a + 1);
        return { operation: r, index: a, isNew: l, error: n, initialState: s, finalState: d };
      };
      ((r = a || (a = {})).InsufficientLiquidity = 'Insufficient liquidity'),
        (r.HighUtilization = 'High utilization'),
        (r.Liquidatable = 'Your position is at risk of liquidation'),
        (r.CloseToLTV = 'Close to LTV');
      let U = (e) => {
        var t, i, r, a, l, s;
        let { marketId: d, position: c, initialOperation: v } = e,
          { account: p, targetChainId: g } = (0, u.Z_)(),
          { publicAllocatorOptions: h } = (0, q.B)(),
          {
            operation: y,
            initialState: b,
            finalState: f,
            isNew: x,
          } = W({ marketId: d, position: c }),
          [w, Z] = (0, o.useState)(
            null !== (t = null == v ? void 0 : v.collateralAssets) && void 0 !== t
              ? t
              : y.collateralAssets
          ),
          [A, P] = (0, o.useState)(
            null !== (i = null == v ? void 0 : v.loanAssets) && void 0 !== i ? i : y.loanAssets
          ),
          [k, B] = (0, o.useState)(
            null !==
              (a =
                null !==
                  (r =
                    null == v
                      ? void 0
                      : v.options.isMax.includes(I.H.InterfaceOperationType.migrateSupply)) &&
                void 0 !== r
                  ? r
                  : y.options.isMax.includes(I.H.InterfaceOperationType.migrateSupply)) &&
              void 0 !== a &&
              a
          ),
          [X, T] = (0, o.useState)(
            null !==
              (s =
                null !==
                  (l =
                    null == v
                      ? void 0
                      : v.options.isMax.includes(I.H.InterfaceOperationType.migrateBorrow)) &&
                void 0 !== l
                  ? l
                  : y.options.isMax.includes(I.H.InterfaceOperationType.migrateBorrow)) &&
              void 0 !== s &&
              s
          ),
          M = (0, o.useMemo)(() => (null == c ? void 0 : c.migratablePosition.maxWithdraw), [c]),
          V = (0, o.useMemo)(() => {
            if (c) return c.migratablePosition.maxRepay;
          }, [c]),
          U = (0, N.Z)(
            p.isConnected,
            null == M ? void 0 : M.value,
            null == V ? void 0 : V.value,
            b.isFetchingAny || b.isPending
          ),
          D = (0, o.useMemo)(
            () => ({
              type: I.H.InterfaceOperationType.migrateBorrow,
              marketId: d,
              collateralAssets: w,
              loanAssets: A,
              loanShares: 0n,
              id: y.id,
              options: {
                isMax: [
                  ...(k ? [I.H.InterfaceOperationType.migrateSupply] : []),
                  ...(X ? [I.H.InterfaceOperationType.migrateBorrow] : []),
                ],
              },
              position: c,
            }),
            [w, A, y.id, k, X, d, c]
          ),
          H = (0, o.useMemo)(() => {
            if (c) return m.FW.getProtocol({ name: c.migratablePosition.protocol, chainId: g });
          }, [c, g]),
          O = (0, o.useMemo)(() => {
            var e, t;
            return null === (t = b.data) || void 0 === t
              ? void 0
              : null === (e = t.getMarketPublicReallocations(d, h).data.tryGetMarket(d)) ||
                  void 0 === e
                ? void 0
                : e.accrueInterest(b.data.block.timestamp);
          }, [b.data, d, h]),
          _ = (0, o.useMemo)(() => {
            var e;
            return (
              f &&
              d &&
              (null === (e = f.data) || void 0 === e
                ? void 0
                : e.getMarketPublicReallocations(d, h).data.tryGetMarket(d))
            );
          }, [f, d, h]),
          z = (0, o.useMemo)(() => {
            var e;
            if (b && p.address)
              return null === (e = b.data) || void 0 === e
                ? void 0
                : e.tryGetAccrualPosition(p.address, d);
          }, [b, p.address, d]),
          F = (0, E.z)({
            initialMarket: O,
            initialPosition: z,
            migratedBorrow: A,
            migratedCollateral: w,
            isNewMarket: !0,
          }),
          j = (0, L.B9)({ lltv: null == F ? void 0 : F.market.params.lltv, marketId: d }),
          $ = (0, o.useMemo)(() => {
            let e = null == F ? void 0 : F.ltv;
            if (e && j) return (0, m.M4)(e, j);
          }, [F, j]),
          G = (0, o.useMemo)(() => {
            let e = null == c ? void 0 : c.migratablePosition.getLtv({ withdrawn: w, repaid: A });
            if (
              e &&
              (null == c ? void 0 : c.migratablePosition.lltv) &&
              (0, m.M4)(e, c.migratablePosition.lltv)
            )
              return {
                level: C.WarningLevel.Red,
                message: 'Your position is at risk of liquidation',
                color: 'text.interactive.error',
              };
          }, [c, w, A]),
          Y = (0, o.useMemo)(() => {
            if (c && M && V && A > c.migratablePosition.maxRepay.value) {
              let e = n.$0l.commas
                .digits(2)
                .unit(c.migratablePosition.loanToken.symbol)
                .of(c.migratablePosition.maxRepay.value, c.migratablePosition.loanToken.decimals);
              switch (c.migratablePosition.maxRepay.limiter) {
                case R.BorrowMigrationLimiter.position:
                  return {
                    reason: R.BorrowMigrationLimiter.position,
                    message: 'Limited by balance: '.concat(e),
                    level: C.WarningLevel.Red,
                    color: 'text.interactive.error',
                  };
                case R.BorrowMigrationLimiter.repayPaused:
                  return {
                    reason: R.BorrowMigrationLimiter.repayPaused,
                    message: 'Repayment is paused',
                    level: C.WarningLevel.Red,
                    color: 'text.interactive.error',
                  };
              }
            }
          }, [A, M, V, c]),
          J = (0, o.useMemo)(() => {
            if (c && M && V && w > c.migratablePosition.maxWithdraw.value) {
              let e = n.$0l.commas
                .digits(2)
                .unit(c.migratablePosition.collateralToken.symbol)
                .of(
                  c.migratablePosition.maxWithdraw.value,
                  c.migratablePosition.collateralToken.decimals
                );
              switch (c.migratablePosition.maxWithdraw.limiter) {
                case R.SupplyMigrationLimiter.position:
                  return {
                    reason: R.SupplyMigrationLimiter.position,
                    message: 'Limited by balance: '.concat(e),
                    level: C.WarningLevel.Red,
                    color: 'text.interactive.error',
                  };
                case R.SupplyMigrationLimiter.borrowPaused:
                  return {
                    reason: R.SupplyMigrationLimiter.borrowPaused,
                    message: 'Borrowing is paused',
                    level: C.WarningLevel.Red,
                    color: 'text.interactive.error',
                  };
                case R.SupplyMigrationLimiter.liquidity:
                  return {
                    reason: R.SupplyMigrationLimiter.liquidity,
                    message: 'Limited by liquidity on '
                      .concat(null == H ? void 0 : H.name, ': ')
                      .concat(e),
                    level: C.WarningLevel.Red,
                    color: 'text.interactive.error',
                  };
                case R.SupplyMigrationLimiter.protocolCap:
                  return {
                    reason: R.SupplyMigrationLimiter.protocolCap,
                    message: 'Limited by protocol cap: '.concat(e),
                    level: C.WarningLevel.Red,
                    color: 'text.interactive.error',
                  };
                case R.SupplyMigrationLimiter.withdrawPaused:
                  return {
                    reason: R.SupplyMigrationLimiter.withdrawPaused,
                    message: 'Withdrawal is paused',
                    level: C.WarningLevel.Red,
                    color: 'text.interactive.error',
                  };
              }
            }
          }, [w, M, V, c, null == H ? void 0 : H.name]),
          Q = (0, o.useMemo)(() => {
            if (!F) return;
            let e = F.ltv;
            return (F && !F.isHealthy) || (e && j && e > j)
              ? {
                  level: C.WarningLevel.Red,
                  message: 'Your position is at risk of liquidation',
                  color: 'text.interactive.error',
                }
              : e && j && $
                ? {
                    level: C.WarningLevel.Yellow,
                    message: 'Close to LTV',
                    color: 'text.interactive.warning',
                  }
                : void 0;
          }, [F, j, $]),
          ee = (0, o.useMemo)(() => {
            if (_) {
              if (_.liquidity < 0n)
                return {
                  level: C.WarningLevel.Red,
                  message: 'Insufficient liquidity',
                  color: 'text.interactive.error',
                };
              if (_.utilization > S.AdaptiveCurveIrmLib.TARGET_UTILIZATION)
                return {
                  level: C.WarningLevel.Yellow,
                  message: 'High utilization',
                  color: 'text.interactive.warning',
                };
            }
          }, [_]),
          et = (0, o.useMemo)(() => {
            if (O && 0n !== D.loanAssets)
              return {
                collateralAmount: w,
                borrowAmount: D.loanAssets,
                marketTo: O.params,
                minSharePrice: S.MathLib.mulDivDown(
                  D.loanAssets,
                  S.MathLib.wToRay(S.MathLib.WAD - (0, K.Js)(null == O ? void 0 : O.rateAtTarget)),
                  O.toBorrowShares(D.loanAssets)
                ),
              };
          }, [O, D.loanAssets, w]),
          ei = (0, o.useMemo)(() => {
            if (c && et && !Y && !J && !Q && !ee)
              return c.migratablePosition.getMigrationTx(
                et,
                !p.isContract && !!(null == H ? void 0 : H.supportSignature)
              );
          }, [et, c, p.isContract, null == H ? void 0 : H.supportSignature, Y, J, Q, ee]),
          er = (0, o.useCallback)((e) => {
            B(!1), Z(e);
          }, []),
          ea = (0, o.useCallback)((e) => {
            T(!1), P(e);
          }, []),
          el = (0, o.useCallback)(
            (e) => {
              if (e) {
                if ((null == M ? void 0 : M.value) == null) return;
                Z(M.value);
              }
              B(e);
            },
            [null == M ? void 0 : M.value]
          ),
          eo = (0, o.useCallback)(
            (e) => {
              if (e) {
                if ((null == V ? void 0 : V.value) == null) return;
                P(V.value);
              }
              T(e);
            },
            [null == V ? void 0 : V.value]
          );
        return {
          collateralAssets: w,
          loanAssets: A,
          isMaxCollateral: k,
          isMaxLoan: X,
          args: et,
          bundle: ei,
          localOperation: D,
          isLoading: U,
          maxCollateral: M,
          maxLoan: V,
          initialState: b,
          previewedPosition: F,
          isNew: x,
          errors: (0, o.useMemo)(() => {
            var e, t, i, r, a;
            return {
              message:
                null !==
                  (a =
                    null !==
                      (r =
                        null !==
                          (i =
                            null !==
                              (t =
                                null !== (e = null == Y ? void 0 : Y.message) && void 0 !== e
                                  ? e
                                  : null == J
                                    ? void 0
                                    : J.message) && void 0 !== t
                              ? t
                              : null == Q
                                ? void 0
                                : Q.message) && void 0 !== i
                          ? i
                          : null == ee
                            ? void 0
                            : ee.message) && void 0 !== r
                      ? r
                      : null == G
                        ? void 0
                        : G.message) && void 0 !== a
                  ? a
                  : void 0,
              borrowInputError: Y,
              collateralInputError: J,
              ltvError: Q,
              liquidityError: ee,
              migratablePositionLtvError: G,
            };
          }, [Y, J, Q, ee, G]),
          setInputCollateralAmount: er,
          setInputLoanAmount: ea,
          setIsMaxCollateral: el,
          setIsMaxLoan: eo,
        };
      };
      var D = i(34550),
        H = i(39882),
        O = (0, o.memo)((e) => {
          var t, i, r, a;
          let { protocolPosition: s, operation: d, errors: c } = e,
            { targetChainId: v } = (0, u.Z_)(),
            { migratablePosition: g, lowestRateMarket: y } = s,
            b = m.FW.getProtocol({ name: g.protocol, chainId: v }),
            f = (0, o.useMemo)(() => (0, m.wk)(y.loanAsset), [y.loanAsset]),
            x = (0, o.useMemo)(() => (0, m.wk)(y.collateralAsset), [y.collateralAsset]),
            w = (0, o.useMemo)(
              () => n.$0l.percent.digits(2).unit('%').of(g.borrowApy),
              [g.borrowApy]
            ),
            Z = (0, o.useMemo)(() => g.getLtv(), [g]),
            A = (0, o.useMemo)(
              () =>
                d.collateralAssets === g.collateral && d.loanAssets === g.borrow
                  ? 0n
                  : g.getLtv({ withdrawn: d.collateralAssets, repaid: d.loanAssets }),
              [g, d.collateralAssets, d.loanAssets]
            ),
            P = (0, o.useMemo)(() => !!Z && (0, m.M4)(Z, g.lltv), [Z, g.lltv]);
          return (0, l.BX)(n.soA.Root, {
            width: '100%',
            height: '304px',
            children: [
              (0, l.BX)(n.soA.Header, {
                children: [
                  (0, l.tZ)(n.qEK, { size: 'large', src: b.imageSrc }),
                  (0, l.tZ)(n.Kqy, {
                    direction: 'column',
                    gap: 'xs',
                    children: (0, l.tZ)(n.xvT.Title.XS, { children: b.name }),
                  }),
                ],
              }),
              (0, l.BX)(n.soA.List, {
                children: [
                  (0, l.tZ)(n.soA.ListItem, {
                    warning: null == c ? void 0 : c.collateralError,
                    label: 'Collateral ('.concat(
                      (0, p.formatLongString)(
                        null !== (i = null == x ? void 0 : x.symbol) && void 0 !== i ? i : '',
                        15
                      ),
                      ')'
                    ),
                    value: (0, l.tZ)(n.soA.ValueChange, {
                      initialProps: { value: g.collateral },
                      finalProps: { value: g.collateral - d.collateralAssets },
                      formatter: (e) => {
                        var t;
                        return (0, h.sL)({
                          price: null == x ? void 0 : x.price,
                          amount: e,
                          decimals:
                            null !== (t = null == x ? void 0 : x.decimals) && void 0 !== t ? t : 18,
                          withTrailingZero: !1,
                        });
                      },
                    }),
                  }),
                  (0, l.tZ)(n.soA.ListItem, {
                    warning: null == c ? void 0 : c.loanError,
                    label: 'Loan ('.concat(
                      (0, p.formatLongString)(
                        null !== (r = null == f ? void 0 : f.symbol) && void 0 !== r ? r : '',
                        15
                      ),
                      ')'
                    ),
                    value: (0, l.tZ)(n.soA.ValueChange, {
                      initialProps: { value: g.borrow },
                      finalProps: { value: g.borrow - d.loanAssets },
                      formatter: (e) => {
                        var t;
                        return (0, h.sL)({
                          price: null == f ? void 0 : f.price,
                          amount: e,
                          decimals:
                            null !== (t = null == f ? void 0 : f.decimals) && void 0 !== t ? t : 18,
                          withTrailingZero: !1,
                        });
                      },
                    }),
                  }),
                  (0, l.tZ)(n.soA.ListItem, {
                    warning: null == c ? void 0 : c.ltvError,
                    label: 'LTV / Liq. LTV',
                    value: (0, l.BX)(n.Kqy, {
                      direction: 'row',
                      align: 'center',
                      gap: '2px',
                      children: [
                        (0, l.tZ)(n.soA.ValueChange, {
                          initialProps: {
                            value: Z,
                            typographyProps: { color: P ? 'text.interactive.error' : void 0 },
                          },
                          finalProps: {
                            value: A,
                            typographyProps: {
                              color:
                                null !==
                                  (a =
                                    null == c
                                      ? void 0
                                      : null === (t = c.ltvError) || void 0 === t
                                        ? void 0
                                        : t.color) && void 0 !== a
                                  ? a
                                  : 'text.body',
                            },
                          },
                          formatter: (e) => n.$0l.percent.unit('%').digits(2).max(1).of(e, 18),
                        }),
                        (0, l.tZ)(n.xvT.Body.XS.Regular, {
                          display: 'flex',
                          alignItems: 'center',
                          lineHeight: 'normal',
                          gap: '2px',
                          children: (0, l.BX)(n.xvT.Inherit, {
                            children: [' / ', n.$0l.percent.unit('%').digits(2).of(g.lltv, 18)],
                          }),
                        }),
                      ],
                    }),
                  }),
                  (0, l.tZ)(n.soA.ListItem, {
                    label: 'Rate',
                    value: (0, l.tZ)(n.soA.Value, { value: w }),
                  }),
                ],
              }),
            ],
          });
        });
      let _ = (e) => {
        var t, i, r, a, d;
        let { position: v, initialOperation: g } = e,
          h = (0, n.CPt)(),
          { lowestRateMarket: b, compatibleMarkets: C } = v,
          {
            bundlerConfiguration: S,
            simulationError: R,
            isPending: L,
            blockError: I,
            config: { addToSimulationState: q },
          } = (0, P.N)(),
          { setActiveBundle: K } = (0, X.H)(),
          { toggleDialog: E } = (0, n.DAv)(),
          { account: N, targetChainId: V } = (0, u.Z_)(),
          [W, z] = (0, o.useState)(!1),
          [F, j] = (0, o.useState)(
            null !==
              (d =
                null !== (a = null == g ? void 0 : g.marketId) && void 0 !== a
                  ? a
                  : null === (t = C[0]) || void 0 === t
                    ? void 0
                    : t.uniqueKey) && void 0 !== d
              ? d
              : b.uniqueKey
          ),
          $ = (0, o.useMemo)(() => C.find((e) => e.uniqueKey === F), [C, F]),
          G = (0, H.t)({ market: $, withSharedLiquidity: !0 }),
          Y = (0, o.useMemo)(() => (0, m.wk)(null == $ ? void 0 : $.loanAsset), [$]),
          J = (0, o.useMemo)(() => (0, m.wk)(null == $ ? void 0 : $.collateralAsset), [$]),
          {
            localOperation: Q,
            errors: ee,
            collateralAssets: et,
            loanAssets: ei,
            maxCollateral: er,
            maxLoan: ea,
            isMaxCollateral: el,
            isMaxLoan: eo,
            isLoading: en,
            previewedPosition: es,
            initialState: ed,
            bundle: eu,
            isNew: ec,
            setInputCollateralAmount: ev,
            setInputLoanAmount: em,
            setIsMaxCollateral: ep,
            setIsMaxLoan: eg,
          } = U({ marketId: F, position: v, initialOperation: g }),
          [eh] = (0, B._)(ed.data, Q, S, ec),
          ey = (0, M.Z)(ee.message, N.isWrongChain),
          { initialData: eb, finalData: ef } = (0, T.Z)(F, N.address, eh),
          ex = (0, D.Z)(
            'migration',
            0n === et || 0n === ei,
            !0,
            !0,
            ee.message,
            [],
            R,
            I,
            L || !(0, p.isDefined)(eb.market),
            N.isWrongChain,
            !1
          ),
          ew = (0, o.useMemo)(
            () =>
              (null == $ ? void 0 : $.oracleAddress)
                ? { address: $.oracleAddress, ...$.oracleFeed }
                : void 0,
            [$]
          ),
          eZ = (0, y.H)($),
          eA = (0, o.useMemo)(
            () =>
              (I && L) ||
              !!ee.message ||
              !!R ||
              !(0, k.H)(Q) ||
              N.isWrongChain ||
              !(0, p.isDefined)(eb.market),
            [I, L, ee.message, R, Q, N.isWrongChain, eb.market]
          ),
          eP = (0, o.useCallback)(() => {
            E(!1);
          }, [E]),
          ek = (0, o.useCallback)(() => {
            E(
              (0, l.tZ)(f.sG, {
                operations: [Q],
                headerActionSlot: (0, l.tZ)(n.zxk, {
                  variant: 'ghost',
                  iconRight: 'EditPlain20',
                  label: 'Edit migration',
                  onClick: () => {
                    E(
                      (0, l.tZ)(c.Z, {
                        fallback: (0, l.tZ)(s.c, {}),
                        children: (0, l.tZ)(_, {
                          'data-testid': 'migration-dialog',
                          position: v,
                          initialOperation: Q,
                        }),
                      }),
                      { maxWidth: h ? void 0 : '900px', fullSize: h }
                    );
                  },
                }),
                onConfirm: () => {
                  (null == eu ? void 0 : eu.actions) &&
                    (K(eu, [Q]), E((0, l.tZ)(x.h, {}), { closable: !1 }));
                },
              })
            );
          }, [Q, eu, E, K, h, v]),
          eB = (0, o.useCallback)(
            (e) => {
              j(e), z(!1), ev(0n), em(0n), ep(!1), eg(!1);
            },
            [j, z, ev, em, ep, eg]
          );
        return (
          (0, o.useEffect)(() => {
            q(G);
          }, [G, q]),
          (0, l.tZ)(Z.Do, {
            title: 'Migrate Position',
            size: 'small',
            topSlot: (0, l.tZ)(l.HY, {
              children: $
                ? (0, l.tZ)(n.Kqy, {
                    direction: 'row',
                    width: 'fit-content',
                    align: 'center',
                    children: (0, l.tZ)(A.K, {
                      side: 'bottom',
                      align: 'start',
                      isOpen: W,
                      markets: null != C ? C : [],
                      selectedMarket: $,
                      isLoading: en,
                      onOpenChange: z,
                      onSelect: eB,
                      buttonLabel: 'Select Morpho Market',
                    }),
                  })
                : (0, l.tZ)(n.OdW, { width: 'full', height: '59px', borderRadius: '20px' }),
            }),
            inputSlots: [
              J &&
                (0, l.tZ)(
                  n.TGk,
                  {
                    fullWidth: !0,
                    token: J,
                    amount: et,
                    onChange: ev,
                    header: 'Collateral to migrate',
                    maxValue: null == er ? void 0 : er.value,
                    loading: en,
                    onMaxClick: ep,
                    isMax: el,
                    disabled: en,
                  },
                  null == J ? void 0 : J.address
                ),
              Y &&
                (0, l.tZ)(
                  n.TGk,
                  {
                    fullWidth: !0,
                    token: Y,
                    amount: ei,
                    onChange: em,
                    header: 'Loan to migrate',
                    maxValue: null == ea ? void 0 : ea.value,
                    loading: en,
                    onMaxClick: eg,
                    isMax: eo,
                    disabled: en,
                  },
                  null == Y ? void 0 : Y.address
                ),
            ],
            initialPositionSlot: (0, l.tZ)(O, {
              protocolPosition: v,
              operation: Q,
              errors: {
                loanError: ee.borrowInputError,
                collateralError: ee.collateralInputError,
                ltvError: ee.migratablePositionLtvError,
              },
            }),
            finalPositionSlot: (0, l.tZ)(w.F, {
              chainId: V,
              market: {
                uniqueKey: F,
                collateralToken: J,
                loanToken: Y,
                oracle: ew,
                warnings: null == $ ? void 0 : $.warnings,
                rewards: eZ,
                dailyBorrowApy:
                  null == $
                    ? void 0
                    : null === (i = $.state) || void 0 === i
                      ? void 0
                      : i.dailyBorrowApy,
                dailyNetBorrowApy:
                  null == $
                    ? void 0
                    : null === (r = $.state) || void 0 === r
                      ? void 0
                      : r.dailyNetBorrowApy,
              },
              state: {
                initialMarketData: eb.market,
                finalMarketData: ef.market,
                initialPosition: eb.position,
                finalPosition: ef.position,
                previewedMarket: null == es ? void 0 : es.market,
                previewedPosition: es,
              },
              errors: { liquidityError: ee.liquidityError, ltvError: ee.ltvError },
            }),
            actionSlot: (0, l.tZ)(n.ua7, {
              content: ey,
              disabled: !ey,
              children: (0, l.tZ)(n.zxk, {
                size: 'big',
                variant: eA ? 'secondary' : 'primary',
                label: ex,
                disabled: eA || !(0, p.isDefined)(eb.market),
                onClick: ek,
                shortenByWidth: 300,
                loading: en,
                'data-testid': 'finalize-button',
              }),
            }),
            onClose: eP,
          })
        );
      };
      var z = (0, o.memo)(_),
        F = i(95284),
        j = i(88),
        $ = i(38819);
      let G = (0, $.Z)('div', { target: 'evxx7d0' })(
        'display:grid;grid-template-columns:repeat(2,1fr);gap:',
        (e) => {
          let { theme: t } = e;
          return t.spacing.m;
        },
        ';',
        (e) => {
          let { theme: t } = e;
          return t.breakpoints.containerDown('content-s');
        },
        '{grid-template-columns:repeat(1,1fr);}'
      );
      var Y = i(31040),
        J = i(77762),
        Q = i(59528),
        ee = i(50488),
        et = i(60174),
        ei = i(25205),
        er = i(98255),
        ea = i(6925),
        el = i(9454),
        eo = i(2547),
        en = i(50256),
        es = 'Collapsible',
        [ed, eu] = (0, J.b)(es),
        [ec, ev] = ed(es),
        em = o.forwardRef((e, t) => {
          let {
              __scopeCollapsible: i,
              open: r,
              defaultOpen: a,
              disabled: l,
              onOpenChange: n,
              ...s
            } = e,
            [d, u] = (0, ei.T)({ prop: r, defaultProp: null != a && a, onChange: n, caller: es });
          return (0, en.jsx)(ec, {
            scope: i,
            disabled: l,
            contentId: (0, eo.M)(),
            open: d,
            onOpenToggle: o.useCallback(() => u((e) => !e), [u]),
            children: (0, en.jsx)(er.WV.div, {
              'data-state': ef(d),
              'data-disabled': l ? '' : void 0,
              ...s,
              ref: t,
            }),
          });
        });
      em.displayName = es;
      var ep = 'CollapsibleTrigger',
        eg = o.forwardRef((e, t) => {
          let { __scopeCollapsible: i, ...r } = e,
            a = ev(ep, i);
          return (0, en.jsx)(er.WV.button, {
            type: 'button',
            'aria-controls': a.contentId,
            'aria-expanded': a.open || !1,
            'data-state': ef(a.open),
            'data-disabled': a.disabled ? '' : void 0,
            disabled: a.disabled,
            ...r,
            ref: t,
            onClick: (0, et.M)(e.onClick, a.onOpenToggle),
          });
        });
      eg.displayName = ep;
      var eh = 'CollapsibleContent',
        ey = o.forwardRef((e, t) => {
          let { forceMount: i, ...r } = e,
            a = ev(eh, e.__scopeCollapsible);
          return (0, en.jsx)(el.z, {
            present: i || a.open,
            children: (e) => {
              let { present: i } = e;
              return (0, en.jsx)(eb, { ...r, ref: t, present: i });
            },
          });
        });
      ey.displayName = eh;
      var eb = o.forwardRef((e, t) => {
        let { __scopeCollapsible: i, present: r, children: a, ...l } = e,
          n = ev(eh, i),
          [s, d] = o.useState(r),
          u = o.useRef(null),
          c = (0, ee.e)(t, u),
          v = o.useRef(0),
          m = v.current,
          p = o.useRef(0),
          g = p.current,
          h = n.open || s,
          y = o.useRef(h),
          b = o.useRef(void 0);
        return (
          o.useEffect(() => {
            let e = requestAnimationFrame(() => (y.current = !1));
            return () => cancelAnimationFrame(e);
          }, []),
          (0, ea.b)(() => {
            let e = u.current;
            if (e) {
              (b.current = b.current || {
                transitionDuration: e.style.transitionDuration,
                animationName: e.style.animationName,
              }),
                (e.style.transitionDuration = '0s'),
                (e.style.animationName = 'none');
              let t = e.getBoundingClientRect();
              (v.current = t.height),
                (p.current = t.width),
                y.current ||
                  ((e.style.transitionDuration = b.current.transitionDuration),
                  (e.style.animationName = b.current.animationName)),
                d(r);
            }
          }, [n.open, r]),
          (0, en.jsx)(er.WV.div, {
            'data-state': ef(n.open),
            'data-disabled': n.disabled ? '' : void 0,
            id: n.contentId,
            hidden: !h,
            ...l,
            ref: c,
            style: {
              '--radix-collapsible-content-height': m ? ''.concat(m, 'px') : void 0,
              '--radix-collapsible-content-width': g ? ''.concat(g, 'px') : void 0,
              ...e.style,
            },
            children: h && a,
          })
        );
      });
      function ef(e) {
        return e ? 'open' : 'closed';
      }
      var ex = i(79395),
        ew = 'Accordion',
        eZ = ['Home', 'End', 'ArrowDown', 'ArrowUp', 'ArrowLeft', 'ArrowRight'],
        [eA, eP, ek] = (0, Q.B)(ew),
        [eB, eX] = (0, J.b)(ew, [ek, eu]),
        eT = eu(),
        eM = o.forwardRef((e, t) => {
          let { type: i, ...r } = e;
          return (0, en.jsx)(eA.Provider, {
            scope: e.__scopeAccordion,
            children:
              'multiple' === i
                ? (0, en.jsx)(eq, { ...r, ref: t })
                : (0, en.jsx)(eI, { ...r, ref: t }),
          });
        });
      eM.displayName = ew;
      var [eC, eS] = eB(ew),
        [eR, eL] = eB(ew, { collapsible: !1 }),
        eI = o.forwardRef((e, t) => {
          let {
              value: i,
              defaultValue: r,
              onValueChange: a = () => {},
              collapsible: l = !1,
              ...n
            } = e,
            [s, d] = (0, ei.T)({
              prop: i,
              defaultProp: null != r ? r : '',
              onChange: a,
              caller: ew,
            });
          return (0, en.jsx)(eC, {
            scope: e.__scopeAccordion,
            value: o.useMemo(() => (s ? [s] : []), [s]),
            onItemOpen: d,
            onItemClose: o.useCallback(() => l && d(''), [l, d]),
            children: (0, en.jsx)(eR, {
              scope: e.__scopeAccordion,
              collapsible: l,
              children: (0, en.jsx)(eN, { ...n, ref: t }),
            }),
          });
        }),
        eq = o.forwardRef((e, t) => {
          let { value: i, defaultValue: r, onValueChange: a = () => {}, ...l } = e,
            [n, s] = (0, ei.T)({
              prop: i,
              defaultProp: null != r ? r : [],
              onChange: a,
              caller: ew,
            }),
            d = o.useCallback(
              (e) =>
                s(function () {
                  let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                  return [...t, e];
                }),
              [s]
            ),
            u = o.useCallback(
              (e) =>
                s(function () {
                  let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                  return t.filter((t) => t !== e);
                }),
              [s]
            );
          return (0, en.jsx)(eC, {
            scope: e.__scopeAccordion,
            value: n,
            onItemOpen: d,
            onItemClose: u,
            children: (0, en.jsx)(eR, {
              scope: e.__scopeAccordion,
              collapsible: !0,
              children: (0, en.jsx)(eN, { ...l, ref: t }),
            }),
          });
        }),
        [eK, eE] = eB(ew),
        eN = o.forwardRef((e, t) => {
          let { __scopeAccordion: i, disabled: r, dir: a, orientation: l = 'vertical', ...n } = e,
            s = o.useRef(null),
            d = (0, ee.e)(s, t),
            u = eP(i),
            c = 'ltr' === (0, ex.gm)(a),
            v = (0, et.M)(e.onKeyDown, (e) => {
              var t;
              if (!eZ.includes(e.key)) return;
              let i = e.target,
                r = u().filter((e) => {
                  var t;
                  return !(null === (t = e.ref.current) || void 0 === t ? void 0 : t.disabled);
                }),
                a = r.findIndex((e) => e.ref.current === i),
                o = r.length;
              if (-1 === a) return;
              e.preventDefault();
              let n = a,
                s = o - 1,
                d = () => {
                  (n = a + 1) > s && (n = 0);
                },
                v = () => {
                  (n = a - 1) < 0 && (n = s);
                };
              switch (e.key) {
                case 'Home':
                  n = 0;
                  break;
                case 'End':
                  n = s;
                  break;
                case 'ArrowRight':
                  'horizontal' === l && (c ? d() : v());
                  break;
                case 'ArrowDown':
                  'vertical' === l && d();
                  break;
                case 'ArrowLeft':
                  'horizontal' === l && (c ? v() : d());
                  break;
                case 'ArrowUp':
                  'vertical' === l && v();
              }
              null === (t = r[n % o].ref.current) || void 0 === t || t.focus();
            });
          return (0, en.jsx)(eK, {
            scope: i,
            disabled: r,
            direction: a,
            orientation: l,
            children: (0, en.jsx)(eA.Slot, {
              scope: i,
              children: (0, en.jsx)(er.WV.div, {
                ...n,
                'data-orientation': l,
                ref: d,
                onKeyDown: r ? void 0 : v,
              }),
            }),
          });
        }),
        eV = 'AccordionItem',
        [eW, eU] = eB(eV),
        eD = o.forwardRef((e, t) => {
          let { __scopeAccordion: i, value: r, ...a } = e,
            l = eE(eV, i),
            o = eS(eV, i),
            n = eT(i),
            s = (0, eo.M)(),
            d = (r && o.value.includes(r)) || !1,
            u = l.disabled || e.disabled;
          return (0, en.jsx)(eW, {
            scope: i,
            open: d,
            disabled: u,
            triggerId: s,
            children: (0, en.jsx)(em, {
              'data-orientation': l.orientation,
              'data-state': e$(d),
              ...n,
              ...a,
              ref: t,
              disabled: u,
              open: d,
              onOpenChange: (e) => {
                e ? o.onItemOpen(r) : o.onItemClose(r);
              },
            }),
          });
        });
      eD.displayName = eV;
      var eH = 'AccordionHeader',
        eO = o.forwardRef((e, t) => {
          let { __scopeAccordion: i, ...r } = e,
            a = eE(ew, i),
            l = eU(eH, i);
          return (0, en.jsx)(er.WV.h3, {
            'data-orientation': a.orientation,
            'data-state': e$(l.open),
            'data-disabled': l.disabled ? '' : void 0,
            ...r,
            ref: t,
          });
        });
      eO.displayName = eH;
      var e_ = 'AccordionTrigger',
        ez = o.forwardRef((e, t) => {
          let { __scopeAccordion: i, ...r } = e,
            a = eE(ew, i),
            l = eU(e_, i),
            o = eL(e_, i),
            n = eT(i);
          return (0, en.jsx)(eA.ItemSlot, {
            scope: i,
            children: (0, en.jsx)(eg, {
              'aria-disabled': (l.open && !o.collapsible) || void 0,
              'data-orientation': a.orientation,
              id: l.triggerId,
              ...n,
              ...r,
              ref: t,
            }),
          });
        });
      ez.displayName = e_;
      var eF = 'AccordionContent',
        ej = o.forwardRef((e, t) => {
          let { __scopeAccordion: i, ...r } = e,
            a = eE(ew, i),
            l = eU(eF, i),
            o = eT(i);
          return (0, en.jsx)(ey, {
            role: 'region',
            'aria-labelledby': l.triggerId,
            'data-orientation': a.orientation,
            ...o,
            ...r,
            ref: t,
            style: {
              '--radix-accordion-content-height': 'var(--radix-collapsible-content-height)',
              '--radix-accordion-content-width': 'var(--radix-collapsible-content-width)',
              ...e.style,
            },
          });
        });
      function e$(e) {
        return e ? 'open' : 'closed';
      }
      ej.displayName = eF;
      var eG = i(72280),
        eY = i(23567);
      let eJ = (0, eY.F4)(
          'from{height:0;opacity:0;}to{height:var(--radix-accordion-content-height);opacity:1;}'
        ),
        eQ = (0, eY.F4)(
          'from{height:var(--radix-accordion-content-height);opacity:1;}to{height:0;opacity:0;}'
        ),
        e0 = (0, $.Z)(eO, { target: 'e10apxyx0' })('all:unset;display:flex;'),
        e2 = (0, $.Z)(ez, { target: 'e10apxyx1' })(
          'all:unset;width:100%;display:flex;justify-content:space-between;align-items:center;cursor:pointer;'
        ),
        e1 = (0, $.Z)(ej, { target: 'e10apxyx2' })(
          'overflow:hidden;&[data-state="open"]{animation:',
          eJ,
          ' 300ms ease-out forwards;padding-bottom:62px;}&[data-state="closed"]{animation:',
          eQ,
          ' 300ms ease-in forwards;}'
        ),
        e5 = (0, $.Z)('div', { shouldForwardProp: (e) => 'open' !== e, target: 'e10apxyx3' })(
          'margin-left:16px;color:',
          (e) => {
            let { theme: t } = e;
            return t.colors.text.secondary;
          },
          ';transition:transform 300ms ease;transform:',
          (e) => {
            let { open: t } = e;
            return t ? 'rotate(0deg)' : 'rotate(-90deg)';
          },
          ';'
        ),
        e8 = (0, o.forwardRef)((e, t) => {
          let { children: i, isOpen: r, ...a } = e,
            [n, s] = (0, o.useState)(!1);
          return (0, l.tZ)(e0, {
            children: (0, l.BX)(e2, {
              ...a,
              ref: t,
              'data-testid': 'protocol-accordion',
              onClick: () => s(!n),
              children: [
                i,
                (0, l.tZ)(e5, { open: n, children: (0, l.tZ)(eG.v4q, { width: 24, height: 24 }) }),
              ],
            }),
          });
        });
      e8.displayName = 'AccordionTrigger';
      let e3 = (0, o.forwardRef)((e, t) => {
        let { children: i, ...r } = e;
        return (0, l.tZ)(e1, { ...r, ref: t, children: i });
      });
      e3.displayName = 'AccordionContent';
      var e4 = (0, o.memo)((e) => {
          let { migratableProtocol: t, positions: i, children: r } = e,
            { targetChainId: a } = (0, u.Z_)(),
            s = (0, n.dD4)(),
            d = m.FW.getProtocol({ chainId: a, name: t }),
            c = (0, o.useMemo)(() => {
              let e = 0n;
              return (
                i.forEach((t) => {
                  var i, r;
                  'compatibleVaults' in t &&
                    (e += null !== (i = t.maxUsdValue) && void 0 !== i ? i : 0n),
                    'compatibleMarkets' in t &&
                      (e += null !== (r = t.equityUsd) && void 0 !== r ? r : 0n);
                }),
                e
              );
            }, [i]);
          return 0 === i.length
            ? null
            : (0, l.tZ)(eM, {
                type: 'single',
                collapsible: !0,
                children: (0, l.BX)(eD, {
                  value: d.name,
                  children: [
                    (0, l.tZ)(e8, {
                      children: (0, l.BX)(n.Kqy, {
                        direction: 'row',
                        justify: 'space-between',
                        align: 'center',
                        width: '100%',
                        height: 120,
                        children: [
                          (0, l.BX)(n.Kqy, {
                            direction: 'row',
                            gap: 'xs',
                            align: 'center',
                            children: [
                              (0, l.tZ)(n.qEK, {
                                src: d.imageSrc,
                                style: { width: 36, height: 36 },
                              }),
                              (0, l.tZ)(n.xvT.Title.XS, { children: d.name }),
                            ],
                          }),
                          !s &&
                            (0, l.BX)(n.Kqy, {
                              direction: 'row',
                              gap: 'xs',
                              align: 'center',
                              children: [
                                (0, l.BX)(n.xvT.Body.L.Regular, {
                                  color: 'text.secondary',
                                  children: [i.length, ' ', (0, n._6H)(i.length, 'position')],
                                }),
                                (0, l.tZ)(n.xvT.Body.L.Regular, {
                                  color: 'text.tertiary',
                                  children: ' / ',
                                }),
                                (0, l.tZ)(n.xvT.Body.L.Regular, {
                                  color: 'text.secondary',
                                  children: n.$0l.short
                                    .unit('$')
                                    .digits(2)
                                    .trailingZero(!1)
                                    .of(c, 18),
                                }),
                              ],
                            }),
                        ],
                      }),
                    }),
                    (0, l.tZ)(e3, { children: r }, d.name),
                    (0, l.tZ)(n.Z0O, {}),
                  ],
                }),
              });
        }),
        e6 = i(83897),
        e7 = (0, o.memo)((e) => {
          var t, i, r, a, s;
          let { position: d, onClick: c } = e,
            { targetChainId: y } = (0, u.Z_)(),
            b = (0, p.getValue)(d, 'mostYieldingVault'),
            f = (0, p.getValue)(d, 'migratablePosition'),
            x = m.FW.getProtocol({ name: f.protocol, chainId: y }),
            w = (0, e6.M)(b.address, b.state, b.asset),
            Z = (0, n.vmq)({
              chainId: y,
              vaultAddress: b.address,
              allocation: null === (t = b.state) || void 0 === t ? void 0 : t.allocation,
            }),
            A = (0, o.useMemo)(() => {
              var e;
              return (null === (e = b.state) || void 0 === e ? void 0 : e.dailyApy)
                ? (0, v.safeParseNumber)(b.state.dailyApy)
                : void 0;
            }, [null === (i = b.state) || void 0 === i ? void 0 : i.dailyApy]),
            P = (0, o.useMemo)(() => {
              var e;
              return (null === (e = b.state) || void 0 === e ? void 0 : e.fee)
                ? (0, v.safeParseNumber)(b.state.fee)
                : void 0;
            }, [null === (r = b.state) || void 0 === r ? void 0 : r.fee]);
          return (0, l.BX)(n.Zbd, {
            direction: 'column',
            gap: 'm',
            padding: { base: 'm', s: 's' },
            width: '100%',
            children: [
              (0, l.BX)(n.Kqy, {
                direction: 'row',
                gap: 'xs',
                align: 'center',
                children: [
                  (0, l.tZ)(n.qEK, { src: b.asset.logoURI, size: 'big', rounded: !0 }),
                  (0, l.BX)(n.Kqy, {
                    direction: 'column',
                    flex: 1,
                    gap: 'xs',
                    children: [
                      (0, l.tZ)(n.xvT.Title.XS, { children: b.asset.symbol }),
                      (0, l.BX)(n.xvT.Body.S.Regular, {
                        color: 'text.secondary',
                        children: [x.name, ' Supply'],
                      }),
                    ],
                  }),
                ],
              }),
              (0, l.BX)(n.Kqy, {
                direction: 'column',
                gap: 's',
                children: [
                  (0, l.BX)(n.Kqy, {
                    wrap: 'wrap',
                    gap: 's',
                    children: [
                      (0, l.BX)(n.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        background: 'background.tertiary',
                        align: 'center',
                        gap: 'xs',
                        minWidth: '232px',
                        flex: 1,
                        height: '88px',
                        children: [
                          (0, l.tZ)(n.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: 'Supply',
                          }),
                          (0, l.BX)(n.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            align: 'center',
                            children: [
                              (0, l.tZ)(n.qEK, {
                                src: b.asset.logoURI,
                                style: { width: 20, height: 20 },
                                rounded: !0,
                              }),
                              (0, l.tZ)(n.xvT.Body.XS.Regular, {
                                children: (0, h.sL)({
                                  price: (0, v.safeParseNumber)(
                                    null !== (s = b.asset.priceUsd) && void 0 !== s ? s : 0
                                  ),
                                  amount: f.max.value,
                                  decimals: b.asset.decimals,
                                  withTrailingZero: !1,
                                  symbol: b.asset.symbol,
                                }),
                              }),
                              (0, l.tZ)(n.Vp9, {
                                label: n.$0l.short
                                  .unit('$')
                                  .readable()
                                  .default('-')
                                  .digits(2)
                                  .of(d.maxUsdValue, 18),
                              }),
                            ],
                          }),
                        ],
                      }),
                      (0, l.BX)(n.Zbd, {
                        padding: 's',
                        direction: 'column',
                        justify: 'center',
                        align: 'center',
                        gap: 'xs',
                        background: 'background.tertiary',
                        flex: 1,
                        height: '88px',
                        minWidth: '232px',
                        children: [
                          (0, l.BX)(n.xvT.Body.XXS.Regular, {
                            color: 'text.secondary',
                            children: [x.name, ' Supply APY'],
                          }),
                          (0, l.tZ)(n.Kqy, {
                            direction: 'row',
                            gap: 'xxs',
                            children: (0, l.tZ)(n.xvT.Body.XS.Regular, {
                              children: n.$0l.percent
                                .unit('%')
                                .readable()
                                .default('-')
                                .digits(2)
                                .of(f.supplyApy),
                            }),
                          }),
                        ],
                      }),
                    ],
                  }),
                  (0, l.BX)(n.Zbd, {
                    padding: 's',
                    height: '88px',
                    direction: 'column',
                    justify: 'center',
                    align: 'center',
                    gap: 'xs',
                    background: 'background.tertiary',
                    flex: 1,
                    children: [
                      (0, l.tZ)(n.xvT.Body.XXS.Regular, {
                        color: 'text.secondary',
                        children: 'Morpho Supply APY',
                      }),
                      (0, l.BX)(n.Kqy, {
                        direction: 'row',
                        gap: 'xxs',
                        children: [
                          (0, l.BX)(n.xvT.Body.XS.Regular, {
                            children: [
                              'Up to',
                              ' ',
                              n.$0l.percent
                                .unit('%')
                                .readable()
                                .default('-')
                                .digits(2)
                                .of(
                                  null === (a = b.state) || void 0 === a ? void 0 : a.dailyNetApy
                                ),
                            ],
                          }),
                          (0, l.tZ)(g.w, {
                            RewardsHoverCardProps: {
                              performanceFee: P,
                              apy: A,
                              rewards: w,
                              points: Z,
                              variant: 'vault',
                            },
                          }),
                        ],
                      }),
                    ],
                  }),
                ],
              }),
              (0, l.tZ)(n.zxk, {
                size: 'big',
                onClick: c,
                'data-testid': 'supply-migrate-button',
                children: 'Migrate',
              }),
            ],
          });
        }),
        e9 = i(73057),
        te = i(12472),
        tt = (0, o.memo)((e) => {
          var t, i, r, a, s, d, c, v, p;
          let { operation: g, localSimulationResult: y, vault: b, loading: f } = e,
            { targetChainId: x, account: w } = (0, u.Z_)(),
            Z = (0, o.useMemo)(
              () => (0, m.wk)(null == b ? void 0 : b.asset),
              [null == b ? void 0 : b.asset]
            ),
            A = (0, e6.M)(
              g.vaultAddress,
              null == b ? void 0 : b.state,
              null == b ? void 0 : b.asset
            ),
            P = (0, n.vmq)({
              chainId: x,
              vaultAddress: g.vaultAddress,
              allocation:
                null == b ? void 0 : null === (t = b.state) || void 0 === t ? void 0 : t.allocation,
            }),
            { initialData: k } = (0, e9.Z)(w.address, y, g.vaultAddress, Z),
            B = (0, o.useMemo)(() => {
              var e;
              if (!f) return null !== (e = k.position) && void 0 !== e ? e : 0n;
            }, [k.position, f]),
            X = (0, o.useMemo)(() => {
              var e;
              if (!f) return (null !== (e = k.position) && void 0 !== e ? e : 0n) + g.assets;
            }, [k.position, g.assets, f]);
          return b && null != g.assets && Z
            ? (0, l.tZ)(te.Z, {
                vault: {
                  rewards: A,
                  points: P,
                  allocation:
                    null !== (c = null === (i = b.state) || void 0 === i ? void 0 : i.allocation) &&
                    void 0 !== c
                      ? c
                      : [],
                  address: b.address,
                  name: b.name,
                  dailyApy: null === (r = b.state) || void 0 === r ? void 0 : r.dailyApy,
                  dailyNetApy: null === (a = b.state) || void 0 === a ? void 0 : a.dailyNetApy,
                  fee: null === (s = b.state) || void 0 === s ? void 0 : s.fee,
                  curators:
                    null !==
                      (v = null === (d = b.metadata) || void 0 === d ? void 0 : d.curators) &&
                    void 0 !== v
                      ? v
                      : [],
                  warnings: null !== (p = b.warnings) && void 0 !== p ? p : [],
                  asset: Z,
                },
                initialPosition: B,
                finalPosition: X,
              })
            : (0, l.tZ)(n.SKT, {
                height: '282px',
                text: 'Cannot display interaction with vault '.concat((0, h.Tg)(g.vaultAddress)),
              });
        });
      let ti = (e) => {
          let { vaultAddress: t, position: i } = e,
            {
              operation: r,
              index: a,
              isNew: l,
              error: n,
            } = (0, o.useMemo)(
              () => ({
                isNew: !0,
                index: 0,
                operation: {
                  id: crypto.randomUUID(),
                  type: I.H.InterfaceOperationType.migrateSupply,
                  vaultAddress: t,
                  assets: 0n,
                  shares: 0n,
                  position: i,
                  options: { isMax: [], disabledPeripheralTokens: new Set() },
                },
                error: void 0,
              }),
              [t, i]
            ),
            s = (0, V.f)(a),
            d = (0, V.f)(a + 1);
          return { operation: r, index: a, isNew: l, error: n, initialState: s, finalState: d };
        },
        tr = (e) => {
          var t, i, r, a;
          let { vaultAddress: l, position: s, initialOperation: d } = e,
            { account: c, targetChainId: v } = (0, u.Z_)(),
            {
              operation: g,
              initialState: h,
              finalState: y,
              isNew: b,
            } = ti({ vaultAddress: l, position: s }),
            [f, x] = (0, o.useState)(
              null !== (t = null == d ? void 0 : d.assets) && void 0 !== t ? t : 0n
            ),
            [w, Z] = (0, o.useState)(
              null !== (i = null == d ? void 0 : d.shares) && void 0 !== i ? i : 0n
            ),
            [A, P] = (0, o.useState)(
              null !==
                (a =
                  null !==
                    (r =
                      null == d
                        ? void 0
                        : d.options.isMax.includes(I.H.InterfaceOperationType.migrateSupply)) &&
                  void 0 !== r
                    ? r
                    : g.options.isMax.includes(I.H.InterfaceOperationType.migrateSupply)) &&
                void 0 !== a &&
                a
            ),
            k = (0, o.useMemo)(
              () => ({
                type: I.H.InterfaceOperationType.migrateSupply,
                position: s,
                vaultAddress: l,
                assets: f,
                shares: w,
                id: g.id,
                options: { isMax: [I.H.InterfaceOperationType.migrateSupply] },
              }),
              [f, g.id, w, l, s]
            ),
            B = (0, o.useMemo)(
              () => (0, m.wk)(null == s ? void 0 : s.mostYieldingVault.asset),
              [s]
            ),
            X = (0, o.useMemo)(() => {
              if (s) return m.FW.getProtocol({ name: s.migratablePosition.protocol, chainId: v });
            }, [s, v]),
            T = (0, o.useMemo)(() => {
              var e, t;
              if (h)
                return null === (t = h.data) || void 0 === t
                  ? void 0
                  : null === (e = t.tryGetAccrualVault(l)) || void 0 === e
                    ? void 0
                    : e.accrueInterest(h.data.block.timestamp);
            }, [h, l]),
            M = (0, o.useMemo)(() => {
              if (!c.address || !h || !T || !s) return;
              let e = T.getDepositCapacityLimit(s.migratablePosition.max.value);
              return e.limiter === S.CapacityLimitReason.cap
                ? { value: e.value, limiter: S.CapacityLimitReason.cap }
                : s.migratablePosition.max;
            }, [c.address, h, T, s]),
            L = (0, o.useMemo)(() => {
              if (s && B && M && f > M.value) {
                let e = n.$0l.commas.digits(2).unit(B.symbol).of(M.value, B.decimals);
                switch (M.limiter) {
                  case R.SupplyMigrationLimiter.position:
                    return {
                      reason: R.SupplyMigrationLimiter.position,
                      message: 'Limited by balance: '.concat(e),
                      level: C.WarningLevel.Red,
                      color: 'text.interactive.error',
                    };
                  case S.CapacityLimitReason.cap:
                    return {
                      reason: S.CapacityLimitReason.cap,
                      message: "Limited by vault's caps: ".concat(e),
                      level: C.WarningLevel.Red,
                      color: 'text.interactive.error',
                    };
                  case R.SupplyMigrationLimiter.liquidity:
                    return {
                      reason: R.SupplyMigrationLimiter.liquidity,
                      message: 'Limited by liquidity on '
                        .concat(null == X ? void 0 : X.name, ': ')
                        .concat(e),
                      level: C.WarningLevel.Red,
                      color: 'text.interactive.error',
                    };
                }
                return {
                  reason: void 0,
                  message: 'Max: '.concat(e),
                  level: C.WarningLevel.Red,
                  color: 'text.interactive.error',
                };
              }
            }, [s, B, M, f, null == X ? void 0 : X.name]),
            q = (0, o.useMemo)(() => {
              if (void 0 !== T && void 0 !== B)
                return 0n === f || 0n === f
                  ? null
                  : {
                      amount: f,
                      vault: T.address,
                      maxSharePrice: S.MathLib.mulDivUp(
                        f,
                        S.MathLib.wToRay(S.MathLib.WAD + (0, K.oi)(T.apy)),
                        T.toShares(f)
                      ),
                    };
            }, [f, B, T]),
            E = (0, o.useMemo)(() => {
              if (!(!s || !q || (0, p.isDefined)(L)))
                return s.migratablePosition.getMigrationTx(
                  q,
                  !c.isContract && !!(null == X ? void 0 : X.supportSignature)
                );
            }, [s, q, L, c.isContract, null == X ? void 0 : X.supportSignature]),
            N = (0, m.nR)({
              isFetching: h.isFetchingAny || h.isPending,
              dependencies: [c.isConnected],
              requiredData: [null == M ? void 0 : M.value],
            }),
            V = (0, o.useCallback)((e) => {
              P(!1), x(e), Z(0n);
            }, []),
            W = (0, o.useCallback)(
              (e) => {
                if (e) {
                  if ((null == M ? void 0 : M.value) == null) return;
                  x(M.value);
                  let e = null == T ? void 0 : T.toShares(M.value, 'Down');
                  if (null == e) return;
                  Z(e);
                }
                P(e);
              },
              [M, T]
            );
          return {
            isLoading: N,
            localOperation: k,
            initialState: h,
            finalState: y,
            inputError: L,
            args: q,
            amountToMigrate: f,
            isNew: b,
            isMax: A,
            maxMigratable: M,
            bundle: E,
            setInputAmount: V,
            setIsMax: W,
          };
        };
      var ta = i(25596),
        tl = i(76280),
        to = i(34571),
        tn = i(99503),
        ts = i(55872);
      let td = [
          {
            id: 'vault',
            header: () =>
              (0, l.tZ)(n.xvT.Body.XXXS.Regular, {
                marginLeft: '12px',
                color: 'text.secondary',
                children: 'Vault',
              }),
            cell: (e) => {
              let { row: t } = e;
              return (0, l.BX)(n.Kqy, {
                gap: 'xs',
                align: 'center',
                'data-testid': 'vault-cell-'.concat(t.original.vault.address.toLowerCase()),
                children: [
                  (0, l.tZ)(n.DU6, {
                    ...t.original.vault,
                    chainId: t.original.chainId,
                    maxLength: 22,
                    TextVariant: n.xvT.Body.XXS.Regular,
                  }),
                  t.original.isSelected &&
                    (0, l.tZ)(n.JO$, { icon: 'CheckPlain20', color: 'text.body' }),
                ],
              });
            },
            accessorFn: (e) => e.vault.name,
            sortingFn: (e, t) => e.original.vault.name.localeCompare(t.original.vault.name),
          },
          {
            id: 'riskCurator',
            header: () =>
              (0, l.tZ)(n.xvT.Body.XXXS.Regular, {
                marginLeft: '12px',
                color: 'text.secondary',
                children: 'Risk Curator',
              }),
            cell: (e) => {
              var t, i;
              let { row: r } = e;
              return (0, l.tZ)(n.$xj, {
                items:
                  null !==
                    (i =
                      null === (t = r.original.vault.metadata) || void 0 === t
                        ? void 0
                        : t.curators.map((e) => ({ logoUrl: e.image }))) && void 0 !== i
                    ? i
                    : [],
                maxTokensCount: 3,
                align: 'right',
              });
            },
            accessorFn: (e) => {
              var t;
              return null === (t = e.vault.metadata) || void 0 === t ? void 0 : t.curators;
            },
          },
          {
            id: 'liquidity',
            header: () =>
              (0, l.tZ)(n.xvT.Body.XXXS.Regular, {
                color: 'text.secondary',
                children: 'Liquidity',
              }),
            cell: (e) => {
              let { row: t } = e;
              return (0, l.tZ)(n.UuD, {
                TextVariant: n.xvT.Body.XXS.Regular,
                token: t.original.vault.asset,
                amount: t.original.assets.assets,
                value: t.original.assets.assetsUsd,
              });
            },
            accessorFn: (e) => e.assets.assetsUsd,
          },
          {
            id: 'Collateral',
            header: () =>
              (0, l.tZ)(n.xvT.Body.XXXS.Regular, {
                color: 'text.secondary',
                children: 'Collateral',
              }),
            cell: (e) => {
              let { row: t } = e;
              return (0, l.tZ)(ts.m, {
                collateralExposures: t.original.collateralExposures.collateralExposures,
                targetChainId: t.original.chainId,
                maxTokensCount: 4,
              });
            },
            accessorFn: (e) => e.collateralExposures.collateralExposures,
          },
          {
            id: 'apy',
            header: () =>
              (0, l.tZ)(n.xvT.Body.XXXS.Regular, { color: 'text.secondary', children: 'APY' }),
            cell: (e) => {
              let { row: t } = e;
              return (0, l.tZ)(to.Z, {
                rewards: t.original.netApy.rewards,
                netApy: t.original.netApy.netApy,
                apy: t.original.netApy.dailyApy,
                performanceFee: t.original.netApy.performanceFee,
                variant: 'vault',
                points: t.original.netApy.points,
                TextVariant: n.xvT.Body.XXS.Regular,
                withBackgroundEffect: !1,
              });
            },
            accessorFn: (e) => e.netApy.netApy,
          },
        ],
        tu = [
          {
            id: 'vault',
            header: () =>
              (0, l.tZ)(n.xvT.Body.XXXS.Regular, {
                marginLeft: '12px',
                color: 'text.secondary',
                children: 'Vault',
              }),
            cell: (e) => {
              var t;
              let { row: i } = e;
              return (0, l.BX)(n.Kqy, {
                direction: 'row',
                gap: 'xs',
                align: 'center',
                wrap: 'wrap',
                style: { marginBlock: '12px' },
                children: [
                  (0, l.tZ)(n.DU6, {
                    ...i.original.vault,
                    chainId: i.original.chainId,
                    TextVariant: n.xvT.Body.XXS.Regular,
                    maxLength: 22,
                  }),
                  (0, l.tZ)(tn.Z, {
                    curators:
                      null === (t = i.original.vault.metadata) || void 0 === t
                        ? void 0
                        : t.curators,
                    TextVariant: n.xvT.Body.XXS.Regular,
                    chainId: i.original.chainId,
                  }),
                  (0, l.tZ)(n.UuD, {
                    withAvatar: !0,
                    token: i.original.vault.asset,
                    amount: i.original.assets.assets,
                    value: i.original.assets.assetsUsd,
                    TextVariant: n.xvT.Body.XXS.Regular,
                  }),
                  (0, l.tZ)(to.Z, {
                    netApy: i.original.netApy.netApy,
                    apy: i.original.netApy.dailyApy,
                    performanceFee: i.original.netApy.performanceFee,
                    rewards: i.original.netApy.rewards,
                    variant: 'vault',
                    points: i.original.netApy.points,
                    TextVariant: n.xvT.Body.XXS.Regular,
                    isHoverable: !1,
                  }),
                  (0, l.tZ)(ts.m, {
                    collateralExposures: i.original.collateralExposures.collateralExposures,
                    targetChainId: i.original.chainId,
                    maxTokensCount: 4,
                  }),
                ],
              });
            },
          },
        ];
      var tc = i(9834),
        tv = i(73828),
        tm = (e) => {
          let { vaults: t, selectedVaultAddress: i, searchQuery: r } = e,
            { targetChainId: a } = (0, u.Z_)();
          return (0, o.useMemo)(
            () =>
              t
                ? t
                    .filter((e) => (0, n.Uaj)(e.name).toLowerCase().includes(r.toLowerCase()))
                    .map((e) => {
                      var t, r, l, o, s, d, u, c, g, h, y;
                      let b = (0, tv.pf)(e.address, e.state, e.asset, a),
                        f = (0, m.wk)(e.asset),
                        x = (0, n.BwX)(
                          a,
                          e.address,
                          null === (t = e.state) || void 0 === t ? void 0 : t.allocation
                        ),
                        w = (0, tc.m)(
                          null === (r = e.state) || void 0 === r ? void 0 : r.allocation
                        ),
                        Z = (0, p.isDefined)(e.warnings) ? (0, n.Myy)(e.warnings) : void 0,
                        A = (null === (l = e.state) || void 0 === l ? void 0 : l.totalAssetsUsd)
                          ? (0, v.safeParseNumber)(
                              null === (o = e.state) || void 0 === o ? void 0 : o.totalAssetsUsd
                            )
                          : void 0,
                        P = (null === (s = e.state) || void 0 === s ? void 0 : s.dailyApy)
                          ? (0, v.safeParseNumber)(
                              null === (d = e.state) || void 0 === d ? void 0 : d.dailyApy
                            )
                          : void 0,
                        k = (null === (u = e.state) || void 0 === u ? void 0 : u.dailyNetApy)
                          ? (0, v.safeParseNumber)(
                              null === (c = e.state) || void 0 === c ? void 0 : c.dailyNetApy
                            )
                          : void 0,
                        B = (null === (g = e.state) || void 0 === g ? void 0 : g.fee)
                          ? (0, v.safeParseNumber)(
                              null === (h = e.state) || void 0 === h ? void 0 : h.fee
                            )
                          : void 0;
                      return {
                        vault: { ...e, asset: f },
                        assets: {
                          assetsUsd: A,
                          assets: null === (y = e.state) || void 0 === y ? void 0 : y.totalAssets,
                          asset: f,
                          vaultAddress: e.address,
                        },
                        collateralExposures: { collateralExposures: w, warnings: Z },
                        netApy: {
                          netApy: k,
                          dailyApy: P,
                          performanceFee: B,
                          rewards: b,
                          points: x,
                        },
                        isSelected: e.address === i,
                        chainId: a,
                      };
                    })
                    .sort((0, p.bigIntComparator)((e) => e.assets.assetsUsd, 'desc'))
                : [],
            [t, i, a, r]
          );
        },
        tp = (0, o.memo)((e) => {
          var t, i, r, a, s, d, c, m;
          let {
              isOpen: g,
              isLoading: h,
              vaults: y,
              selectedVault: b,
              searchQuery: f,
              onOpenChange: x,
              onSelect: w,
              setSearchQuery: Z,
            } = e,
            { targetChainId: A } = (0, u.Z_)(),
            P = (0, n.CPt)(),
            k = tm({
              vaults: y,
              selectedVaultAddress: null == b ? void 0 : b.address,
              searchQuery: f,
            }),
            B = (0, o.useMemo)(() => (P ? tu : td), [P]),
            X = (0, o.useMemo)(() => {
              if (!b) return '';
              let e = (0, n.Uaj)(b.name);
              return e ? (0, p.formatLongString)(e) : '';
            }, [b]),
            T = (0, e6.M)(b.address, b.state, b.asset),
            M = (0, n.vmq)({
              vaultAddress: b.address,
              chainId: A,
              allocation: null === (t = b.state) || void 0 === t ? void 0 : t.allocation,
            }),
            C = (0, o.useMemo)(() => {
              var e, t;
              return (0, v.safeParseNumber)(
                null !== (t = null === (e = b.state) || void 0 === e ? void 0 : e.dailyNetApy) &&
                  void 0 !== t
                  ? t
                  : 0
              );
            }, [null === (i = b.state) || void 0 === i ? void 0 : i.dailyNetApy]),
            S = (0, o.useMemo)(() => {
              var e, t;
              return (0, v.safeParseNumber)(
                null !== (t = null === (e = b.state) || void 0 === e ? void 0 : e.dailyApy) &&
                  void 0 !== t
                  ? t
                  : 0
              );
            }, [null === (r = b.state) || void 0 === r ? void 0 : r.dailyApy]),
            R = (0, o.useMemo)(() => {
              var e, t;
              return (0, v.safeParseNumber)(
                null !== (t = null === (e = b.state) || void 0 === e ? void 0 : e.fee) &&
                  void 0 !== t
                  ? t
                  : 0
              );
            }, [null === (a = b.state) || void 0 === a ? void 0 : a.fee]),
            L = (0, o.useMemo)(() => {
              var e, t;
              return (0, v.safeParseNumber)(
                null !== (t = null === (e = b.state) || void 0 === e ? void 0 : e.totalAssetsUsd) &&
                  void 0 !== t
                  ? t
                  : 0
              );
            }, [null === (s = b.state) || void 0 === s ? void 0 : s.totalAssetsUsd]);
          return h
            ? (0, l.tZ)(n.OdW, { width: '150px', height: '45px', borderRadius: '20px' })
            : (0, l.tZ)(n.Kqy, {
                direction: 'row',
                width: 'full',
                align: 'center',
                children: (0, l.BX)(n.Ce2.Root, {
                  open: g,
                  onOpenChange: x,
                  children: [
                    (0, l.BX)(n.Kqy, {
                      direction: 'column',
                      gap: 'xs',
                      flex: 1,
                      children: [
                        (0, l.tZ)(n.xvT.Body.XXS.Regular, {
                          color: 'text.secondary',
                          shortenByWidth: 320,
                          children: 'Select vault',
                        }),
                        (0, l.tZ)(n.Ce2.Trigger, {
                          children: (0, l.tZ)(n.zxk, {
                            style: { width: 'fit-content' },
                            loading: h,
                            variant: 'secondary',
                            onClick: () => x(!g),
                            'data-testid': 'select-vault-trigger',
                            children: (0, l.BX)(n.Kqy, {
                              direction: 'row',
                              align: 'center',
                              gap: 's',
                              children: [
                                (0, l.BX)(n.Kqy, {
                                  direction: 'row',
                                  align: 'center',
                                  gap: 'xs',
                                  children: [
                                    (0, l.tZ)(n.qEK, {
                                      src:
                                        null == b
                                          ? void 0
                                          : null === (d = b.asset) || void 0 === d
                                            ? void 0
                                            : d.logoURI,
                                      size: 'medium',
                                    }),
                                    (0, l.tZ)(n.xvT.Body.XXS.Regular, {
                                      shortenByWidth: 320,
                                      children: X,
                                    }),
                                  ],
                                }),
                                !P &&
                                  (null === (m = b.metadata) || void 0 === m
                                    ? void 0
                                    : null === (c = m.curators) || void 0 === c
                                      ? void 0
                                      : c.map((e) =>
                                          (0, l.tZ)(
                                            n.Vp9,
                                            {
                                              variant: 'main',
                                              label: e.name,
                                              startIcon: (0, l.tZ)(n.qEK, {
                                                src: e.image,
                                                size: 'small',
                                                style: { width: 16, height: 16 },
                                              }),
                                            },
                                            e.name
                                          )
                                        )),
                                (0, l.tZ)(n.Vp9, {
                                  variant: 'main',
                                  label: n.$0l.short.digits(2).unit('$').of(L, 18),
                                }),
                                (0, l.tZ)(to.Z, {
                                  rewards: T,
                                  netApy: C,
                                  apy: S,
                                  performanceFee: R,
                                  variant: 'vault',
                                  points: M,
                                  TextVariant: n.xvT.Body.XXXS.Regular,
                                  isHoverable: !0,
                                  withBackgroundEffect: !1,
                                }),
                                (0, l.tZ)(n.JO$, {
                                  icon: 'ChevronPlain20',
                                  style: {
                                    transition: 'transform 0.2s ease-in-out',
                                    transform: g ? 'rotate(180deg)' : 'rotate(0deg)',
                                  },
                                }),
                              ],
                            }),
                          }),
                        }),
                      ],
                    }),
                    (0, l.tZ)(n.Ce2.Portal, {
                      children: (0, l.BX)(n.Ce2.Content, {
                        side: 'bottom',
                        sideOffset: 2,
                        align: 'start',
                        width: 'min(775px, 90vw)',
                        children: [
                          (0, l.tZ)(n.Ce2.SearchBar, {
                            placeholder: 'Search vaults',
                            value: f,
                            onChange: (e) => Z(e.target.value),
                          }),
                          (0, l.tZ)(n.Ce2.Separator, {}),
                          (0, l.tZ)(n.Ce2.Table, {
                            data: k,
                            columnsDefs: B,
                            columnWidths: ['30%', '120px', '200px', '110px'],
                            onRowClick: (e) => w(e.vault.address),
                          }),
                        ],
                      }),
                    }),
                  ],
                }),
              });
        }),
        tg = (0, o.memo)((e) => {
          var t;
          let { protocolPosition: i, operation: r, errors: a } = e,
            { targetChainId: s } = (0, u.Z_)(),
            { migratablePosition: d, mostYieldingVault: c } = i,
            v = m.FW.getProtocol({ name: d.protocol, chainId: s }),
            g = (0, o.useMemo)(() => (0, m.wk)(c.asset), [c.asset]),
            y = (0, o.useMemo)(
              () => n.$0l.percent.digits(2).unit('%').of(d.supplyApy),
              [d.supplyApy]
            );
          return (0, l.BX)(n.soA.Root, {
            width: '100%',
            height: '257px',
            children: [
              (0, l.BX)(n.soA.Header, {
                children: [
                  (0, l.tZ)(n.qEK, { size: 'large', src: v.imageSrc }),
                  (0, l.tZ)(n.Kqy, {
                    direction: 'column',
                    gap: 'xs',
                    children: (0, l.tZ)(n.xvT.Title.XS, { children: v.name }),
                  }),
                ],
              }),
              (0, l.BX)(n.soA.List, {
                children: [
                  (0, l.tZ)(n.soA.ListItem, {
                    warning: null == a ? void 0 : a.supplyError,
                    label: 'Supply ('.concat(
                      (0, p.formatLongString)(null !== (t = g.symbol) && void 0 !== t ? t : '', 15),
                      ')'
                    ),
                    value: (0, l.tZ)(n.soA.ValueChange, {
                      initialProps: { value: d.max.value },
                      finalProps: { value: d.max.value - r.assets },
                      formatter: (e) =>
                        (0, h.sL)({
                          price: g.price,
                          amount: e,
                          decimals: g.decimals,
                          withTrailingZero: !1,
                        }),
                    }),
                  }),
                  (0, l.tZ)(n.soA.ListItem, {
                    label: 'APY',
                    value: (0, l.tZ)(n.soA.Value, { value: y }),
                  }),
                ],
              }),
            ],
          });
        });
      let th = (e) => {
        var t, i, r, a, d;
        let { position: v, initialOperation: p } = e,
          g = (0, n.CPt)(),
          { mostYieldingVault: h, compatibleVaults: y } = v,
          {
            bundlerConfiguration: b,
            simulationError: w,
            isPending: A,
            blockError: T,
            config: { addToSimulationState: M },
          } = (0, P.N)(),
          { setActiveBundle: C } = (0, X.H)(),
          { toggleDialog: R } = (0, n.DAv)(),
          { account: L } = (0, u.Z_)(),
          [I, q] = (0, o.useState)(''),
          [K, E] = (0, o.useState)(!1),
          [N, V] = (0, o.useState)(
            null !==
              (r =
                null !== (i = null == p ? void 0 : p.vaultAddress) && void 0 !== i
                  ? i
                  : null === (t = y[0]) || void 0 === t
                    ? void 0
                    : t.address) && void 0 !== r
              ? r
              : h.address
          ),
          W = (0, o.useMemo)(() => y.find((e) => e.address === N), [y, N]),
          U = (0, tl.q)(W),
          H = (0, o.useMemo)(() => (0, m.wk)(h.asset), [h.asset]),
          {
            localOperation: O,
            inputError: _,
            maxMigratable: z,
            amountToMigrate: F,
            isMax: j,
            isLoading: $,
            initialState: G,
            isNew: Y,
            bundle: J,
            setInputAmount: Q,
            setIsMax: ee,
          } = tr({ vaultAddress: N, position: v, initialOperation: p }),
          [et] = (0, B._)(G.data, O, b, Y),
          ei = (0, ta.oP)({
            address: N,
            error: null == _ ? void 0 : _.message,
            isWrongChain: L.isWrongChain,
            chainId:
              null !== (a = null == W ? void 0 : W.chain.id) && void 0 !== a
                ? a
                : S.ChainId.EthMainnet,
          }),
          er = (0, D.Z)(
            'migration',
            0n === F,
            !0,
            !0,
            null !== (d = null == _ ? void 0 : _.message) && void 0 !== d ? d : void 0,
            [],
            w,
            T,
            A,
            L.isWrongChain,
            !1
          ),
          ea = (0, o.useMemo)(
            () =>
              (T && A) ||
              !!(null == _ ? void 0 : _.message) ||
              !!w ||
              !(0, k.H)(O) ||
              L.isWrongChain,
            [T, A, null == _ ? void 0 : _.message, w, O, L.isWrongChain]
          ),
          el = (0, o.useCallback)(() => {
            R(!1);
          }, [R]),
          eo = (0, o.useCallback)(() => {
            R(
              (0, l.tZ)(f.sG, {
                operations: [O],
                headerActionSlot: (0, l.tZ)(n.zxk, {
                  variant: 'ghost',
                  iconRight: 'EditPlain20',
                  label: 'Edit migration',
                  onClick: () => {
                    R(
                      (0, l.tZ)(c.Z, {
                        fallback: (0, l.tZ)(s.c, {}),
                        children: (0, l.tZ)(th, {
                          'data-testid': 'migration-dialog',
                          position: v,
                          initialOperation: O,
                        }),
                      }),
                      { maxWidth: g ? void 0 : '900px', fullSize: g }
                    );
                  },
                }),
                onConfirm: () => {
                  (null == J ? void 0 : J.actions) &&
                    (C(J, [O]), R((0, l.tZ)(x.h, {}), { closable: !1 }));
                },
              })
            );
          }, [O, J, R, C, g, v]),
          en = (0, o.useCallback)(
            (e) => {
              V(e), E(!1), Q(0n), ee(!1);
            },
            [V, E, Q, ee]
          );
        return (
          (0, o.useEffect)(() => {
            M(U);
          }, [U, M]),
          (0, l.tZ)(Z.Do, {
            title: 'Migrate Position',
            size: 'small',
            topSlot: (0, l.tZ)(l.HY, {
              children: W
                ? (0, l.tZ)(tp, {
                    isOpen: K,
                    vaults: y,
                    selectedVault: W,
                    searchQuery: I,
                    setSearchQuery: q,
                    onOpenChange: E,
                    onSelect: en,
                  })
                : (0, l.tZ)(n.OdW, { width: 'full', height: '59px', borderRadius: '20px' }),
            }),
            inputSlots: [
              (0, l.tZ)(
                n.TGk,
                {
                  fullWidth: !0,
                  token: H,
                  amount: F,
                  onChange: Q,
                  header: 'Supply amount to migrate',
                  maxValue: null == z ? void 0 : z.value,
                  loading: $,
                  onMaxClick: ee,
                  isMax: j,
                  disabled: $,
                },
                H.address
              ),
            ],
            initialPositionSlot: (0, l.tZ)(tg, {
              protocolPosition: v,
              operation: O,
              errors: {
                supplyError:
                  (null == _ ? void 0 : _.reason) !== S.CapacityLimitReason.cap ? _ : void 0,
              },
            }),
            finalPositionSlot: (0, l.tZ)(tt, {
              vault: W,
              operation: O,
              localSimulationResult: et,
              loading: $,
            }),
            actionSlot: (0, l.tZ)(n.ua7, {
              content: null == ei ? void 0 : ei.message,
              disabled: !ei,
              children: (0, l.tZ)(n.zxk, {
                size: 'big',
                variant: ea ? 'secondary' : 'primary',
                label: er,
                disabled: ea,
                onClick: eo,
                shortenByWidth: 300,
                'data-testid': 'finalize-button',
              }),
            }),
            onClose: el,
          })
        );
      };
      var ty = (0, o.memo)(th),
        tb = i(13328),
        tf = i(33214),
        tx = (0, o.memo)(() => {
          let { toggleDialog: e } = (0, n.DAv)(),
            t = (0, n.CPt)(),
            { account: i, modal: r } = (0, u.Z_)(),
            {
              migratablePositionsByProtocol: a,
              hasMigratablePositions: v,
              isLoading: m,
              error: p,
            } = (0, d.w)(),
            g = (0, o.useCallback)(
              (i) => {
                e(
                  (0, l.tZ)(c.Z, {
                    fallback: (0, l.tZ)(s.c, { minHeight: '494px' }),
                    children:
                      'supply' === i.type
                        ? (0, l.tZ)(ty, { position: i })
                        : (0, l.tZ)(z, { position: i }),
                  }),
                  { maxWidth: t ? void 0 : '900px', fullSize: t }
                );
              },
              [e, t]
            );
          return i.isConnected
            ? m
              ? (0, l.tZ)(tf.i, {})
              : p
                ? (0, l.BX)(Y.Z, {
                    spacing: 'l',
                    children: [(0, l.tZ)(s.c, { minHeight: '600px' }), ';'],
                  })
                : v
                  ? (0, l.tZ)(Y.Z, {
                      spacing: 'l',
                      children: (0, l.tZ)(n.Kqy, {
                        direction: 'column',
                        width: '100%',
                        maxWidth: '1112px',
                        children: Object.entries(null != a ? a : {}).map((e) => {
                          let [t, i] = e;
                          return (0, l.tZ)(
                            e4,
                            {
                              migratableProtocol: t,
                              positions: i,
                              children: (0, l.tZ)(G, {
                                children: i.map((e, i) =>
                                  (0, l.tZ)(
                                    n.Kqy,
                                    {
                                      minWidth: '210px',
                                      children:
                                        'supply' === e.type
                                          ? (0, l.tZ)(e7, { position: e, onClick: () => g(e) })
                                          : (0, l.tZ)(b, {
                                              position: e,
                                              onClick: () => {
                                                g(e);
                                              },
                                            }),
                                    },
                                    ''.concat(t, '-').concat(i, '-migratable-position')
                                  )
                                ),
                              }),
                            },
                            t
                          );
                        }),
                      }),
                    })
                  : (0, l.tZ)(Y.Z, {
                      spacing: { base: 'l', 'content-l': 'm' },
                      children: (0, l.BX)(n.Kqy, {
                        direction: { base: 'row', 'content-l': 'column' },
                        width: '100%',
                        maxWidth: '1086px',
                        gap: 'm',
                        children: [
                          (0, l.tZ)(j.Z, {}),
                          (0, l.BX)(n.Kqy, {
                            direction: 'column',
                            width: '100%',
                            gap: 'm',
                            children: [(0, l.tZ)(tb.a, {}), (0, l.tZ)(F.Z, {})],
                          }),
                        ],
                      }),
                    })
            : (0, l.tZ)(Y.Z, {
                spacing: 'm',
                children: (0, l.BX)(n.Kqy, {
                  direction: 'column',
                  gap: 'm',
                  maxWidth: '702px',
                  width: '100%',
                  children: [
                    (0, l.tZ)(n._Lo, {
                      onClick: () => r.open(),
                      width: 'full',
                      children: 'Connect Wallet',
                    }),
                    (0, l.tZ)(j.Z, {}),
                  ],
                }),
              });
        });
    },
    45090: function (e, t, i) {
      'use strict';
      i.d(t, {
        F: function () {
          return h;
        },
      });
      var r = i(78286),
        a = i(58258),
        l = i(40252),
        o = i(4565),
        n = i(12556),
        s = i(54655),
        d = i(35047),
        u = i(725),
        c = i(78017),
        v = i(35288),
        m = i(16820);
      let p = (0, i(38819).Z)(s.OdW, {
          shouldForwardProp: (e) => 'fullWidth' !== e,
          target: 'e1ezbkgr0',
        })(
          'width:100%;height:312px;',
          (e) => {
            let { fullWidth: t } = e;
            return !t && 'max-width: 394px;';
          },
          ' ',
          (e) => {
            let { theme: t } = e;
            return t.breakpoints.down('m');
          },
          '{width:100%;max-width:100%;}'
        ),
        g = (e) => s.$0l.percent.digits(2).trailingZero(!1).unit('%').default('-').of(e, 18);
      var h = (0, a.memo)((e) => {
        var t, i, h, y, b, f, x, w, Z, A, P;
        let {
            chainId: k,
            isLoading: B,
            errors: X,
            market: {
              collateralToken: T,
              loanToken: M,
              uniqueKey: C,
              oracle: S,
              warnings: R,
              dailyBorrowApy: L,
              dailyNetBorrowApy: I,
              rewards: q,
            },
            state: {
              initialPosition: K,
              finalMarketData: E,
              initialMarketData: N,
              previewedMarket: V,
              previewedPosition: W,
            },
          } = e,
          U = (0, u.B9)({ lltv: null == N ? void 0 : N.params.lltv, marketId: C }),
          D = (0, s.$4C)({
            chainId: k,
            uniqueKey: C,
            collateralAddress: null == T ? void 0 : T.address,
          }),
          H = (0, a.useMemo)(() => (0, o.safeParseNumber)(L || 0, 18), [L]),
          O = (0, a.useMemo)(() => {
            var e;
            return (
              !!N &&
              null != K &&
              !!K.ltv &&
              !!U &&
              (0, n.M4)(null !== (e = K.ltv) && void 0 !== e ? e : 0n, U)
            );
          }, [K, N, U]),
          _ = (0, a.useMemo)(() => s.$0l.percent.default('0.00').digits(2).unit('%').of(I), [I]);
        return T && M && N && !B
          ? (0, r.BX)(s.soA.Root, {
              width: '100%',
              children: [
                (0, r.BX)(s.soA.Header, {
                  children: [
                    (0, r.tZ)(s._nw, {
                      size: 'large',
                      leftAvatarProps: { src: null == T ? void 0 : T.logoURI },
                      rightAvatarProps: { src: null == M ? void 0 : M.logoURI },
                    }),
                    (0, r.BX)(s.Kqy, {
                      direction: 'column',
                      gap: 'xs',
                      children: [
                        (0, r.tZ)(s.xvT.Title.XS, {
                          children: (0, s.lAJ)({ loanAsset: M, collateralAsset: T, maxLength: 15 }),
                        }),
                        (0, r.BX)(s.Kqy, {
                          direction: 'row',
                          align: 'center',
                          gap: 4,
                          children: [
                            (0, r.tZ)(s.Vp9, {
                              variant: 'main',
                              label: g(null == N ? void 0 : N.params.lltv),
                            }),
                            (0, d.isDefined)(S) &&
                              (0, r.tZ)(v.Z, {
                                oracle: S,
                                warnings: null != R ? R : [],
                                typographyProps: { color: 'text.secondary' },
                              }),
                            (0, d.isDefined)(C) &&
                              (0, r.tZ)(s.mUV, {
                                size: 'small',
                                variant: 'ghost',
                                toCopy: C,
                                tooltipMessage: 'Copy Market ID.',
                                toastMessage: 'Market ID copied to clipboard.',
                              }),
                          ],
                        }),
                      ],
                    }),
                  ],
                }),
                (0, r.BX)(s.soA.List, {
                  children: [
                    (0, r.tZ)(s.soA.ListItem, {
                      warning: null == X ? void 0 : X.collateralError,
                      label: 'Collateral ('.concat(
                        (0, d.formatLongString)(null !== (b = T.symbol) && void 0 !== b ? b : ''),
                        ')'
                      ),
                      value: (0, r.tZ)(s.soA.ValueChange, {
                        initialProps: { value: (0, d.getValue)(K, 'collateral') },
                        finalProps: {
                          value: (0, d.getValue)(W, 'collateral'),
                          typographyProps: {
                            color:
                              null !==
                                (f =
                                  null == X
                                    ? void 0
                                    : null === (t = X.collateralError) || void 0 === t
                                      ? void 0
                                      : t.color) && void 0 !== f
                                ? f
                                : 'text.body',
                          },
                        },
                        formatter: (e) =>
                          (0, m.sL)({
                            price: T.price,
                            amount: e,
                            decimals: T.decimals,
                            withTrailingZero: !1,
                          }),
                      }),
                    }),
                    (0, r.tZ)(s.soA.ListItem, {
                      warning: null == X ? void 0 : X.borrowError,
                      label: 'Loan ('.concat(
                        (0, d.formatLongString)(null !== (x = M.symbol) && void 0 !== x ? x : ''),
                        ')'
                      ),
                      value: (0, r.tZ)(s.soA.ValueChange, {
                        initialProps: { value: (0, d.getValue)(K, 'borrowAssets') },
                        finalProps: {
                          value: (0, d.getValue)(W, 'borrowAssets'),
                          typographyProps: {
                            color:
                              null !==
                                (w =
                                  null == X
                                    ? void 0
                                    : null === (i = X.borrowError) || void 0 === i
                                      ? void 0
                                      : i.color) && void 0 !== w
                                ? w
                                : 'text.body',
                          },
                        },
                        formatter: (e) => {
                          var t;
                          return (0, m.sL)({
                            price: null !== (t = M.price) && void 0 !== t ? t : 0n,
                            amount: e,
                            decimals: M.decimals,
                            withTrailingZero: !1,
                          });
                        },
                      }),
                    }),
                    (0, r.tZ)(s.soA.ListItem, {
                      warning: null == X ? void 0 : X.ltvError,
                      label: (0, r.tZ)(u.gX, { marketId: C }),
                      value: (0, r.BX)(s.Kqy, {
                        direction: 'row',
                        align: 'center',
                        gap: '2px',
                        children: [
                          (0, r.tZ)(s.soA.ValueChange, {
                            initialProps: {
                              value: null == K ? void 0 : K.ltv,
                              typographyProps: { color: O ? 'text.interactive.error' : void 0 },
                            },
                            finalProps: {
                              value: (0, d.getValue)(W, 'ltv'),
                              typographyProps: {
                                color:
                                  null !==
                                    (Z =
                                      null == X
                                        ? void 0
                                        : null === (h = X.ltvError) || void 0 === h
                                          ? void 0
                                          : h.color) && void 0 !== Z
                                    ? Z
                                    : 'text.body',
                              },
                            },
                            formatter: (e) =>
                              s.$0l.percent.unit('%').trailingZero(!1).digits(2).max(1).of(e, 18),
                          }),
                          (0, r.BX)(s.xvT.Body.XXS.Regular, {
                            display: 'flex',
                            alignItems: 'center',
                            lineHeight: 'normal',
                            gap: '2px',
                            color: 'text.body',
                            children: [
                              (0, r.tZ)(s.xvT.Inherit, { children: '/' }),
                              (0, r.tZ)(u.v1, {
                                lltv: null == N ? void 0 : N.params.lltv,
                                marketId: C,
                              }),
                            ],
                          }),
                        ],
                      }),
                    }),
                    (0, r.tZ)(s.soA.ListItem, {
                      label: 'Borrow Rate',
                      value: (0, r.tZ)(s.Kqy, {
                        gap: 2,
                        direction: 'row',
                        align: 'center',
                        children: (0, r.tZ)(c.w, {
                          RewardsHoverCardProps: {
                            apy: H,
                            rewards: q,
                            variant: 'market',
                            points: D,
                            asset: T,
                            netApy: (0, m.Pi)(I, o.safeParseNumber),
                          },
                          children: (0, r.tZ)(s.soA.Value, {
                            value: _,
                            typographyProps: { color: 'text.body' },
                          }),
                        }),
                      }),
                    }),
                    (0, r.tZ)(s.soA.ListItem, {
                      warning: null == X ? void 0 : X.liquidityError,
                      label: 'Total Liquidity ('.concat(
                        (0, d.formatLongString)(null !== (A = M.symbol) && void 0 !== A ? A : ''),
                        ')'
                      ),
                      value: (0, r.tZ)(s.soA.ValueChange, {
                        initialProps: {
                          value: (0, d.transformValue)(
                            (0, d.getValue)(N, 'liquidity'),
                            l.MathLib.max.bind(void 0, 0n)
                          ),
                        },
                        finalProps: {
                          value: (0, d.transformValue)(
                            (0, d.getValue)(null != E ? E : V, 'liquidity'),
                            l.MathLib.max.bind(void 0, 0n)
                          ),
                          typographyProps: {
                            color:
                              null !==
                                (P =
                                  null == X
                                    ? void 0
                                    : null === (y = X.liquidityError) || void 0 === y
                                      ? void 0
                                      : y.color) && void 0 !== P
                                ? P
                                : 'text.body',
                          },
                        },
                        formatter: (e) => {
                          var t;
                          return (0, m.sL)({
                            price: null !== (t = M.price) && void 0 !== t ? t : 0n,
                            amount: e,
                            decimals: M.decimals,
                            withTrailingZero: !1,
                          });
                        },
                      }),
                    }),
                  ],
                }),
              ],
            })
          : (0, r.tZ)(p, { fullWidth: !0, borderRadius: '20px' });
      });
    },
    34571: function (e, t, i) {
      'use strict';
      i.d(t, {
        Z: function () {
          return n;
        },
      });
      var r = i(78286),
        a = i(58258),
        l = i(54655),
        o = i(27349),
        n = (0, a.memo)((e) => {
          let {
              netApy: t,
              apy: i,
              performanceFee: n,
              rewards: s,
              variant: d,
              points: u,
              isSimulated: c,
              isHoverable: v = !0,
              TextVariant: m = l.xvT.Body.XS.Regular,
              asset: p,
              withBackgroundEffect: g = !0,
            } = e,
            h = (0, a.useMemo)(() => l.$0l.percent.digits(2).unit('%').of(t, 18), [t]);
          return h
            ? (0, r.tZ)(l.KNv, {
                withBackgroundEffect: g,
                hoverCardContent: (0, r.tZ)(o.Z, {
                  netApy: t,
                  apy: i,
                  performanceFee: n,
                  rewards: s,
                  variant: d,
                  points: u,
                  asset: p,
                }),
                isDisabled: !v,
                padding: '0 11px 0 14px',
                children:
                  h &&
                  (0, r.BX)(l.Kqy, {
                    gap: 2,
                    align: 'center',
                    children: [
                      (0, r.tZ)(l.ZT$, {
                        TextVariant: m,
                        isSimulated: c,
                        display: 'flex',
                        alignItems: 'center',
                        lineHeight: 'normal',
                        color: 'text.body',
                        children: h,
                      }),
                      (null == s ? void 0 : s.length)
                        ? (0, r.tZ)(l.JO$, { icon: 'RewardsGradient20' })
                        : null,
                      (null == u ? void 0 : u.length)
                        ? (0, r.tZ)(l.JO$, { icon: 'PointsGradient20' })
                        : null,
                    ],
                  }),
              })
            : null;
        });
    },
    99503: function (e, t, i) {
      'use strict';
      i.d(t, {
        Z: function () {
          return A;
        },
      });
      var r = i(78286),
        a = i(58258),
        l = i(54655),
        o = i(38819);
      let n = (0, o.Z)(l.Kqy, { target: 'ecpepk30' })(
        'padding:',
        (e) => {
          let { theme: t } = e;
          return t.padding.s;
        },
        ';gap:12px;'
      );
      var s = i(73478),
        d = i(55412),
        u = i(3245),
        c = i(63658),
        v = i(60059);
      function m() {
        let e = (0, d._)([
          '\n  query GetCreatorVaults($where: VaultFilters) {\n    vaults(where: $where) {\n      items {\n        ...simpleVaultFields\n        state {\n          id\n          totalAssetsUsd\n        }\n        chain {\n          id\n          network\n        }\n      }\n    }\n  }\n  ',
          '\n',
        ]);
        return (
          (m = function () {
            return e;
          }),
          e
        );
      }
      let p = {},
        g = (0, u.Ps)(m(), v.U);
      var h = i(6423);
      let y = (0, o.Z)(l.Kqy, { target: 'emgz5yv0' })('flex-direction:column;max-height:200px;'),
        b = (0, o.Z)(l.Kqy, { target: 'emgz5yv1' })(
          'width:240px;padding:4px ',
          (e) => {
            let { theme: t } = e;
            return t.spacing.s;
          },
          ';border-radius:8px;cursor:pointer;transition:background-color 0.15s;width:100%;&:hover{background-color:',
          (e) => {
            let { theme: t } = e;
            return t.colors.constant.dark;
          },
          ';}'
        );
      var f = (0, a.memo)(() =>
        (0, r.tZ)(y, {
          children: Array.from({ length: 4 }).map((e, t) =>
            (0, r.tZ)(
              b,
              {
                align: 'center',
                children: (0, r.tZ)(l.OdW, { width: '100%', height: 21, borderRadius: '8px' }, t),
              },
              t
            )
          ),
        })
      );
      let x = (e) =>
        e.slice().sort((e, t) => {
          var i, r, a, l;
          let o =
              null !== (a = null === (i = e.state) || void 0 === i ? void 0 : i.totalAssetsUsd) &&
              void 0 !== a
                ? a
                : 0n,
            n =
              null !== (l = null === (r = t.state) || void 0 === r ? void 0 : r.totalAssetsUsd) &&
              void 0 !== l
                ? l
                : 0n;
          return n > o ? 1 : n < o ? -1 : 0;
        });
      var w = (0, a.memo)((e) => {
          let { creatorName: t, chainId: i } = e,
            {
              data: o,
              error: n,
              loading: d,
            } = (function (e) {
              let t = { ...p, ...e };
              return c.aM(g, t);
            })({
              variables: {
                where: { search: t, chainId_in: [i], totalAssetsUsd_gte: 1, whitelisted: !0 },
              },
              skip: !t,
            }),
            u = (0, a.useMemo)(() => {
              var e;
              return x(null !== (e = null == o ? void 0 : o.vaults.items) && void 0 !== e ? e : []);
            }, [null == o ? void 0 : o.vaults.items]);
          return d
            ? (0, r.tZ)(f, {})
            : n
              ? (0, r.tZ)(l.xvT.Body.XS.Regular, {
                  color: 'text.interactive.error',
                  children: 'Error loading vaults',
                })
              : (0, r.tZ)(l.xrM, {
                  children: (0, r.tZ)(y, {
                    children:
                      0 === u.length
                        ? (0, r.BX)(l.xvT.Body.S.Regular, {
                            color: 'text.body',
                            children: ['No vaults found for this curator on ', i, '.'],
                          })
                        : u.map((e) => {
                            let {
                                id: t,
                                name: i,
                                address: a,
                                state: o,
                                metadata: n,
                                chain: { network: d },
                              } = e,
                              u = (0, h.Q)({ chainName: d, vaultAddress: a, vaultName: i });
                            return (0, r.tZ)(
                              s.h,
                              {
                                href: u,
                                prefetch: !0,
                                children: (0, r.BX)(b, {
                                  justify: 'space-between',
                                  gap: 'xs',
                                  align: 'center',
                                  children: [
                                    (0, r.BX)(l.Kqy, {
                                      gap: 4,
                                      align: 'center',
                                      children: [
                                        (0, r.tZ)(l.qEK, {
                                          src: null == n ? void 0 : n.image,
                                          size: 'small',
                                        }),
                                        (0, r.tZ)(l.xvT.Body.XXS.Regular, {
                                          shorten: 1,
                                          color: 'text.body',
                                          children: i,
                                        }),
                                      ],
                                    }),
                                    o &&
                                      (0, r.tZ)(l.xvT.Body.XXS.Regular, {
                                        color: 'text.body',
                                        children: l.$0l.short
                                          .unit('$')
                                          .digits(2)
                                          .of(o.totalAssetsUsd),
                                      }),
                                  ],
                                }),
                              },
                              t
                            );
                          }),
                  }),
                });
        }),
        Z = (0, a.memo)((e) => {
          let { creatorName: t, riskCurators: i, chainId: a } = e;
          return 0 !== i.length && t
            ? (0, r.BX)(n, {
                direction: 'column',
                children: [
                  (0, r.tZ)(l.Kqy, {
                    gap: 's',
                    children: i.map((e) => {
                      let { name: t, image: i } = e;
                      return (0, r.BX)(
                        l.Kqy,
                        {
                          direction: 'row',
                          gap: 4,
                          align: 'center',
                          children: [
                            (0, r.tZ)(l.qEK, { src: i, size: 'medium' }),
                            (0, r.tZ)(l.xvT.Body.XS.Regular, { color: 'text.body', children: t }),
                          ],
                        },
                        t
                      );
                    }),
                  }),
                  (0, r.tZ)(w, { creatorName: t, chainId: a }),
                ],
              })
            : null;
        }),
        A = (0, a.memo)((e) => {
          var t;
          let {
            curators: i,
            creatorAddress: a,
            TextVariant: o = l.xvT.Body.XS.Regular,
            isSimulated: n,
            isHoverable: s = !0,
            withLabel: d = !0,
            chainId: u,
          } = e;
          return i && 0 !== i.length
            ? (0, r.tZ)(l.KNv, {
                hoverCardContent:
                  a &&
                  (0, r.tZ)(Z, {
                    creatorName: null === (t = i[0]) || void 0 === t ? void 0 : t.name,
                    riskCurators: i,
                    chainId: u,
                  }),
                isDisabled: !a || !s,
                children: (0, r.tZ)(l.Kqy, {
                  direction: 'row',
                  gap: 'xs',
                  align: 'center',
                  children: i.map((e, t) => {
                    let { name: i, image: a } = e;
                    return (0, r.BX)(
                      l.Kqy,
                      {
                        direction: 'row',
                        gap: 4,
                        align: 'center',
                        children: [
                          a && (0, r.tZ)(l.qEK, { src: a, size: 'medium' }),
                          d &&
                            (0, r.tZ)(l.ZT$, {
                              lineHeight: 'normal',
                              isSimulated: n,
                              TextVariant: o,
                              color: 'text.body',
                              children: i,
                            }),
                        ],
                      },
                      t
                    );
                  }),
                }),
              })
            : null;
        });
    },
    55872: function (e, t, i) {
      'use strict';
      i.d(t, {
        m: function () {
          return h;
        },
      });
      var r = i(78286),
        a = i(58258),
        l = i(54655),
        o = i(17965),
        n = i(40252),
        s = i(35047),
        d = i(50825),
        u = i(38819);
      let c = (0, u.Z)('div', { target: 'eyr4h7c0' })(
          'min-width:220px;max-width:300px;padding:',
          (e) => {
            let { theme: t } = e;
            return t.spacing.s;
          },
          ' 0;'
        ),
        v = (0, u.Z)(l.Kqy, { target: 'eyr4h7c1' })(
          'padding:0px ',
          (e) => {
            let { theme: t } = e;
            return t.spacing.s;
          },
          ';min-height:34px;'
        ),
        m = (0, u.Z)(v, { target: 'eyr4h7c2' })(
          'padding:10px ',
          (e) => {
            let { theme: t } = e;
            return t.spacing.s;
          },
          ';'
        ),
        p = (0, u.Z)(l.xvT.Body.XXS.Regular, { target: 'eyr4h7c3' })('display:contents;');
      var g = (0, a.memo)((e) => {
          let { className: t, collateralExposure: i, targetChainId: u } = e,
            g = (0, a.useMemo)(
              () =>
                Array.from(i.lltvs)
                  .map((e) =>
                    ''.concat(l.$0l.percent.unit('%').trailingZero(!1).digits(1).of(e, 18))
                  )
                  .join(', '),
              [i]
            ),
            h = (0, a.useMemo)(() => {
              let e = new Set();
              return Array.from(i.oracles)
                .map((e) => {
                  let t = 'string' == typeof e,
                    i = t ? e : e.address;
                  return {
                    label: t
                      ? (0, l.GQT)(e)
                      : e.type === o.OracleType.Unknown
                        ? (0, l.GQT)(i)
                        : (0, s.formatLongString)((0, l.pTE)(e), 30) || (0, l.GQT)(i),
                    url: n.ChainUtils.getExplorerAddressUrl(u, i),
                    address: i,
                  };
                })
                .filter((t) => {
                  let i = ''.concat(t.label, '-').concat(t.url, '-').concat(t.address);
                  return !e.has(i) && (e.add(i), !0);
                });
            }, [i.oracles, u]);
          return (0, r.tZ)(c, {
            className: t,
            children: (0, r.BX)(l.Kqy, {
              direction: 'column',
              children: [
                (0, r.BX)(v, {
                  align: 'center',
                  justify: 'space-between',
                  children: [
                    (0, r.tZ)(l.xvT.Body.XXS.Regular, {
                      color: 'text.body',
                      children: 'Collateral',
                    }),
                    (0, r.BX)(l.Kqy, {
                      align: 'center',
                      gap: 4,
                      children: [
                        (0, r.tZ)(l.qEK, { src: i.token.logoURI, size: 'small' }),
                        (0, r.tZ)(p, {
                          children: i.token.symbol
                            ? (0, s.formatLongString)(i.token.symbol, 35)
                            : '-',
                        }),
                      ],
                    }),
                  ],
                }),
                (0, r.tZ)(l.Z0O, {}),
                (0, r.BX)(v, {
                  align: 'center',
                  justify: 'space-between',
                  children: [
                    (0, r.tZ)(l.xvT.Body.XXS.Regular, { color: 'text.body', children: 'LLTV' }),
                    (0, r.tZ)(l.xvT.Body.XXS.Regular, { children: g }),
                  ],
                }),
                (0, r.tZ)(l.Z0O, {}),
                (0, r.BX)(m, {
                  align: 'center',
                  justify: 'space-between',
                  gap: 's',
                  children: [
                    (0, r.tZ)(l.xvT.Body.XXS.Regular, { children: 'Oracle' }),
                    (0, r.tZ)(l.Kqy, {
                      direction: 'column',
                      gap: 5,
                      align: 'end',
                      children: h.map((e, t) =>
                        (0, r.tZ)(
                          d.Z,
                          {
                            href: e.url,
                            mode: 'external',
                            buttonProps: { variant: 'ghost', size: 'small', label: e.label },
                          },
                          'oracleLink_'.concat(t)
                        )
                      ),
                    }),
                  ],
                }),
              ],
            }),
          });
        }),
        h = (0, a.memo)((e) => {
          let {
              className: t,
              collateralExposures: i,
              targetChainId: o,
              extraInfo: n,
              align: s = 'left',
              maxTokensCount: d,
            } = e,
            u = (0, a.useMemo)(
              () =>
                i.map((e) => ({
                  hoverCardContent: (0, r.tZ)(g, { collateralExposure: e, targetChainId: o }),
                  logoUrl: e.token.logoURI,
                })),
              [i, o]
            );
          return (0, r.tZ)(l.$xj, {
            className: t,
            items: u,
            extraInfo: n,
            align: s,
            maxTokensCount: d,
          });
        });
    },
    9124: function (e, t, i) {
      'use strict';
      i.d(t, {
        K: function () {
          return h;
        },
      });
      var r = i(78286),
        a = i(58258),
        l = i(54655),
        o = i(4565),
        n = i(12556),
        s = i(35047),
        d = i(89991),
        u = i(16820),
        c = i(47528),
        v = (e) => {
          let { markets: t, selectedMarketId: i } = e,
            { targetChain: r } = (0, d.Z_)();
          return (0, a.useMemo)(
            () =>
              t
                ? t
                    .map((e) => {
                      var t, a, d, v;
                      let m = (0, n.wk)(e.loanAsset),
                        p = (0, n.wk)(e.collateralAsset),
                        g = (0, c.f)(e),
                        h = (0, u.Pi)(
                          null === (t = e.state) || void 0 === t ? void 0 : t.dailyNetBorrowApy,
                          o.safeParseNumber
                        ),
                        y = (0, u.Pi)(
                          null === (a = e.state) || void 0 === a ? void 0 : a.dailyBorrowApy,
                          o.safeParseNumber
                        ),
                        b = (0, l.bhT)(r.id, e.uniqueKey, null == p ? void 0 : p.address).filter(
                          s.isDefined
                        ),
                        f = (0, l.pTE)({ address: e.oracleAddress, ...e.oracleFeed });
                      return {
                        market: e,
                        loanAsset: m,
                        collateralAsset: p,
                        rewards: g,
                        oracleName: f,
                        liquidity: {
                          amount:
                            null === (d = e.state) || void 0 === d ? void 0 : d.liquidityAssets,
                          value: (0, u.Pi)(
                            null === (v = e.state) || void 0 === v ? void 0 : v.liquidityAssetsUsd,
                            o.safeParseNumber
                          ),
                        },
                        netApy: { dailyNetBorrowApy: h, dailyBorrowApy: y, rewards: g, points: b },
                        isSelected: e.uniqueKey === i,
                      };
                    })
                    .sort((0, s.bigIntComparator)((e) => e.liquidity.value, 'desc'))
                : [],
            [t, i, r.id]
          );
        },
        m = i(34571);
      let p = [
          {
            id: 'market',
            header: () =>
              (0, r.tZ)(l.xvT.Body.XXXS.Regular, {
                marginLeft: '12px',
                color: 'text.secondary',
                children: 'Market',
              }),
            cell: function (e) {
              let { row: t } = e,
                { targetChainId: i } = (0, d.Z_)();
              return (0, r.BX)(l.Kqy, {
                gap: 'xs',
                align: 'center',
                'data-testid': 'market-cell-'.concat(t.original.market.uniqueKey.toLowerCase()),
                children: [
                  (0, r.tZ)(l.k1R, {
                    ...t.original.market,
                    chainId: i,
                    maxLength: 6,
                    TextVariant: l.xvT.Body.XXS.Regular,
                  }),
                  t.original.market.oracleFeed &&
                    (0, r.tZ)(l.Vp9, {
                      variant: 'main',
                      label: (0, s.formatLongString)(t.original.oracleName, 15),
                    }),
                  t.original.isSelected &&
                    (0, r.tZ)(l.JO$, { icon: 'CheckPlain20', color: 'text.body' }),
                ],
              });
            },
            accessorFn: (e) => e.market.lltv,
            sortingFn: (0, s.bigIntComparator)((e) => e.original.market.lltv),
          },
          {
            id: 'liquidity',
            header: 'Liquidity',
            cell: (e) => {
              var t;
              let { row: i } = e;
              return i.original.collateralAsset
                ? (0, r.tZ)(l.UuD, {
                    withAvatar: !0,
                    token: i.original.collateralAsset,
                    amount:
                      null === (t = i.original.market.state) || void 0 === t
                        ? void 0
                        : t.liquidityAssets,
                    maxLength: 6,
                    TextVariant: l.xvT.Body.XXXS.Regular,
                    value: i.original.liquidity.value,
                  })
                : null;
            },
            accessorFn: (e) => {
              var t;
              return null === (t = e.market.state) || void 0 === t ? void 0 : t.liquidityAssetsUsd;
            },
          },
          {
            id: 'netApy',
            header: 'Rate',
            accessorFn: (e) => e.netApy.dailyBorrowApy,
            cell: (e) => {
              let { row: t } = e;
              return t.original.netApy.dailyBorrowApy && t.original.netApy.dailyNetBorrowApy
                ? (0, r.tZ)(m.Z, {
                    variant: 'market',
                    performanceFee: BigInt(0),
                    netApy: t.original.netApy.dailyNetBorrowApy,
                    apy: t.original.netApy.dailyBorrowApy,
                    rewards: t.original.netApy.rewards,
                    points: t.original.netApy.points,
                    TextVariant: l.xvT.Body.XXXS.Regular,
                    isHoverable: !1,
                  })
                : null;
            },
          },
        ],
        g = [
          {
            id: 'market',
            header: 'Market',
            cell: (e) => {
              var t;
              let { row: i } = e;
              return (0, r.BX)(l.Kqy, {
                direction: 'row',
                gap: 'xs',
                align: 'center',
                wrap: 'wrap',
                style: { marginBlock: '12px' },
                children: [
                  (0, r.tZ)(l.k1R, { ...i.original.market, chainId: 1 }),
                  i.original.market.collateralAsset &&
                    (0, r.tZ)(l.UuD, {
                      withAvatar: !0,
                      token: (0, n.wk)(i.original.market.collateralAsset),
                      amount:
                        null === (t = i.original.market.state) || void 0 === t
                          ? void 0
                          : t.liquidityAssets,
                      value: i.original.liquidity.value,
                    }),
                  (0, r.tZ)(m.Z, {
                    netApy: i.original.netApy.dailyNetBorrowApy,
                    apy: i.original.netApy.dailyBorrowApy,
                    performanceFee: BigInt(0),
                    rewards: i.original.netApy.rewards,
                    variant: 'market',
                    isHoverable: !1,
                  }),
                ],
              });
            },
          },
        ];
      var h = (0, a.memo)((e) => {
        var t, i;
        let {
            isOpen: o,
            isLoading: n,
            markets: s,
            selectedMarket: d,
            buttonLabel: u,
            side: c = 'bottom',
            align: m = 'end',
            direction: h = 'column',
            onOpenChange: y,
            onSelect: b,
          } = e,
          f = (0, l.CPt)(),
          x = v({ markets: s, selectedMarketId: null == d ? void 0 : d.uniqueKey }),
          w = (0, a.useMemo)(() => (f ? g : p), [f]),
          Z = (0, a.useMemo)(() => {
            if (!d) return '';
            let e = (0, l.lAJ)({
                collateralAsset: null == d ? void 0 : d.collateralAsset,
                loanAsset: null == d ? void 0 : d.loanAsset,
                maxLength: 10,
              }),
              t = d.lltv
                ? l.$0l.percent
                    .readable()
                    .trailingZero(!1)
                    .digits(0)
                    .unit('%')
                    .of(BigInt(d.lltv), 18)
                : '';
            return ''.concat(e, ' ').concat(t);
          }, [d]);
        return n
          ? (0, r.tZ)(l.OdW, { width: '150px', height: '45px', borderRadius: '20px' })
          : (0, r.BX)(l.Ce2.Root, {
              open: o,
              onOpenChange: y,
              children: [
                (0, r.BX)(l.Kqy, {
                  direction: h,
                  gap: 'xs',
                  flex: 1,
                  align: 'row' === h ? 'center' : 'start',
                  children: [
                    u &&
                      (0, r.tZ)(l.xvT.Body.XXXS.Regular, { color: 'text.secondary', children: u }),
                    (0, r.tZ)(l.Ce2.Trigger, {
                      children: (0, r.tZ)(l.zxk, {
                        iconLeft: (0, r.tZ)(l.Kqy, {
                          direction: 'row',
                          align: 'center',
                          gap: 'xs',
                          children: (0, r.tZ)(l.Pws, {
                            collateralAssetURI:
                              null == d
                                ? void 0
                                : null === (t = d.collateralAsset) || void 0 === t
                                  ? void 0
                                  : t.logoURI,
                            loanAssetURI:
                              null == d
                                ? void 0
                                : null === (i = d.loanAsset) || void 0 === i
                                  ? void 0
                                  : i.logoURI,
                          }),
                        }),
                        loading: n,
                        iconRight: 'ChevronPlain20',
                        variant: 'secondary',
                        label: Z,
                        iconRightProps: {
                          style: {
                            transition: 'transform 0.2s ease-in-out',
                            transform: o ? 'rotate(180deg)' : 'rotate(0deg)',
                          },
                        },
                        onClick: () => y(!o),
                        'data-testid': 'select-market-trigger',
                      }),
                    }),
                  ],
                }),
                (0, r.tZ)(l.Ce2.Portal, {
                  children: (0, r.tZ)(l.Ce2.Content, {
                    side: c,
                    sideOffset: 2,
                    align: m,
                    width: 'min(600px, 90vw)',
                    children: (0, r.tZ)(l.Ce2.Table, {
                      data: x,
                      columnsDefs: w,
                      columnWidths: ['53%', '190px'],
                      onRowClick: (e) => b(e.market.uniqueKey),
                    }),
                  }),
                }),
              ],
            });
      });
    },
    12472: function (e, t, i) {
      'use strict';
      var r = i(78286),
        a = i(58258),
        l = i(4565),
        o = i(54655),
        n = i(35047),
        s = i(55872),
        d = i(73478),
        u = i(89991),
        c = i(9834),
        v = i(16820),
        m = i(6423),
        p = i(78017);
      t.Z = (0, a.memo)((e) => {
        var t, i, g;
        let { initialPosition: h, finalPosition: y, vault: b } = e,
          { targetChain: f } = (0, u.Z_)(),
          x = (0, a.useMemo)(() => (0, c.m)(b.allocation), [b.allocation]),
          w = (0, a.useMemo)(
            () => o.$0l.percent.digits(2).unit('%').of(b.dailyNetApy),
            [b.dailyNetApy]
          ),
          Z = (0, a.useMemo)(
            () => (0, m.Q)({ chainName: f.name, vaultAddress: b.address, vaultName: b.name }),
            [b.address, b.name, f.name]
          ),
          A = (0, a.useMemo)(
            () => ((0, n.isDefined)(b.warnings) ? (0, o.Myy)(b.warnings) : void 0),
            [b.warnings]
          ),
          P = (0, a.useMemo)(() => {
            let e = (0, o.Uaj)(b.name);
            return e ? (0, n.formatLongString)(e, 22) : '';
          }, [b.name]),
          k = (0, a.useMemo)(() => {
            if (b.dailyApy) return (0, l.safeParseNumber)(b.dailyApy);
          }, [b.dailyApy]),
          B = (0, a.useMemo)(() => {
            if (b.fee) return (0, l.safeParseNumber)(b.fee);
          }, [b.fee]);
        return (0, r.BX)(o.soA.Root, {
          width: '100%',
          height: '257px',
          children: [
            (0, r.BX)(o.soA.Header, {
              children: [
                (0, r.tZ)(o.qEK, { size: 'large', src: b.asset.logoURI }),
                (0, r.BX)(o.Kqy, {
                  direction: 'column',
                  gap: 'xs',
                  children: [
                    (0, r.tZ)(o.ua7, {
                      content: 'Go to vault.',
                      children: (0, r.tZ)(o.Kqy, {
                        children: (0, r.tZ)(d.h, {
                          href: Z,
                          target: '_blank',
                          children: (0, r.tZ)(o.ZT$, {
                            TextVariant: o.xvT.Title.XS,
                            underlineOnHover: !0,
                            children: P,
                          }),
                        }),
                      }),
                    }),
                    (0, r.BX)(o.Kqy, {
                      direction: 'row',
                      align: 'center',
                      gap: 4,
                      children: [
                        null === (t = b.curators) || void 0 === t
                          ? void 0
                          : t.map((e) =>
                              (0, r.tZ)(
                                o.Vp9,
                                {
                                  variant: 'main',
                                  label: e.name,
                                  startIcon: (0, r.tZ)(o.qEK, {
                                    src: e.image,
                                    size: 'small',
                                    style: { width: 16, height: 16 },
                                  }),
                                },
                                e.name
                              )
                            ),
                        (0, r.tZ)(o.mUV, {
                          size: 'small',
                          variant: 'ghost',
                          toCopy: b.address,
                          tooltipMessage: 'Copy Vault Address.',
                          toastMessage: 'Vault address copied to clipboard.',
                        }),
                      ],
                    }),
                  ],
                }),
              ],
            }),
            (0, r.BX)(o.soA.List, {
              children: [
                (0, r.tZ)(o.soA.ListItem, {
                  label: 'My Position ('.concat(
                    (0, n.formatLongString)(null !== (i = b.asset.symbol) && void 0 !== i ? i : ''),
                    ')'
                  ),
                  value: (0, r.tZ)(o.soA.ValueChange, {
                    initialProps: { value: h },
                    finalProps: { value: y },
                    formatter: (e) =>
                      (0, v.sL)({
                        price: b.asset.price,
                        amount: e,
                        decimals: b.asset.decimals,
                        withTrailingZero: !1,
                      }),
                  }),
                }),
                (0, r.tZ)(o.soA.ListItem, {
                  label: 'APY',
                  value: (0, r.BX)(o.Kqy, {
                    gap: 2,
                    direction: 'row',
                    align: 'center',
                    children: [
                      (0, r.tZ)(o.soA.Value, { value: w }),
                      (0, r.tZ)(p.w, {
                        RewardsHoverCardProps: {
                          performanceFee: B,
                          apy: k,
                          rewards: b.rewards,
                          points: null !== (g = b.points) && void 0 !== g ? g : [],
                          variant: 'vault',
                        },
                      }),
                    ],
                  }),
                }),
                (0, r.tZ)(o.soA.ListItem, {
                  label: 'Collateral Exposure',
                  value: (0, r.tZ)(s.m, {
                    align: 'right',
                    collateralExposures: x,
                    extraInfo: (0, r.tZ)(o.aNP, { ...A }),
                    targetChainId: f.id,
                    maxTokensCount: 5,
                  }),
                }),
              ],
            }),
          ],
        });
      });
    },
    34896: function (e, t, i) {
      'use strict';
      i.d(t, {
        H: function () {
          return l;
        },
      });
      var r = i(45842),
        a = i(82803);
      let l = (e) => {
        switch (e.type) {
          case a.H.InterfaceOperationType.repay:
          case a.H.InterfaceOperationType.borrow:
          case a.H.InterfaceOperationType.metaMorphoDeposit:
          case a.H.InterfaceOperationType.metaMorphoWithdraw:
            return e.assets > 0n || e.shares > 0n;
          case a.H.InterfaceOperationType.withdrawCollateral:
          case a.H.InterfaceOperationType.supplyCollateral:
            return e.assets > 0n;
          case a.H.InterfaceOperationType.supplyCollateralBorrow:
          case a.H.InterfaceOperationType.withdrawCollateralRepay:
            return e.collateralAssets > 0n || e.loanAssets > 0n || e.loanShares > 0n;
          case a.H.InterfaceOperationType.zap:
            return e.collateralAssets > 0n && e.marketTo !== r.DR;
          case a.H.InterfaceOperationType.migrateSupply:
            return e.assets > 0n;
          case a.H.InterfaceOperationType.migrateBorrow:
            return e.collateralAssets > 0n || e.loanAssets > 0n;
          default:
            throw Error('Not implemented');
        }
      };
    },
    89805: function (e, t, i) {
      'use strict';
      i.d(t, {
        _: function () {
          return v;
        },
      });
      var r = i(58258),
        a = i(68612),
        l = i(40252),
        o = i(35047),
        n = i(51196),
        s = i(89991),
        d = i(34896),
        u = i(57054);
      let c = l.MathLib.MAX_UINT_160,
        v = function (e, t, i) {
          var v;
          let m = !(arguments.length > 3) || void 0 === arguments[3] || arguments[3],
            { account: p } = (0, s.Z_)(),
            g =
              null !== (v = null == p ? void 0 : p.address) && void 0 !== v
                ? v
                : '0x0000000000000000000000000000000000000001',
            h = (0, r.useMemo)(
              () =>
                m
                  ? e &&
                    (0, n.produceImmutable)(e, (e) => {
                      var t, i;
                      (0, o.keys)(e.tokens).forEach((t) => {
                        var i, r, o, n;
                        let s =
                          null !==
                            (n = (r =
                              null !== (o = (i = e.holdings)[g]) && void 0 !== o ? o : (i[g] = {}))[
                              t
                            ]) && void 0 !== n
                            ? n
                            : (r[t] = new l.Holding({
                                user: g,
                                token: t,
                                balance: 0n,
                                erc20Allowances: {
                                  morpho: 0n,
                                  permit2: 0n,
                                  'bundler3.generalAdapter1': a.zL,
                                },
                                permit2BundlerAllowance: { amount: 0n, expiration: 0n, nonce: 0n },
                              }));
                        (s.canTransfer = !0), (s.balance += c);
                      }),
                        (0, o.keys)(e.markets).forEach((t) => {
                          var i, r, a, o;
                          (null !==
                            (o = (r =
                              null !== (a = (i = e.positions)[g]) && void 0 !== a
                                ? a
                                : (i[g] = {}))[t]) &&
                            void 0 !== o) ||
                            (r[t] = new l.Position({
                              user: g,
                              marketId: t,
                              supplyShares: 0n,
                              borrowShares: 0n,
                              collateral: 0n,
                            }));
                        }),
                        (null !== (i = (t = e.users)[g]) && void 0 !== i) ||
                          (t[g] = new l.User({
                            address: g,
                            isBundlerAuthorized: !1,
                            morphoNonce: 0n,
                          }));
                    })
                  : e,
              [e, m, g]
            ),
            y = (0, r.useMemo)(() => ((0, d.H)(t) ? [t] : []), [t]),
            [b, f] = (0, u.b)(h, y, i, g),
            { steps: x, exceededToken: w } = (0, r.useMemo)(() => {
              let e;
              return m
                ? {
                    steps:
                      g &&
                      (null == b
                        ? void 0
                        : b.map((i) =>
                            (0, n.produceImmutable)(i, (i) => {
                              var r;
                              let a = {};
                              (0, o.values)(
                                null !== (r = i.holdings[g]) && void 0 !== r ? r : {}
                              ).forEach((r) => {
                                if (!r) return;
                                let n = i.getBundleAssetBalances(
                                    g,
                                    r.token,
                                    l.DEFAULT_SLIPPAGE_TOLERANCE
                                  ),
                                  s = r.balance - c,
                                  { virtualFinalBalance: d, virtualDealtBalance: u } = (0,
                                  o.values)(null == n ? void 0 : n.allocations)
                                    .filter(o.isDefined)
                                    .reduce(
                                      (e, i) => {
                                        var r;
                                        let { type: a, srcAmount: l, dstAmount: o } = i;
                                        return (
                                          !(o > 0n) ||
                                            (null === (r = t.options.disabledPeripheralTokens) ||
                                            void 0 === r
                                              ? void 0
                                              : r.has(a)) ||
                                            ((e.virtualFinalBalance += o),
                                            (e.virtualDealtBalance += (c * o) / l)),
                                          e
                                        );
                                      },
                                      { virtualFinalBalance: 0n, virtualDealtBalance: 0n }
                                    ),
                                  v = i.tryGetToken(r.token);
                                d < u &&
                                  v &&
                                  (!e || (null == v ? void 0 : v.address) === l.NATIVE_ADDRESS) &&
                                  (e = new l.Token(v)),
                                  (a[r.token] = new l.Holding({
                                    ...r,
                                    balance: l.MathLib.max(0n, s),
                                  }));
                              }),
                                (i.holdings[g] = a);
                            })
                          )),
                    exceededToken: e,
                  }
                : { steps: b, exceededToken: void 0 };
            }, [t.options.disabledPeripheralTokens, m, g, b]);
          return [x, f, g, w];
        };
    },
    77458: function (e, t, i) {
      'use strict';
      var r = i(12556);
      t.Z = (e, t, i, a) => (0, r.nR)({ dependencies: [e], requiredData: [t, i], isFetching: a });
    },
    84030: function (e, t, i) {
      'use strict';
      var r = i(58258),
        a = i(54655);
      t.Z = (e, t, i) =>
        (0, r.useMemo)(() => {
          var r, l;
          if ((0, a.Czs)(t) || !i)
            return {
              initialData: {
                collateral: void 0,
                loan: void 0,
                ltv: void 0,
                market: void 0,
                position: void 0,
              },
              finalData: {
                collateral: void 0,
                loan: void 0,
                ltv: void 0,
                market: void 0,
                position: void 0,
              },
            };
          let [o, n] = i,
            s = o.tryGetMarket(e),
            d = null == n ? void 0 : n.tryGetMarket(e),
            u = o.tryGetAccrualPosition(t, e),
            c = null == n ? void 0 : n.tryGetAccrualPosition(t, e);
          return {
            initialData: {
              collateral: null !== (r = null == u ? void 0 : u.collateral) && void 0 !== r ? r : 0n,
              loan:
                null == s
                  ? void 0
                  : s.toBorrowAssets(
                      null !== (l = null == u ? void 0 : u.borrowShares) && void 0 !== l ? l : 0n
                    ),
              ltv: null == u ? void 0 : u.ltv,
              market: s,
              position: u,
            },
            finalData: {
              collateral: null == c ? void 0 : c.collateral,
              loan: (null == c ? void 0 : c.borrowShares)
                ? null == d
                  ? void 0
                  : d.toBorrowAssets(null == c ? void 0 : c.borrowShares)
                : void 0,
              ltv: null == c ? void 0 : c.ltv,
              market: d,
              position: c,
            },
          };
        }, [i, t, e]);
    },
    52832: function (e, t, i) {
      'use strict';
      var r = i(78286),
        a = i(58258),
        l = i(54655);
      t.Z = (e, t) =>
        (0, a.useMemo)(
          () =>
            e
              ? (0, r.tZ)(l.xvT.Body.XXXS.Regular, { wordBreak: 'break-all', children: e })
              : t
                ? (0, r.tZ)(l.xvT.Body.XXXS.Regular, {
                    children: 'Please switch to the correct network',
                  })
                : void 0,
          [t, e]
        );
    },
    34550: function (e, t, i) {
      'use strict';
      var r = i(58258),
        a = i(3100);
      t.Z = (e, t, i, l, o, n, s, d, u, c, v) =>
        (0, r.useMemo)(
          () =>
            v
              ? ''.concat((0, a.Z)(e), ' disabled')
              : t
                ? 'Enter an amount'
                : c
                  ? 'Wrong network'
                  : !i && l
                    ? 'Editing'
                    : d && u
                      ? 'Could not fetch block'
                      : o ||
                        (s
                          ? s.message
                          : 0 !== n.length && (1 !== n.length || i)
                            ? 'Finalize bundle'
                            : 'Review '.concat(e)),
          [t, l, u, i, n.length, d, s, o, c, e, v]
        );
    },
    25596: function (e, t, i) {
      'use strict';
      i.d(t, {
        oP: function () {
          return n;
        },
      });
      var r = i(78286),
        a = i(58258),
        l = i(12556),
        o = i(54655);
      let n = (e) => {
        let { address: t, error: i, isWrongChain: r, chainId: o } = e,
          { isReadOnly: n, message: s } = (0, l.WW)({ chainId: o, address: t });
        return (0, a.useMemo)(
          () =>
            n
              ? { message: s, textProps: { whiteSpace: 'break-spaces' } }
              : i
                ? { message: i, textProps: { wordBreak: 'break-all' } }
                : r
                  ? { message: 'Please switch to the correct network', textProps: {} }
                  : void 0,
          [i, r, n, s]
        );
      };
      t.ZP = (e) => {
        let { address: t, error: i, isWrongChain: a, chainId: l } = e,
          s = n({ address: t, error: i, isWrongChain: a, chainId: l });
        if (s) return (0, r.tZ)(o.xvT.Body.XXXS.Regular, { ...s.textProps, children: s.message });
      };
    },
    39882: function (e, t, i) {
      'use strict';
      i.d(t, {
        t: function () {
          return l;
        },
      });
      var r = i(58258),
        a = i(35047);
      let l = (e) => {
        let { market: t, withSharedLiquidity: i } = e;
        return (0, r.useMemo)(() => {
          var e, r, l;
          if (!t) return;
          let o = [],
            n = [],
            s = [];
          n.push(t.uniqueKey), t.collateralAsset && o.push(t.collateralAsset.address);
          let d =
            null === (r = t.collateralAsset) || void 0 === r
              ? void 0
              : null === (e = r.vault) || void 0 === e
                ? void 0
                : e.address;
          return (
            (0, a.isDefined)(d) && s.push(d),
            o.push(t.loanAsset.address),
            i &&
              (null === (l = t.publicAllocatorSharedLiquidity) ||
                void 0 === l ||
                l.forEach((e) => {
                  var t;
                  s.push(e.vault.address),
                    null === (t = e.vault.publicAllocatorConfig) ||
                      void 0 === t ||
                      t.flowCaps.forEach((e) => {
                        var t;
                        n.push(e.market.uniqueKey),
                          o.push(e.market.loanAsset.address),
                          (null === (t = e.market.collateralAsset) || void 0 === t
                            ? void 0
                            : t.address) && o.push(e.market.collateralAsset.address);
                      });
                })),
            { tokens: o, marketIds: n, vaults: s }
          );
        }, [t, i]);
      };
    },
    76280: function (e, t, i) {
      'use strict';
      i.d(t, {
        q: function () {
          return a;
        },
      });
      var r = i(58258);
      let a = (e) =>
        (0, r.useMemo)(() => {
          if (!e) return;
          let t = [],
            i = [],
            r = [],
            { address: a, asset: l, state: o } = e;
          return (
            t.push(a),
            i.push(a, l.address),
            (null == o ? void 0 : o.allocation) &&
              o.allocation.forEach((e) => {
                var t;
                let { market: a } = e;
                r.push(a.uniqueKey);
                let l = null === (t = a.collateralAsset) || void 0 === t ? void 0 : t.address;
                l && i.push(l);
              }),
            { vaults: t, tokens: i, marketIds: r }
          );
        }, [e]);
    },
  },
  function (e) {
    e.O(
      0,
      [
        9913, 1811, 3960, 3261, 1087, 115, 7287, 6929, 3391, 3515, 4516, 3613, 1594, 4655, 825,
        5962, 9255, 7567, 3214, 6269, 8804, 1744,
      ],
      function () {
        return e((e.s = 3699));
      }
    ),
      (_N_E = e.O());
  },
]);
